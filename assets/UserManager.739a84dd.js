import{r as c,R as e}from"./index.da6908f5.js";import{m as d,h as z,d as V,o as K,c as j,u as q,U as J,P as F,r as f,B as r,A as Q,C as Z}from"./App.11263b70.js";import{T as Y}from"./TextEdit.ae1e2d77.js";import{C as W}from"./CodeHelperPopup.3932fdb9.js";import{C as _}from"./CommonButton.0b792d77.js";import{H as ee}from"./HeaderList.b90f1652.js";const te=[{fieldName:"Pno",dataType:d.exports.ValueType.TEXT},{fieldName:"UserName",dataType:d.exports.ValueType.TEXT},{fieldName:"DeptCd",dataType:d.exports.ValueType.TEXT},{fieldName:"DeptNm",dataType:d.exports.ValueType.TEXT},{fieldName:"UseYn",dataType:d.exports.ValueType.TEXT},{fieldName:"SuperUser",dataType:d.exports.ValueType.TEXT},{fieldName:"Gwid",dataType:d.exports.ValueType.TEXT},{fieldName:"GroupDeptCd",dataType:d.exports.ValueType.TEXT},{fieldName:"GroupLoginId",dataType:d.exports.ValueType.TEXT},{fieldName:"CustCd",dataType:d.exports.ValueType.TEXT},{fieldName:"CustNm",dataType:d.exports.ValueType.TEXT},{fieldName:"OrderYn",dataType:d.exports.ValueType.TEXT},{fieldName:"OutsourcingYn",dataType:d.exports.ValueType.TEXT},{fieldName:"AgencyYn",dataType:d.exports.ValueType.TEXT}],ae=[{name:"Pno",fieldName:"Pno",type:"data",width:"150",header:{text:"\uC0AC\uC6A9\uC790ID",showTooltip:!0},renderer:{type:"text",showTooltip:!0},styleName:"left-column"},{name:"UserName",fieldName:"UserName",type:"data",width:"120",header:{text:"\uC0AC\uC6A9\uC790\uBA85",showTooltip:!0},renderer:{type:"text",showTooltip:!0},styleName:"left-column"},{name:"DeptNm",fieldName:"DeptNm",type:"data",width:"100",header:{text:"\uBD80\uC11C\uBA85",showTooltip:!0},renderer:{type:"text",showTooltip:!0},styleName:"left-column"},{name:"CustNm",fieldName:"CustNm",type:"data",width:"100",header:{text:"\uAC70\uB798\uCC98\uBA85",showTooltip:!0},renderer:{type:"text",showTooltip:!0},styleName:"left-column"},{name:"UseYn",fieldName:"UseYn",type:"data",width:"70",editable:!1,styleName:"center-column",header:{text:"\uC0AC\uC6A9\uC720\uBB34",showTooltip:!0},renderer:{type:"check",trueValues:"Y",falseValues:"N"}},{name:"SuperUser",fieldName:"SuperUser",type:"data",width:"70",editable:!1,styleName:"center-column",header:{text:"\uAD00\uB9AC\uC790\uC720\uBB34",showTooltip:!0},renderer:{type:"check",trueValues:"Y",falseValues:"N"}},{name:"OrderYn",fieldName:"OrderYn",type:"data",width:"80",editable:!1,styleName:"center-column",header:{text:"\uAD6C\uB9E4\uC5C5\uCCB4\uC5EC\uBD80",showTooltip:!0},renderer:{type:"check",trueValues:"Y",falseValues:"N"}},{name:"OutsourcingYn",fieldName:"OutsourcingYn",type:"data",width:"80",editable:!1,styleName:"center-column",header:{text:"\uC678\uC8FC\uC5C5\uCCB4\uC5EC\uBD80",showTooltip:!0},renderer:{type:"check",trueValues:"Y",falseValues:"N"}},{name:"AgencyYn",fieldName:"AgencyYn",type:"data",width:"80",editable:!1,styleName:"center-column",header:{text:"\uB300\uB9AC\uC810\uC5EC\uBD80",showTooltip:!0},renderer:{type:"check",trueValues:"Y",falseValues:"N"}}],se={DateTitleBox:{margin:"5px 10px 0px 10px",backgroundColor:"#e0ecff",padding:5,color:"#163971",height:25,fontSize:"12px",display:"flex",width:85,alignItems:"center",fontWeight:600},DateTitleBox3:{margin:"5px 10px 0px 10px",backgroundColor:"#e0ecff",padding:5,color:"#163971",height:25,fontSize:"12px",display:"flex",width:85,alignItems:"center",fontWeight:600},TitleBox4:{backgroundColor:"#fccf76",color:"#163971",padding:5,height:20,fontSize:"12px",display:"flex",alignItems:"center",width:"100%",fontWeight:600},TitleText3:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},InputBox3:{marginTop:0,width:120,height:25,"& input":{fontSize:"12px !important"}},Scroll:{"& .mainCon":{height:"700px",padding:"10px"}}};function ne(){const[s,o]=c.exports.useState({SchUserName:""}),[C,u]=c.exports.useState({DeptCd:"",DeptNm:"",CustCd:"",CustNm:""}),[p]=c.exports.useState({a:"required"}),[l,t]=c.exports.useState(""),[i,y]=c.exports.useState({visible:!1,desc:"",type:"N"}),[E,x]=c.exports.useState({visible:!1,desc:"",id:""}),[g,T]=c.exports.useState({visible:!1,description:"",value:"",datas:{},id:"",viewId:"",selectedData:{}});return String.prototype.DateValidation=function(A){return new Date(this)instanceof Date&&!isNaN(new Date(this))?z(this).format(A):null},{searchVO:s,setSearchVO:o,InputVO:C,setInputVO:u,gridFocus:l,setGridFocus:t,alert:i,setAlert:y,confirm:E,setConfirm:x,codeClassInputs:g,setCodeClassInputs:T,ValidationRules:p}}const re=async(s,o)=>{s({SchUserName:""},50),o({DeptCd:"",DeptNm:"",CustCd:"",CustNm:""},50)},I=async(s,o,C,u)=>{const p={...o};await s.Util.Command.fSearch(C,"/@api/admin/userManager/selectByList",p,u)},ue=async(s,o,C,u,p)=>{const l={...C};if(s.Util.Common.fEmptyReturn(C.EPassWord)!==""){const t=await V.get("/@api/auth/selectByEncProc",{params:{userid:C.Pno,password:C.EPassWord}});l.passWord=t.data}l.UseYn=C.UseYn?"Y":"N",l.SuperUser=C.SuperUser?"S":"",l.OrderYn=C.OrderYn?"Y":"N",l.OutsourcingYn=C.OutsourcingYn?"Y":"N",l.AgencyYn=C.AgencyYn?"Y":"N",l.Accunit=s.User.user.accunit,l.Factory=s.User.user.factory,l.iUserPno=s.User.user.userid;try{const i=(await V.post("/@api/admin/userManager/updateByList",{data:l})).data;if(i.errmess!==""){s.setAlert({visible:!0,desc:i.errmess,type:"E"});return}s.setAlert({visible:!0,desc:"\uBB38\uC11C \uC800\uC7A5\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."}),setTimeout(()=>{setTimeout(async()=>{await I(s,o,u,"\uC0AC\uC6A9\uC790");const y=u.searchData({fields:["Pno"],value:C.Pno,partialMatch:!1});y!=null&&p.setCurrent({dataRow:y.dataRow,column:0})},500)},700)}catch(t){s.setAlert({visible:!0,desc:`\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.${t}`})}},ie=async(s,o,C,u,p)=>{const l={...C};l.Accunit=s.User.user.accunit,l.Factory=s.User.user.factory,l.iUserPno=s.User.user.userid;try{const i=(await V.post("/@api/admin/userManager/deleteByList",{data:l})).data;return i.errmess!==""?(s.setAlert({visible:!0,desc:i.errmess,type:"E"}),i):(setTimeout(async()=>{await I(s,o,u,"\uC0AC\uC6A9\uC790"),p.setCurrent({dataRow:0,column:0})},700),i)}catch(t){s.setAlert({visible:!0,desc:`\uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.${t}`})}},fe=K(()=>{const s="USERMANAGER",{$CommonStore:o,$UserStore:C}=q(),u=le(),{searchVO:p,setSearchVO:l,InputVO:t,setInputVO:i,setGridFocus:y,alert:E,setAlert:x,confirm:g,setConfirm:T,ValidationRules:A}=ne(),a=new J(s,x,!0,!0,!0,!0,!0),G=c.exports.useRef(null),D=c.exports.useRef(""),L=c.exports.useRef(0),b=c.exports.useRef(null),w=async()=>{D.current="",o.fSetBinding(!0),await re(l,i),o.fSetBinding(!1),a.Common.fSetTabIndex()},[U]=c.exports.useState({Util:a,User:C,fInit:w,setAlert:x,setInputVO:i}),X=n=>{B=n},H=n=>{N=n},P=(n,h)=>{y("H");const m=B.getJsonRow(h);m.UseYn=m.UseYn!=="N",m.SuperUser=m.SuperUser!=="",m.OrderYn=m.OrderYn!=="N",m.OutsourcingYn=m.OutsourcingYn!=="N",m.AgencyYn=m.AgencyYn!=="N",D.current=m.Pno,o.fSetBinding(!0),i(m),o.fSetBinding(!1)},M=async()=>{T({visible:!1,desc:"",id:""}),g.id==="SAVE"?await ue(U,p,t,B,N):g.id==="DELETE"&&await ie(U,p,t,B,N)},$=()=>{T({visible:!1,desc:"",id:""})},v=(n,h,m)=>{if(!o.fGetBinding())switch(n){case"DeptNm":a.Common.fMultiFieldChange(i,{DeptCd:h,DeptNm:m});break;case"CustNm":a.Common.fMultiFieldChange(i,{CustCd:h,CustNm:m});break}},O=async()=>{w()},S=async()=>{await I(U,p,B,"\uC0AC\uC6A9\uC790")},k=async()=>{if(b.current=document.activeElement,a.Common.fEmptyReturn(t.EPassWord)!==""&&t.EPassWord.length<4){x({visible:!0,desc:"\uBE44\uBC00\uBC88\uD638\uB97C 4\uC790\uB9AC \uC774\uC0C1 \uC785\uB825\uD558\uC138\uC694.",type:"W"});return}T({visible:!0,desc:"\uC800\uC7A5 \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",id:"SAVE"})},R=async()=>{a.Common.fValidate(!t.Pno,"\uC0AC\uC6A9\uC790\uAC00 \uC120\uD0DD\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.")||T({visible:!0,desc:"\uC0AD\uC81C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",id:"DELETE"})};return c.exports.useEffect(()=>{a.Common.fHotKey(o,o.isPopup,O,S,k,R)},[o.HotKey]),c.exports.useEffect(()=>(w(),S(),()=>{o.fSetHotKey()}),[]),e.createElement(e.Fragment,null,e.createElement(_,{pgmid:s,visible:"111100",onNew:O,onSearch:S,onSave:k,onDelete:R}),e.createElement(F,{className:"mainCon"},e.createElement(f.exports.Layout,{style:{width:"100%",height:775}},e.createElement(f.exports.LayoutPanel,{region:"west",split:!0,style:{minWidth:900,maxWidth:1100,height:775}},e.createElement(F,{className:u.Scroll},e.createElement(r,{style:{marginTop:5}},e.createElement(r,{display:"flex",alignItems:"center"},e.createElement(r,{style:{display:"flex",alignItems:"center"}},e.createElement(r,{className:u.DateTitleBox,style:{marginTop:3,marginLeft:10}},"\uC0AC\uC6A9\uC790\uBA85"),e.createElement(Y,{inputCls:"inputCls",Util:a,name:"SchUserName",inputId:a.Common.fMakeId("SchUserName"),value:p.SchUserName,className:u.InputBox3,style:{width:200},maxLength:100,onChange:n=>{a.Common.fFieldChange(l,"SchUserName",n)}}))),e.createElement(r,{style:{marginTop:5}},e.createElement(ee,{Util:a,Id:"Grid1",GridTitle:"\uD5E4\uB354",Height:735,currentIndex:L,GridFields:te,GridColumns:ae,RowChanged:P,DataProviderBind:X,GridViewBind:H}))))),e.createElement(f.exports.LayoutPanel,{region:"center",split:!0,style:{minWidth:400,maxWidth:1400,height:774}},e.createElement(f.exports.Form,{ref:G,style:{maxWidth:"100%"},model:t,rules:A,labelWidth:120,labelAlign:"right"},e.createElement(r,{style:{width:"100%",height:40}},e.createElement(r,{display:"flex",style:{marginTop:5}},e.createElement(r,{className:u.DateTitleBox},"\uC0AC\uC6A9\uC790ID"),e.createElement(Y,{inputCls:"inputCls",Util:a,name:"Pno",inputId:a.Common.fMakeId("Pno"),value:t.Pno,className:u.InputBox3,style:{width:200,marginTop:5},maxLength:100,onChange:n=>{a.Common.fFieldChange(i,"Pno",n);const h=B.searchData({fields:["Pno"],value:n,partialMatch:!1});h!=null&&(N.getCurrent().itemIndex===h.dataRow?P(null,h.dataRow):N.setCurrent({dataRow:h.dataRow,column:0}))},disabled:D.current!==""})),e.createElement(r,{display:"flex",style:{marginTop:5}},e.createElement(r,{className:u.DateTitleBox},"\uC0AC\uC6A9\uC790\uBA85"),e.createElement(Y,{inputCls:"inputCls",Util:a,name:"UserName",inputId:a.Common.fMakeId("UserName"),value:t.UserName,className:u.InputBox3,style:{width:200,marginTop:5},maxLength:100,onChange:n=>{a.Common.fFieldChange(i,"UserName",n)}})),e.createElement(r,{display:"flex",style:{marginTop:5}},e.createElement(W,{inputCls:"inputCls",pgmid:s,inputType:"Dept",id:"DeptNm",title:"\uBD80\uC11C\uBA85",helper:a.Common.fCreateHelper("B002","001"),ComponentCode:t.DeptCd,ComponentValue:t.DeptNm,SetValue:v,labelStyles:{margin:"0px 0px 0px 10px",width:85},inputStyles:{margin:"0px 0px 0px 10px",width:200}})),e.createElement(r,{display:"flex",style:{marginTop:5}},e.createElement(W,{inputCls:"inputCls",pgmid:s,inputType:"Cust",id:"CustNm",title:"\uAC70\uB798\uCC98\uBA85",helper:a.CodeHelper.helperCust,ComponentCode:t.CustCd,ComponentValue:t.CustNm,SetValue:v,labelStyles:{margin:"0px 0px 0px 10px",width:85},inputStyles:{margin:"0px 0px 0px 10px",width:200}})),e.createElement(r,{display:"flex",style:{marginTop:5}},e.createElement(r,{className:u.DateTitleBox3},"\uC0AC\uC6A9\uC720\uBB34"),e.createElement(f.exports.CheckBox,{inputCls:"inputCls",inputId:a.Common.fMakeId("UseYn"),checked:t.UseYn,value:t.UseYn,style:{width:"20px",height:"20px",marginRight:3,marginTop:8},onChange:n=>a.Common.fFieldChange(i,"UseYn",n)})),e.createElement(r,{display:"flex",style:{marginTop:5}},e.createElement(r,{className:u.DateTitleBox3},"\uAD00\uB9AC\uC790\uC720\uBB34"),e.createElement(f.exports.CheckBox,{inputCls:"inputCls",inputId:a.Common.fMakeId("SuperUser"),checked:t.SuperUser,value:t.SuperUser,style:{width:"20px",height:"20px",marginRight:3,marginTop:8},onChange:n=>a.Common.fFieldChange(i,"SuperUser",n)})),e.createElement(r,{display:"flex",style:{marginTop:5}},e.createElement(r,{className:u.DateTitleBox3},"\uAD6C\uB9E4\uC5C5\uCCB4\uC5EC\uBD80"),e.createElement(f.exports.CheckBox,{inputCls:"inputCls",inputId:a.Common.fMakeId("OrderYn"),checked:t.OrderYn,value:t.OrderYn,style:{width:"20px",height:"20px",marginRight:3,marginTop:8},onChange:n=>a.Common.fFieldChange(i,"OrderYn",n)})),e.createElement(r,{display:"flex",style:{marginTop:5}},e.createElement(r,{className:u.DateTitleBox3},"\uC678\uC8FC\uC5C5\uCCB4\uC5EC\uBD80"),e.createElement(f.exports.CheckBox,{inputCls:"inputCls",inputId:a.Common.fMakeId("OutsourcingYn"),checked:t.OutsourcingYn,value:t.OutsourcingYn,style:{width:"20px",height:"20px",marginRight:3,marginTop:8},onChange:n=>a.Common.fFieldChange(i,"OutsourcingYn",n)})),e.createElement(r,{display:"flex",style:{marginTop:5}},e.createElement(r,{className:u.DateTitleBox3},"\uB300\uB9AC\uC810\uC5EC\uBD80"),e.createElement(f.exports.CheckBox,{inputCls:"inputCls",inputId:a.Common.fMakeId("AgencyYn"),checked:t.AgencyYn,value:t.AgencyYn,style:{width:"20px",height:"20px",marginRight:3,marginTop:8},onChange:n=>a.Common.fFieldChange(i,"AgencyYn",n)})),e.createElement(r,{display:"flex",style:{marginTop:5}},e.createElement(r,{className:u.DateTitleBox},"\uD328\uC2A4\uC6CC\uB4DC"),e.createElement(f.exports.PasswordBox,{placeholder:"\uBE44\uBC00\uBC88\uD638",value:t.EPassWord,onChange:n=>{a.Common.fFieldChange(i,"EPassWord",n)},className:u.InputBox3,style:{width:200,marginTop:5}}))))))),e.createElement(Q,{visible:E.visible,description:E.desc,type:E.type,onConfirm:()=>{x({visible:!1}),b.current.focus()}}),e.createElement(Z,{visible:g.visible,description:g.desc,onCancel:$,onConfirm:M}))});let B,N;const le=j(se);export{fe as default};
