import{r as u,R as t}from"./index.da6908f5.js";import{o as B,B as s,m as o,h as C,c as b,u as M,b as Y,U as G,P as v,r as U,A as k}from"./App.11263b70.js";import{C as P}from"./CommonButton.0b792d77.js";import{C as N}from"./CommonDatePicker.d7bc57f8.js";import{C as R}from"./CodeHelperPopup.3932fdb9.js";import{C as H}from"./CommonRadioRow.a6c5a505.js";import{S as L}from"./InventoryBookStyle.d8b17442.js";import"./index.6f186c21.js";function X(){const[e,i]=u.exports.useState({}),[m,n]=u.exports.useState({});return{searchVO:e,setSearchVO:i,alert:m,setAlert:n}}const O=B(e=>{const i=u.exports.useRef(null),m=async()=>{e.Util.Grid.fContainerInit(e.Util.Common.fMakeId(e.id)),x=new o.exports.LocalDataProvider(!1),p=new o.exports.GridView(i.current),e.Util.Grid.fInitGridHeader(p,x,e.GridFields,e.GridColumns,25,n,r,d,""),p.setFooters({visible:!0}),e.DataProviderBind(x),e.GridViewBind(p)},n=()=>{},r=()=>{},d=(c,f)=>{switch(f.key){case"Tab":f.preventDefault(),document.getElementById(e.Util.Common.fMakeId("FrDate")).focus()}};return u.exports.useEffect(()=>{m()},[]),t.createElement(s,{ref:i,key:e.Util.Common.fMakeId(e.id),id:e.Util.Common.fMakeId(e.id),style:{width:"100%",height:e.Height}})});let x,p;const K=e=>{e({Accunit:"",Factory:"",FrDate:C().clone().startOf("month").toDate(),ToDate:new Date,CustCd:"",CustNm:"",ExportYn:"0"})},$=async(e,i,m,n)=>{if(e.Util.Common.fValidate(!C(i.FrDate,"YYYY-MM-DD").isValid()||!C(i.FrDate,"YYYY-MM-DD").isValid(),"\uC870\uD68C\uAE30\uAC04\uC744 \uBC14\uB974\uAC8C \uC785\uB825\uD574 \uC8FC\uC138\uC694.")||e.Util.Common.fValidate(C(i.FrDate).format("YYYYMMDD")>C(i.FrDate).format("YYYYMMDD"),"\uC870\uD68C\uAE30\uAC04\uC744 \uD655\uC778\uD574 \uC8FC\uC138\uC694."))return;const r={...i};r.FrDate=C(r.FrDate).format("YYYYMMDD"),r.ToDate=C(r.ToDate).format("YYYYMMDD"),r.Accunit=e.User.user.accunit,r.Factory=e.User.user.factory,await e.Util.Command.fSearch(m,"/@api/purchase/delvSearchDetail/selectByList",r,n)},z=[{fieldName:"Gubun",dataType:o.exports.ValueType.TEXT},{fieldName:"CustNm",dataType:o.exports.ValueType.TEXT},{fieldName:"Prodymd",dataType:o.exports.ValueType.TEXT},{fieldName:"GoodNo",dataType:o.exports.ValueType.TEXT},{fieldName:"GoodNm",dataType:o.exports.ValueType.TEXT},{fieldName:"Spec",dataType:o.exports.ValueType.TEXT},{fieldName:"Class2nm",dataType:o.exports.ValueType.TEXT},{fieldName:"Class3nm",dataType:o.exports.ValueType.TEXT},{fieldName:"Class4nm",dataType:o.exports.ValueType.TEXT},{fieldName:"Class5nm",dataType:o.exports.ValueType.TEXT},{fieldName:"Qty",dataType:o.exports.ValueType.NUMBER},{fieldName:"Price",dataType:o.exports.ValueType.NUMBER},{fieldName:"Amount",dataType:o.exports.ValueType.NUMBER}],Q=[{fieldName:"Gubun",type:"data",width:80,header:{text:"\uAD6C\uBD84"},styleName:"center-column"},{fieldName:"CustNm",type:"data",width:180,header:{text:"\uAC70\uB798\uCC98\uBA85"},styleName:"left-column"},{fieldName:"Prodymd",type:"data",width:100,header:{text:"\uAC70\uB798\uC77C\uC790"},styleName:"center-column"},{fieldName:"GoodNo",type:"data",width:180,header:{text:"\uD488\uBC88"},styleName:"left-column"},{fieldName:"GoodNm",type:"data",width:180,header:{text:"\uD488\uBA85"},styleName:"left-column"},{fieldName:"Spec",type:"data",width:150,header:{text:"\uADDC\uACA9"},styleName:"left-column"},{fieldName:"Class2nm",type:"data",width:100,header:{text:"\uB300\uBD84\uB958"},styleName:"left-column"},{fieldName:"Class3nm",type:"data",width:100,header:{text:"\uC911\uBD84\uB958"},styleName:"left-column"},{fieldName:"Class4nm",type:"data",width:100,header:{text:"\uC18C\uBD84\uB958"},styleName:"left-column"},{fieldName:"Class5nm",type:"data",width:100,header:{text:"\uAC15\uC885"},styleName:"left-column"},{fieldName:"Qty",type:"data",width:60,numberFormat:"#,##0.##",styleName:"right-column",header:{text:"\uC218\uB7C9"},footer:{numberFormat:"#,##0.##",expression:"sum"}},{fieldName:"Price",type:"data",width:80,numberFormat:"#,##0.##",header:{text:"\uB2E8\uAC00"},styleName:"right-column"},{fieldName:"Amount",type:"data",width:80,numberFormat:"#,##0",styleName:"right-column",header:{text:"\uACF5\uAE09\uAC00\uC561"},footer:{numberFormat:"#,##0.##",expression:"sum"}}],le=B(()=>{const e="DELVSEARCHDETAIL",{$CommonStore:i,$UserStore:m}=M(),n=W(),r=Y(),{searchVO:d,setSearchVO:c,alert:f,setAlert:D}=X(),a=new G(e,D,!0,!0,!0,!0,!0),w=u.exports.useRef(0),S=l=>{E=l},g=l=>{y=l},T=()=>{a.Common.fSetTabIndex(),K(c),document.getElementById(a.Common.fMakeId("FrDate")).focus()},[A]=u.exports.useState({Util:a,User:m,fInit:T,setAlert:D}),h=async()=>{y.commit(),await $(A,d,E,"\uAC70\uB798\uCC98\uBCC4 \uB9E4\uC785\uD604\uD669"),y.setFocus()},F=(l,I,V)=>{switch(l){case"CustCdNm":a.Common.fMultiFieldChange(c,{CustCd:I,CustNm:V});return}};return window.onkeydown=function(l){r.pathname==="/delvsearchdetail"&&l.key==="F9"&&(l.preventDefault(),h())},u.exports.useEffect(()=>{a.Common.fHotKey(i,i.isPopup,h)},[i.fHotKey]),u.exports.useEffect(()=>{T()},[]),t.createElement(t.Fragment,null,t.createElement(P,{pgmid:e,visible:"010000",onSearch:h}),t.createElement(v,{className:"mainCon"},t.createElement(s,{display:"flex",flexDirection:"column",alignItems:"flex-start",style:{padding:1,border:"1px solid #e2e2e2",borderRadius:5,marginBottom:5}},t.createElement(s,{style:{display:"flex",alignItems:"center"}},t.createElement(s,{className:n.SC4},t.createElement(s,{className:n.SC1},"\uAE30\uAC04"),t.createElement(s,{onKeyDown:l=>{l.shiftKey&&l.keyCode===9&&(l.preventDefault(),y.setFocus())}},t.createElement(N,{inputCls:"inputCls",selected:d.FrDate,inputId:a.Common.fMakeId("FrDate"),onHandleDateChange:l=>a.Common.fFieldChange(c,"FrDate",l),style:{width:110}})),t.createElement(s,{style:{margin:"0 5px",fontWeight:500,fontSize:20}},"~"),t.createElement(N,{inputCls:"inputCls",selected:d.ToDate,inputId:a.Common.fMakeId("ToDate"),onHandleDateChange:l=>a.Common.fFieldChange(c,"ToDate",l),style:{width:110}}))),t.createElement(s,{style:{display:"flex",alignItems:"center"}},t.createElement(s,{className:n.SC4},t.createElement(s,{className:n.SC1},"\uACF5\uC7A5\uBA85"),t.createElement(U.exports.TextBox,{inputId:a.Common.fMakeId("Factorynm"),inputCls:"inputCls",name:"Factorynm",value:m.user.factorynm,editable:!1,className:n.SC3})),t.createElement(R,{title:"\uAC70\uB798\uCC98\uBA85",inputCls:"inputCls",pgmid:e,inputType:"Cust",id:"CustCdNm",helper:a.CodeHelper.helperCust,ComponentCode:d.CustCd,ComponentValue:d.CustCdNm,SetValue:F,labelStyles:{width:60,height:25,margin:"1px 10px 4px 20px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},inputStyles:{width:185,margin:"1px 0px 4px 0px"}}),t.createElement(H,{Util:a,inputCls:"inputCls",optionsLabel:["\uC804\uCCB4","\uB0B4\uC218","\uC218\uC785"],VO:d,TitleLabelStyle:{width:70},radioRowStyle:{width:280},coupleDotLabelStyle:{marginLeft:10},componentStyle:{marginTop:0},VOKey:"ExportYn",id:a.Common.fMakeId("categoryRadioRow"),setVO:c,OnTabElementId:a.Common.fMakeId("FrDate"),OnShiftTabElementId:a.Common.fMakeId("CustCdNm"),labelTitle:"\uC870\uD68C\uC870\uAC74",defaultValue:0}))),t.createElement(O,{Util:a,id:"Grid1delvsearchdetail",Height:695,currentIndex:w,GridFields:z,GridColumns:Q,DataProviderBind:S,GridViewBind:g})),t.createElement(k,{visible:f.visible,description:f.desc,type:f.type,onConfirm:()=>D({visible:!1})}))});let E,y;const W=b(L);export{le as default};
