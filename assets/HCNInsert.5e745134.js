import{r as T,R as e}from"./index.da6908f5.js";import{L as Le,c as He,u as Ge,r as k,B as s,P as ke,N as Ye,m as g,q as Pe,o as De,U as ve,F as Se,A as Ue,d as se,h as ae,C as ze}from"./App.11263b70.js";import{C as qe}from"./CommonButton.0b792d77.js";import{H as Xe}from"./HeaderList.b90f1652.js";import{A as Ke}from"./Attachments.19d97d2b.js";import{C as be}from"./CommonDatePicker.d7bc57f8.js";import{C as Ce}from"./CodeHelperPopup.3932fdb9.js";import"./index.6f186c21.js";const We=({MaterialStandardnm:t,visible:u,description:N,value:l,datas:o,confirmText:B="\uD655\uC778",cancelText:r="\uCDE8\uC18C",onConfirm:d,onCancel:L,setVisibleData:S=null,setVisibleCancel:n=null,width:c=470})=>{const{$CommonStore:m}=Ge(),C=$e(),y=T.exports.useRef(null),E=T.exports.useRef(null),R=T.exports.useRef(""),[K,i]=T.exports.useState(""),[te,X]=T.exports.useState(""),p=()=>{let A=[],F=[];i(l),R.current=l,o[0].map(x=>{A.push({fieldName:x.FdEName.toLowerCase(),dataType:"text"}),x.Size&&x.Size>0&&F.push({name:x.FdEName.toLowerCase(),fieldName:x.FdEName.toLowerCase(),width:Number(x.Size),styleName:x.Align==="2"?"center-column":x.Align==="3"?"right-column":"left-column",header:{text:x.FdKName},editable:!1})});const q=["fieldName"],V=A.filter((x=>U=>(v=>!x.has(v)&&x.add(v))(q.map(v=>U[v]).join("|")))(new Set));oe=new g.exports.LocalDataProvider(!1),w=new g.exports.GridView(y.current),w.setDataSource(oe),oe.setFields(V),w.setColumns(F),F.map(x=>{w.setColumnProperty(x.name,"autoFilter",!0)}),o[1]=o[1].filter(x=>x.item4==t),oe.setRows(o[1]),Ie=o[1],w.setStateBar({visible:!1}),w.setEditOptions({insertable:!1,editable:!1}),w.setRowIndicator({visible:!1}),w.setCheckBar({visible:!1}),w.setFooters({visible:!1}),w.displayOptions.selectionStyle="singleRow",w.displayOptions.fitStyle="evenFill",w.displayOptions.columnMovable=!1,w.setOptions({summaryMode:"aggregate",panel:{visible:!1}}),w.setGroupingOptions({enabled:!1}),w.setDisplayOptions({heightMeasurer:"fixed",rowResizable:!0,rowHeight:35}),w.setSortingOptions({enabled:!1}),w.onCellDblClicked=function(x,U){if(U.itemIndex>=0){let v={};A.map(M=>{v={...v,[M.fieldName]:x.getDataSource().getValue(U.dataRow,M.fieldName)}}),m.fSetCodeclass({selData:v}),J()}},w.onCellClicked=function(x,U){if(U.itemIndex>=0){let v={};A.map(M=>{v={...v,[M.fieldName]:x.getDataSource().getValue(U.dataRow,M.fieldName)}}),m.fSetCodeclass({selData:v})}},w.onKeyDown=function(x,U){let v=U.key,M=x.getCurrent().itemIndex;switch(v){case"F9":I(R.current);break;case"Enter":{if(M>=0){let re={};A.map(W=>{re={...re,[W.fieldName]:x.getDataSource().getValue(M,W.fieldName)}}),m.fSetCodeclass({selData:re})}J()}break;case"Escape":P();break;case"Tab":m.fGetShift()&&setTimeout(async()=>{E.current.focus()},0);break;case"q":case"Process":i(""),X(""),R.current="";break}}},_=A=>{X(A),R.current=A,oe.clearRows();const F=R.current.split(",");let q="",V="",x="";const U=o[0][0].FdEName.toLowerCase(),v=o[0][1].FdEName.toLowerCase();o[0].length>2&&(q=o[0][2].FdEName.toLowerCase()),o[0].length>3&&(V=o[0][3].FdEName.toLowerCase()),o[0].length>4&&(x=o[0][4].FdEName.toLowerCase()),F.length>1?oe.setRows(Ie.filter(M=>(String(M[U]).toUpperCase().includes(F[0].toUpperCase())||String(M[v]).toUpperCase().includes(F[0].toUpperCase())||String(M[q]).toUpperCase().includes(F[0].toUpperCase())||String(M[V]).toUpperCase().includes(F[0].toUpperCase())||String(M[x]).toUpperCase().includes(F[0].toUpperCase()))&&(String(M[U]).toUpperCase().includes(F[1].toUpperCase())||String(M[v]).toUpperCase().includes(F[1].toUpperCase())||String(M[q]).toUpperCase().includes(F[1].toUpperCase())||String(M[V]).toUpperCase().includes(F[1].toUpperCase())||String(M[x]).toUpperCase().includes(F[1].toUpperCase())))):oe.setRows(Ie.filter(M=>String(M[U]).toUpperCase().includes(R.current.toUpperCase())||String(M[v]).toUpperCase().includes(R.current.toUpperCase())||String(M[q]).toUpperCase().includes(R.current.toUpperCase())||String(M[V]).toUpperCase().includes(R.current.toUpperCase())||String(M[x]).toUpperCase().includes(R.current.toUpperCase())))},ne=A=>{A.key==="Enter"?(I(A.target.value),w.setFocus()):A.key==="Escape"?P():A.key==="Tab"&&setTimeout(async()=>{w.setFocus()},0)},I=A=>{let F=oe.getOrgFieldNames(),q=F.indexOf(w.getCurrent().fieldName)+1,V={fields:F,value:A,startIndex:w.getCurrent().itemIndex,startFieldIndex:q,wrap:!0,caseSensitive:!1,partialMatch:!0},x=w.searchCell(V);if(document.getElementById("btnSearch")&&document.getElementById("btnSearch").blur(),w.setCurrent(x),w.setFocus(),x){let U=w.getValues(x.itemIndex);m.fSetCodeclass({selData:U})}},H=A=>{let F=oe.getOrgFieldNames(),q=F.indexOf(w.getCurrent().fieldName)+1,V={fields:F,value:A,startIndex:w.getCurrent().itemIndex,startFieldIndex:q,wrap:!0,caseSensitive:!1,partialMatch:!0},x=w.searchCell(V);if(document.getElementById("btnSearch")&&document.getElementById("btnSearch").blur(),w.setCurrent(x),w.setFocus(),x){let U=w.getValues(x.itemIndex);m.fSetCodeclass({selData:U})}},J=()=>{S&&S(),d&&d()},P=()=>{n&&n(),L()};T.exports.useEffect(()=>{K?(X(K),setTimeout(()=>{H(K)},150)):X("")},[K]),T.exports.useEffect(()=>{u?(p(),setTimeout(()=>{E.current.focus()},200)):(i(""),X(""),m.fSetCodeclass({selData:""})),m.fSetCodeclassPopup(u)},[u]);const z=()=>e.createElement(s,{key:Oe,style:{display:"flex",alignItems:"center"}},e.createElement("img",{src:Pe,alt:"logo",style:{marginLeft:5,width:49,height:14}}),e.createElement("pre",{disabled:!0,style:{margin:"3px 10px",fontWeight:"bold",color:"#898989"}},N));return u?e.createElement(k.exports.Dialog,{header:z,style:{width:N==="PMS \uC5F0\uACB0 \uCF54\uB4DC \uB4F1\uB85D."?1430:c},bodyCls:"f-column",closable:!1,modal:!0},e.createElement(s,{className:"f-full"},e.createElement(ke,{style:{minHeight:200,maxHeight:500}},e.createElement(s,{style:{display:"flex",alignItems:"center",marginTop:8}},e.createElement(s,{className:C.TitleBox},e.createElement("span",{className:C.TitleText},"\uAC80\uC0C9\uB0B4\uC6A9")),e.createElement(s,{onKeyDown:A=>{ne(A)}},e.createElement(k.exports.TextBox,{ref:E,className:C.InputBox,onChange:_,value:te,name:"iClass4",addonRight:()=>e.createElement(s,{className:"textbox-icon icon-clear",title:"Clear value",onClick:()=>{i(""),X(""),R.current="",E.current=""}})})),e.createElement(s,{id:"btnSearch"},e.createElement(k.exports.LinkButton,{style:{marginLeft:"15px",height:"25px",paddingRight:"4px"},onClick:()=>{I(te),R.current=""}},e.createElement(s,{style:{height:34,display:"flex",alignItems:"center",justifyContent:"center"}},e.createElement(Ye,{size:12}),e.createElement(s,{style:{marginLeft:5,fontSize:12,fontWeight:600}},"\uAC80\uC0C9"))))),e.createElement(s,{ref:y,style:{width:"100%",height:"300px",padding:10}}))),e.createElement(s,{className:"dialog-button"},e.createElement(k.exports.LinkButton,{style:{width:80},className:"c6",onClick:J},B),e.createElement(k.exports.LinkButton,{style:{width:80},onClick:P},r))):null},Oe=Le.generate();let w,oe,Ie;const $e=He({S1:{"& .panel-header":{borderRightWidth:0,height:35}},S2:{"& .panel-body":{borderRightWidth:0}},dialogTitle:{background:"#F4F4F4",borderColor:"#dddddd #95B8E7 #95B8E7 #95B8E7",borderWidth:"1px 0 0 0",textAlign:"left",padding:"5px"},TitleBox:{margin:"3px 10px",marginRight:"20px",backgroundColor:"#e0ecff",color:"#163971",padding:5,height:25,fontSize:"12px",display:"flex",alignItems:"center",width:110,fontWeight:600},TitleText:{width:100},InputBox:{width:185,height:25,"& input":{fontSize:"12px !important"}},RB1:{width:"15px!important",height:"15px!important"},DateFont:{"& .textbox-text":{fontSize:"12px"},"& .textbox":{fontSize:"12px"}}}),je=De(({MaterialStandardnm:t,inputCls:u,pgmid:N,inputType:l,id:o,title:B,helper:r,onConfirm:d,ComponentCode:L,ComponentValue:S,SetValue:n,boxStyles:c,labelStyles:m,inputStyles:C,disabled:y,editable:E,onTabEvent:R,inputRequired:K=!1,InitValue:i=void 0})=>{const[te,X]=T.exports.useState({visible:!1,desc:"",type:"N"}),p=new ve(N,X,!0,!0,!0,!0,!0),_=Je(),ne=T.exports.useRef(""),I=T.exports.useRef(""),H=T.exports.useRef(""),J=T.exports.useRef(470),{$CommonStore:P}=Ge(),[z,A]=T.exports.useState({}),[F,q]=T.exports.useState({Data:""}),[V,x]=T.exports.useState({visible:!1,description:"",value:"",codeValue:"",datas:{},id:"",viewId:"",selectedData:{}}),U=()=>{ge(P.Codeclass.selData),setTimeout(()=>{p.Common.fMakeFocus(o)},10),p.Common.fFieldChange(x,"visible",!1),P.fSetCodeclassPopup(!1)},v=()=>{document.getElementById(V.id).focus(),p.Common.fFieldChange(x,"visible",!1),P.fSetCodeclassPopup(!1)},M=()=>{const f=document.getElementsByClassName("inputCls"),G=Object.values(f).filter(Q=>Q.id.includes(N)),h=Number(document.getElementById(p.Common.fMakeId(o)).getAttribute("tabindex"))+1;for(let Q=G.length;Q--;){const ue=Number(G[Q].getAttribute("tabindex"));h===ue&&setTimeout(()=>{G[Q].focus()})}},re=f=>{if(f!=="")return f.forEach(G=>{for(const[h,Q]of Object.entries(G))typeof G[h]=="string"&&(G[h]=Q.trim())}),f},W=async(f,G,h="",Q=null,ue=!0,he=!1)=>{var me;let fe={...r};G==="Cust"?me="selectByCustClass":(me="selectByTSqlItem",fe.iCustNm=h);try{let Z=await se.get(`/@api/common/codeclass/${me}`,{params:fe}),Me=re(Z.data[1]),a={};Me.some((D,Y,O)=>{G==="Cust"?(p.Common.fTrim(D.custnm)===(h.length>0&&h)||D.custcd===(h.length>0&&h))&&(a={...a,...O[Y]}):G==="Pno"?(p.Common.fTrim(D.name)===(h.length>0&&h)||D.pno===(h.length>0&&h))&&(a={...a,...O[Y]}):G==="Dept"?(p.Common.fTrim(D.deptnm)===(h.length>0&&h)||D.deptcd===(h.length>0&&h))&&(a={...a,...O[Y]}):G==="Act"?(p.Common.fTrim(D.actnm3)===(h.length>0&&h)||D.actcod===(h.length>0&&h))&&(a={...a,...O[Y]}):G==="Whs"?(p.Common.fTrim(D.wrhnm)===(h.length>0&&h)||D.wrhcd===(h.length>0&&h))&&(a={...a,...O[Y]}):G==="Good"?(p.Common.fTrim(D.goodno)===(h.length>0&&h)||D.goodcd===(h.length>0&&h))&&(a={...a,...O[Y]}):G==="Type"?(p.Common.fTrim(D.codenm)===(h.length>0&&h)||D.codeid===(h.length>0&&h))&&(a={...a,...O[Y]}):G==="Jukyo"?(p.Common.fTrim(D.jukyonm)===(h.length>0&&h)||D.jukyocd===(h.length>0&&h))&&(a={...a,...O[Y]}):(p.Common.fTrim(D.minornm)===(h.length>0&&h)||D.minorcd===(h.length>0&&h))&&(a={...a,...O[Y]})});let b=0;Z.data[0].map(D=>{b+=Number(D.Size)}),J.current=b<470?470:b+80,he?(x({visible:!0,datas:Z.data,desc:Z.data[2][0].Remark,value:h,codeValue:Q===""?null:Q,id:p.Common.fMakeId(o),viewId:f,selectedData:P.Codeclass.selData}),P.fSetCodeclassPopup(!0)):Object.keys(a).length<1&&ue?(x({visible:!0,datas:Z.data,desc:Z.data[2][0].Remark,value:h,codeValue:null,id:p.Common.fMakeId(o),viewId:f,selectedData:P.Codeclass.selData}),P.fSetCodeclassPopup(!0)):Object.keys(a).length>0&&(R?R():M(),ge(a))}catch(Z){if(Z.response&&Z.response.status===404){X({visible:!0,desc:"\uC870\uD68C\uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."});return}else{X({visible:!0,desc:"\uC870\uD68C\uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4."+Z});return}}},ge=f=>{switch(p.Common.fMultiFieldChange(q,{Data:f}),l){case"Dept":I.current=p.Common.fTrim(f.deptcd),H.current=p.Common.fTrim(f.deptnm);break;case"Pno":I.current=p.Common.fTrim(f.pno),H.current=p.Common.fTrim(f.name);break;case"Cust":I.current=p.Common.fTrim(f.custcd),H.current=p.Common.fTrim(f.custnm);break;case"Act":I.current=p.Common.fTrim(f.actcod),H.current=p.Common.fTrim(f.actnm3);break;case"Whs":I.current=p.Common.fTrim(f.wrhcd),H.current=p.Common.fTrim(f.wrhnm);break;case"Good":I.current=p.Common.fTrim(f.goodcd),H.current=p.Common.fTrim(f.goodno);break;case"Type":I.current=p.Common.fTrim(f.codeid),H.current=p.Common.fTrim(f.codenm);break;case"Jukyo":I.current=p.Common.fTrim(f.jukyocd),H.current=p.Common.fTrim(f.jukyonm);break;default:I.current=p.Common.fTrim(f.minorcd),H.current=p.Common.fTrim(f.minornm);break}A({...z})},Ne=f=>{ne.current=f},Be=(f,G)=>{f.key==="Enter"?f.target.value||K?(p.Common.fMultiFieldChange(q,{Data:""}),I.current="",H.current="",W(G,l,f.target.value,I.current,!0)):M():!P.isShift&&f.key==="Tab"&&(f.target.value||K?W(G,l,f.target.value,I.current,!0):R?R():M()),f.ctrlKey&&f.which===32&&W(G,l,f.target.value,I.current,!0,!0)},we=f=>{(f.key==="Backspace"||f.key==="Delete")&&(P.fSetCodeclass({selData:{},inputId:p.Common.fMakeId(o),inputName:o,inputType:"DEL",isHelper:r}),p.Common.fMultiFieldChange(q,{Data:""}),I.current="",H.current="")};return T.exports.useEffect(()=>{n(o,p.Common.fTrim(I.current),p.Common.fTrim(H.current),F)},[I.current]),T.exports.useEffect(()=>{p.Common.fEmptyReturn(S)===""?(p.Common.fMultiFieldChange(q,{Data:""}),I.current="",H.current=""):(I.current=L,H.current=S,A({...z}))},[S]),T.exports.useEffect(()=>{i!==void 0&&(I.current=i.CompValue,H.current=i.CompName)},[]),e.createElement(e.Fragment,null,e.createElement(We,{MaterialStandardnm:t,visible:V.visible,description:V.desc,value:V.value,codeValue:V.codeValue,datas:V.datas,id:V.id,viewId:V.viewId,selectedData:V.selectedData,width:J.current,onConfirm:d,onCancel:()=>p.Common.fCancel(o),setVisibleData:U,setVisibleCancel:v}),e.createElement(s,{className:_.BoxAlignStyle,style:c},e.createElement(s,{className:_.TitleBox,style:m},e.createElement("span",{className:_.TitleText},B),K&&e.createElement(s,{className:_.TitleBoxR},e.createElement(Se,{size:10}))),r&&e.createElement(s,{onKeyDown:f=>{Be(f,o)},onKeyUp:f=>{we(f)}},e.createElement(k.exports.TextBox,{key:p.Common.fMakeId(o),inputCls:u,inputId:p.Common.fMakeId(o),placeholder:"",className:_.InputBox,onChange:f=>Ne(f),value:H.current,style:C,name:o,disabled:y,editable:E,addonRight:()=>e.createElement(s,{className:"textbox-icon icon-search",title:"Codeclass",onClick:()=>{y||W(p.Common.fMakeId(o),l,ne.current===null?"":ne.current,I.current,!0,!0)}})}))),e.createElement(Ue,{visible:te.visible,description:te.desc,type:te.type,onConfirm:()=>X({visible:!1})}))}),_e={TitleBox:{margin:"3px 15px",backgroundColor:"#e0ecff",color:"#163971",padding:5,height:25,fontSize:"12px",alignItems:"center",width:110,fontWeight:600,display:"inline-block",position:"relative"},TitleBoxR:{position:"absolute",right:5,top:4,color:"#ffa8a8"},TitleText:{width:100},SB5:{width:77,height:25,"& input":{fontSize:"12px !important",textAlign:"center",color:"#424242"}},InputBox:{width:185,height:25,"& input":{fontSize:"12px !important"},"& textarea":{fontSize:"12px !important",fontFamily:"Noto Sans KR"}},RadioLabel:{display:"flex",alignItems:"center",height:20,width:50,fontSize:12,margin:"0px 1px"},BoxAlignStyle:{marginTop:3,display:"flex",alignItems:"end"}},Je=He(_e),Qe=[{fieldName:"HCN",dataType:g.exports.ValueType.TEXT},{fieldName:"ForgingYn",dataType:g.exports.ValueType.TEXT},{fieldName:"Nace",dataType:g.exports.ValueType.TEXT},{fieldName:"Dual",dataType:g.exports.ValueType.TEXT},{fieldName:"Materialcd",dataType:g.exports.ValueType.TEXT},{fieldName:"Materialno",dataType:g.exports.ValueType.TEXT},{fieldName:"Materialnm2",dataType:g.exports.ValueType.TEXT},{fieldName:"MaterialSpec",dataType:g.exports.ValueType.TEXT},{fieldName:"Material",dataType:g.exports.ValueType.TEXT},{fieldName:"Materialnm",dataType:g.exports.ValueType.TEXT},{fieldName:"Heatno",dataType:g.exports.ValueType.TEXT},{fieldName:"MaterialStandard",dataType:g.exports.ValueType.TEXT},{fieldName:"MaterialStandardnm",dataType:g.exports.ValueType.TEXT},{fieldName:"DesignGrade",dataType:g.exports.ValueType.TEXT},{fieldName:"DesignGradenm",dataType:g.exports.ValueType.TEXT},{fieldName:"Conditions",dataType:g.exports.ValueType.TEXT},{fieldName:"Conditionsnm",dataType:g.exports.ValueType.TEXT},{fieldName:"Ymd",dataType:g.exports.ValueType.DATE,datetimeFormat:"yyyyMMdd"},{fieldName:"MillMaker",dataType:g.exports.ValueType.TEXT},{fieldName:"MillMakernm",dataType:g.exports.ValueType.TEXT},{fieldName:"Subcontractor",dataType:g.exports.ValueType.TEXT},{fieldName:"Subcontractornm",dataType:g.exports.ValueType.TEXT},{fieldName:"HeatTreatment",dataType:g.exports.ValueType.TEXT},{fieldName:"Remark",dataType:g.exports.ValueType.TEXT}],Ze=[{name:"HCN",fieldName:"HCN",type:"data",width:"100",header:{text:"HCN",showTooltip:!0},renderer:{type:"text",showTooltip:!0},styleName:"center-column"},{name:"Materialno",fieldName:"Materialno",type:"data",width:"120",header:{text:"\uC790\uC7AC\uCF54\uB4DC",showTooltip:!0},renderer:{type:"text",showTooltip:!0},styleName:"left-column"},{name:"Heatno",fieldName:"Heatno",type:"data",width:"100",header:{text:"HEATNO",showTooltip:!0},renderer:{type:"text",showTooltip:!0},styleName:"center-column"},{name:"Subcontractornm",fieldName:"Subcontractornm",type:"data",width:"100",header:{text:"\uACF5\uAE09\uC790",showTooltip:!0},renderer:{type:"text",showTooltip:!0},styleName:"left-column"}],et=[{fieldName:"HCN",dataType:g.exports.ValueType.TEXT},{fieldName:"Materialcd",dataType:g.exports.ValueType.TEXT},{fieldName:"Heatno",dataType:g.exports.ValueType.TEXT},{fieldName:"ReferenceSeq",dataType:g.exports.ValueType.TEXT},{fieldName:"ReferenceNo",dataType:g.exports.ValueType.TEXT},{fieldName:"ReferenceCode",dataType:g.exports.ValueType.TEXT},{fieldName:"ReferenceCodenm",dataType:g.exports.ValueType.TEXT},{fieldName:"MinReference",dataType:g.exports.ValueType.NUMBER},{fieldName:"MaxReference",dataType:g.exports.ValueType.NUMBER},{fieldName:"ChemicalValue",dataType:g.exports.ValueType.NUMBER}],tt=[{name:"ReferenceNo",fieldName:"ReferenceNo",width:50,styleName:"center-column",editable:!1,header:{text:"No",showTooltip:!0},renderer:{type:"text",showTooltip:!0}},{name:"ReferenceCodenm",fieldName:"ReferenceCodenm",type:"data",width:100,styleName:"left-column",editable:!1,header:{text:"\uD654\uD559\uC131\uBD84",showTooltip:!0}},{name:"MinReference",fieldName:"MinReference",width:80,styleName:"right-column",editable:!1,header:{text:"MIN",showTooltip:!0},renderer:{type:"text",showTooltip:!0},editor:{type:"number",editFormat:"#,##0.###"},numberFormat:"#,##0.###"},{name:"MaxReference",fieldName:"MaxReference",width:80,styleName:"right-column",editable:!1,header:{text:"MAX",showTooltip:!0},renderer:{type:"text",showTooltip:!0},editor:{type:"number",editFormat:"#,##0.###"},numberFormat:"#,##0.###"},{name:"ChemicalValue",fieldName:"ChemicalValue",width:80,styleName:"right-column",header:{text:"VALUE",showTooltip:!0},renderer:{type:"text",showTooltip:!0},editor:{type:"number",editFormat:"#,##0.####"},numberFormat:"#,##0.####"}],at=[{fieldName:"HCN",dataType:g.exports.ValueType.TEXT},{fieldName:"Materialcd",dataType:g.exports.ValueType.TEXT},{fieldName:"Heatno",dataType:g.exports.ValueType.TEXT},{fieldName:"ReferenceSeq",dataType:g.exports.ValueType.TEXT},{fieldName:"ReferenceNo",dataType:g.exports.ValueType.TEXT},{fieldName:"ReferenceCode",dataType:g.exports.ValueType.TEXT},{fieldName:"ReferenceCodenm",dataType:g.exports.ValueType.TEXT},{fieldName:"MinReference",dataType:g.exports.ValueType.NUMBER},{fieldName:"MaxReference",dataType:g.exports.ValueType.NUMBER},{fieldName:"PropertyValue",dataType:g.exports.ValueType.NUMBER}],nt=[{name:"ReferenceNo",fieldName:"ReferenceNo",width:50,styleName:"center-column",editable:!1,header:{text:"No",showTooltip:!0},renderer:{type:"text",showTooltip:!0}},{name:"ReferenceCodenm",fieldName:"ReferenceCodenm",type:"data",width:100,styleName:"left-column",editable:!1,header:{text:"\uBB3C\uC131\uCE58",showTooltip:!0}},{name:"MinReference",fieldName:"MinReference",width:80,styleName:"right-column",editable:!1,header:{text:"MIN",showTooltip:!0},renderer:{type:"text",showTooltip:!0},editor:{type:"number",editFormat:"#,##0.##"},numberFormat:"#,##0.##"},{name:"MaxReference",fieldName:"MaxReference",width:80,styleName:"right-column",editable:!1,header:{text:"MAX",showTooltip:!0},renderer:{type:"text",showTooltip:!0},editor:{type:"number",editFormat:"#,##0.##"},numberFormat:"#,##0.##"},{name:"PropertyValue",fieldName:"PropertyValue",width:80,header:{text:"VALUE",showTooltip:!0},renderer:{type:"text",showTooltip:!0},editor:{type:"number",editFormat:"#,##0.##"},numberFormat:"#,##0.##"}],rt={DateTitleBox:{margin:"5px 10px 0px 15px",backgroundColor:"#e0ecff",padding:5,color:"#163971",height:25,fontSize:"12px",display:"flex",width:85,alignItems:"center",fontWeight:600},TitleBox4:{backgroundColor:"#fccf76",color:"#163971",padding:5,height:20,fontSize:"12px",display:"flex",alignItems:"center",width:"100%",fontWeight:600},TitleText3:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},InputBox3:{marginTop:5,width:120,height:25,"& input":{fontSize:"12px !important"}},Scroll:{"& .mainCon":{height:"700px",padding:"10px"}},SA1:{width:80,height:25,margin:"3px 3px",backgroundColor:"#e0ecff",color:"#163971",paddingTop:3,fontSize:"12px",alignItems:"center",fontWeight:600,display:"flex"},SA2:{marginTop:-2,marginLeft:5,alignItems:"center",textAlign:"center"},SA3:{width:"15px!important",height:"15px!important",border:"1px solid #3c96ff",marginTop:"1px","& .checkbox-checked":{border:0,background:"#3c96ff"}},SA4:{width:90,height:25,"& input":{fontSize:"12px !important"}},SA5:{marginLeft:5,width:140,height:25,"& input":{fontSize:"12px !important"}},SA6:{width:70,height:25,margin:"3px 3px",backgroundColor:"#fccf76",color:"#163971",padding:5,fontSize:"12px",alignItems:"center",fontWeight:600},SB1:{width:253,height:32,"& input":{fontSize:"16px !important",textAlign:"center",color:"#0070c0"}},SB2:{fontSize:12,paddingBottom:2,fontWeight:500},SC1:{width:90,height:25,margin:"3px 10px",backgroundColor:"#e0ecff",color:"#163971",padding:5,fontSize:"12px",alignItems:"center",fontWeight:600,display:"flex"},SC2:{width:80},SC3:{width:200,height:25,"& input":{fontSize:"12px !important"}},SC4:{width:200,height:25,"& input":{fontSize:"12px !important",textAlign:"right"}},SC5:{fontSize:12,paddingBottom:2,fontWeight:500,marginLeft:5},SC6:{width:150,height:25,"& input":{fontSize:"12px !important",textAlign:"center"}},SC7:{width:80,height:29,margin:"3px 1px",backgroundColor:"#e0ecff",color:"#163971",padding:5,fontSize:"12px",alignItems:"center",fontWeight:600,display:"flex"},SC8:{"& textarea":{fontSize:"12px !important"}}};function it(){const[t,u]=T.exports.useState({SchFrDate:ae().format("2023-04-01"),SchToDate:new Date,SchType:"0",SchHCN:"",SchGoodcd:"",SchGoodno:""}),[N,l]=T.exports.useState({Factory:"",Factorynm:"",Ymd:new Date,Materialcd:"",Materialno:"",Materialnm2:"",Goodnm:"",HCN:"",ForgingYn:"N",Nace:"N",Dual:"N",Heatno:"",MaterialSpec:"",Material:"",Materialnm:"",MaterialStandard:"",MaterialStandardnm:"",DesignGrade:"",DesignGradenm:"",Conditions:"",Conditionsnm:"",MillMaker:"",MillMakernm:"",Subcontractor:"",Subcontractornm:"",HeatTreatment:"",Remark:"",Crepno:"",Credate:"",Modpno:"",Moddate:"",UserId:""}),[o]=T.exports.useState({Materialno:"required",Heatno:"required",MaterialStandardnm:"required",DesignGradenm:"required",Conditionsnm:"required",Ymd:"required",MillMakernm:"required",Subcontractornm:"required",HeatTreatment:"required"}),[B]=T.exports.useState({HCN:"required",Materialno:"required",Heatno:"required",MaterialStandardnm:"required",DesignGradenm:"required",Conditionsnm:"required",Ymd:"required",MillMakernm:"required",Subcontractornm:"required",HeatTreatment:"required"}),[r]=T.exports.useState([{value:"0",text:"HCN"},{value:"1",text:"\uC790\uC7AC\uCF54\uB4DC"}]),[d,L]=T.exports.useState(""),[S,n]=T.exports.useState(!1),[c,m]=T.exports.useState({visible:!1,desc:"",type:"N"}),[C,y]=T.exports.useState({visible:!1,desc:"",id:""}),[E,R]=T.exports.useState({visible:!1,description:"",value:"",datas:{},id:"",viewId:"",selectedData:{}});return String.prototype.DateValidation=function(K){return new Date(this)instanceof Date&&!isNaN(new Date(this))?ae(this).format(K):null},{searchVO:t,setSearchVO:u,headerVO:N,setHeaderVO:l,attachView:S,setAttachView:n,gridFocus:d,setGridFocus:L,alert:c,setAlert:m,confirm:C,setConfirm:y,codeClassInputs:E,setCodeClassInputs:R,ValidationRules1:o,ValidationRules2:B,cboSchType:r}}const ot=async(t,u)=>{u({Factory:t.User.user.factory,Factorynm:t.User.user.factorynm,Ymd:new Date,Materialcd:"",Materialno:"",HCN:"",ForgingYn:"N",Nace:"N",Dual:"N",Heatno:"",MaterialSpec:"",Material:"",Materialnm:"",MaterialStandard:"",MaterialStandardnm:"",DesignGrade:"",DesignGradenm:"",Conditions:"",Conditionsnm:"",MillMaker:"",MillMakernm:"",Subcontractor:"",Subcontractornm:"",HeatTreatment:"",Remark:"",Crepno:"",Credate:"",Modpno:"",Moddate:"",UserId:t.User.user.userid},50)},lt=async(t,u,N,l,o)=>{try{return(await se.get("/@api/quality/hcnInsert/CheckCombo",{params:{Materialcd:t,MaterialStandard:u,DesignGrade:N,Conditions:l,heatNo:o}})).data}catch(B){console.log("CheckCombo error=>",B)}},Fe=async(t,u,N,l)=>{try{const B=(await se.get("/@api/quality/hcnInsert/selectByChemicalValueList",{params:{HCN:l.HCN,Material:l.Material,MaterialStandard:l.MaterialStandard,DesignGrade:l.DesignGrade,Materialcd:l.Materialcd,Heatno:l.Heatno}})).data;if(B===void 0||B.length<1){u.clearRows();return}else{const r=[];for(let d=0;d<u.getRowCount();d++){const L=u.getValue(d,"ReferenceCodenm"),S=u.getValue(d,"ChemicalValue");r.push({rc:L,pv:S}),setTimeout(async()=>{for(let n=0;n<=d;n++){const c=await u.searchData({fields:["ReferenceCodenm"],value:r[n].rc});c!=null&&await u.setValue(c.dataRow,"ChemicalValue",r[n].pv)}},200)}u.setRows(B)}N.clearCurrent()}catch{t.setAlert({visible:!0,desc:"\uC0C1\uC138\uB0B4\uC5ED \uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.",type:"E"})}},Ae=async(t,u,N,l)=>{try{const B=(await se.get("/@api/quality/hcnInsert/selectByPropertyValueList",{params:{HCN:l.HCN,Materialcd:l.Materialcd,Heatno:l.Heatno,Material:l.Material,MaterialStandard:l.MaterialStandard,DesignGrade:l.DesignGrade,Conditions:l.Conditions}})).data;if(B===void 0||B.length<1){u.clearRows();return}else{const r=[];for(let d=0;d<u.getRowCount();d++){const L=u.getValue(d,"ReferenceCodenm"),S=u.getValue(d,"PropertyValue");r.push({rc:L,pv:S}),setTimeout(async()=>{for(let n=0;n<=d;n++){const c=await u.searchData({fields:["ReferenceCodenm"],value:r[n].rc});c!=null&&await u.setValue(c.dataRow,"PropertyValue",r[n].pv)}},200)}u.setRows(B)}N.clearCurrent()}catch{t.setAlert({visible:!0,desc:"\uC0C1\uC138\uB0B4\uC5ED \uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.",type:"E"})}},Re=async(t,u,N,l)=>{const o={...u};o.SchFrDate=ae(o.SchFrDate).format("YYYYMMDD"),o.SchToDate=ae(o.SchToDate).format("YYYYMMDD"),o.SchAccunit=t.User.user.accunit,o.SchFactory=t.User.user.factory,await t.Util.Command.fSearch(N,"/@api/quality/hcnInsert/selectByList",o,l)},st=async(t,u,N,l,o,B,r,d,L,S,n,c)=>{L.commit(!0),S.commit(!0);const m={...N};m.Ymd=ae(m.Ymd).format("YYYYMMDD"),m.UserId=t.User.user.userid;let C=[],y=[];const E=Ve(t,B,C,n,"\uD654\uD559\uC131\uBD84"),R=Ve(t,r,y,c,"\uBB3C\uC131\uCE58");if(!(E!==""||R!=="")){if(C.length===0&&y.length===0){t.setAlert({visible:!0,desc:"\uD654\uD559\uC131\uBD84 \uBB3C\uC131\uCE58 \uAC12\uC744 \uB4F1\uB85D\uD574\uC57C \uD569\uB2C8\uB2E4.",type:"E"});return}try{const i=(await se.post("/@api/quality/hcnInsert/updateByList",{header:m,detail1:C,detail2:y})).data;if(i.errmess!==""){t.setAlert({visible:!0,desc:i.errmess,type:"E"});return}const te=i.HCN?i.HCN.trim():N.HCN.trim();t.setAlert({visible:!0,desc:"\uBB38\uC11C \uC800\uC7A5\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."}),setTimeout(()=>{u.SchFrDate=ae().clone().startOf("year").toDate(),u.SchToDate=new Date,u.SchType="0",u.SchHCN="",u.SchGoodcd="",u.SchGoodno="",Re(t,u,o,"HCN \uC870\uD68C"),l({...N,HCN:te}),setTimeout(()=>{const X=o.searchData({fields:["HCN"],value:te});X!=null&&d.setCurrent({dataRow:X.dataRow,column:0})},2e3)},2e3)}catch(K){t.setAlert({visible:!0,desc:`\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.${K}`})}}},ut=async(t,u,N,l,o,B)=>{const r={...u};r.Accunit=t.User.user.accunit,r.Factory=t.User.user.factory,r.ReferenceSeq=o.current,r.ReferenceCode=B.current;let d=[];N.getCheckedItems(!0).forEach(S=>d.push(l.getJsonRow(S)));try{const n=(await se.post("/@api/quality/hcnInsert/deleteByItem1",{data:r,detail1:d})).data;if(n.errmess!==""){t.setAlert({visible:!0,desc:n.errmess,type:"E"});return}setTimeout(()=>{Fe(t,l,N,u)},100)}catch(S){t.setAlert({visible:!0,desc:`\uD654\uD559\uC131\uBD84 \uAC12 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.
 ${S}`,type:"E"})}},ct=async(t,u,N,l,o,B)=>{const r={...u};r.Accunit=t.User.user.accunit,r.Factory=t.User.user.factory,r.ReferenceSeq=o.current,r.ReferenceCode=B.current;let d=[];N.getCheckedItems(!0).forEach(S=>d.push(l.getJsonRow(S)));try{const n=(await se.post("/@api/quality/hcnInsert/deleteByItem2",{data:r,detail2:d})).data;if(n.errmess!==""){t.setAlert({visible:!0,desc:n.errmess,type:"E"});return}setTimeout(()=>{Ae(t,l,N,u)},100)}catch(S){t.setAlert({visible:!0,desc:`\uBB3C\uC131\uCE58 \uAC12 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.
 ${S}`,type:"E"})}},Ve=(t,u,N,l,o=null)=>{const B=u.getRows();let r="",d="";return B.forEach((L,S)=>{const n=u.getJsonRow(S);if(console.log(n),!t.Util.Common.fEmptyReturn(n.ReferenceNo)){r="noRefError";return}for(const[c,m]of Object.entries(l))if(typeof n[c]=="number"){if(n[c]==0&&n.MinReference==0&&n.MaxReference==0){r="000Error";return}if(n.MaxReference===0&&n.MinReference>n[c]){r=m;return}if(n.MaxReference!==0&&(n.MinReference>n[c]||n[c]>n.MaxReference)){r=m;return}}N.push(n),r==""}),r=="noRefError"?d="\uC798\uBABB\uB41C ("+t.Util.Grid.fEmptyReturn(o)+`) \uAC12\uC785\uB2C8\uB2E4.
HCN \uD654\uD559\uC131\uBD84 \uBB3C\uC131\uCE58 \uB4F1\uB85D \uD398\uC774\uC9C0\uC5D0\uC11C \uC218\uC815\uD558\uC138\uC694.`:r=="000Error"?d=t.Util.Grid.fEmptyReturn(o)+` \uADF8\uB9AC\uB4DC \uC62C\uBC14\uB978 \uAC12\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694
(MIN, MAX \uBC0F VALUE \uBAA8\uB450 0\uC77C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4).`:d=t.Util.Grid.fEmptyReturn(o)+" \uADF8\uB9AC\uB4DC ["+r+"] \uBC94\uC704 \uC548\uC758 \uAC12\uC744 \uC785\uB825\uD558\uC138\uC694.",r!=""&&t.setAlert({visible:!0,desc:d}),r},dt=async(t,u)=>{const N={...u};try{const o=(await se.post("/@api/quality/hcnInsert/deleteByList",{data:N})).data;return o.errmess!==""&&t.setAlert({visible:!0,desc:o.errmess,type:"E"}),o}catch(l){t.setAlert({visible:!0,desc:`\uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.${l}`})}},mt=De(t=>{const u=T.exports.useRef(null),N=["ChemicalValue"],l=async()=>{t.Util.Grid.fContainerInit(t.Util.Common.fMakeId(t.Id)),Te=new g.exports.LocalDataProvider(!1),ee=new g.exports.GridView(u.current),t.Util.Grid.fInitGridDetail(ee,Te,t.GridFields,t.GridColumns,r,d,L),ee.displayOptions.rowHeight=25,ee.setRowIndicator({visible:!1}),ee.setStateBar({visible:!1}),ee.columnByField("ChemicalValue").styleCallback=o,ee.setRowStyleCallback(B),ee.onValidateColumn=(n,c,m,C)=>{const y={};if(N.includes(c.fieldName)){if(C===0)return;(!C||C===void 0)&&(y.level="warning",y.message="\uD544\uC218 \uC785\uB825 \uAC12\uC785\uB2C8\uB2E4.")}return y},ee.onCellClicked=(n,c)=>{t.onClicked(n,c),t.setGridFocus("D1"),t.commit()},t.DataProviderBind(Te),t.GridViewBind(ee)},o=(n,c)=>{let m=!1;const C=n.getValue(c.index.itemIndex,"MinReference"),y=n.getValue(c.index.itemIndex,"MaxReference"),E=n.getValue(c.index.itemIndex,"ChemicalValue");return typeof E>"u"||C===0&&y===0&&E===0?m=!1:C<=E&&(E<=y||y==0)?m=!0:m=!1,m?"rg-text-blue-color-weight600 right-column":"rg-text-red-color-weight600 right-column"},B=(n,c)=>{let m=!1;return n.getValue(c.index,"ReferenceNo")?m=!0:m=!1,m?"":"rg-column-color-1"},r=async(n,c)=>{n.commit(),t.commit(),t.setGridFocus("D1"),n.getValue(n.getCurrent().itemIndex,c.fieldName)},d=n=>{n.commit(),t.commit(),t.setGridFocus("D1"),ee.validateCells()},L=async(n,c)=>{const m="LastField",C=n.getDataSource().getRowCount(),{fieldName:y}=n.getCurrent(),{itemIndex:E}=n.getCurrent();switch(t.setGridFocus("D1"),c.key){case"Enter":t.setAlert({visible:!1,desc:""}),n.commit(!0),y===m&&t.Util.Grid.fEnterLastField(n,E,C,S()===0),n.setFocus();break;case"Escape":t.Util.Grid.fEscape(n,E,C,"No");break;case"Insert":t.Util.Grid.fKeyInsert(n,E,S()===0,"No");break;case"ArrowDown":t.Util.Grid.fArrowDown(n,E,C,S()===0,"No");break;case"ArrowUp":t.Util.Grid.fArrowUp(n,E,C,S(E)>0);break}},S=n=>{const c=Te.getAllStateRows().created;if(c.length>0){let m=0;return c.map(C=>{if(n===void 0||C>=n){const y=ee.getValues(C);(!y.ItemTypeNm||y.ItemTypeNm===void 0)&&(m+=1)}}),m}return 0};return T.exports.useEffect(()=>{l()},[]),e.createElement(e.Fragment,null,e.createElement(s,{ref:u,key:t.Util.Common.fMakeId(t.Id),id:t.Util.Common.fMakeId(t.Id),style:{width:412,height:405}}))});let Te,ee;const Ct=De(t=>{const u=T.exports.useRef(null),N=["PropertyValue"],l=async()=>{t.Util.Grid.fContainerInit(t.Util.Common.fMakeId(t.Id)),Ee=new g.exports.LocalDataProvider(!1),$=new g.exports.GridView(u.current),t.Util.Grid.fInitGridDetail($,Ee,t.GridFields,t.GridColumns,r,d,L),$.displayOptions.rowHeight=25,$.setRowStyleCallback(B),$.onCellClick=(n,c)=>{c.dataRow>=0&&t.setGridFocus("D2")},$.setRowIndicator({visible:!1}),$.setStateBar({visible:!1}),$.columnByField("PropertyValue").styleCallback=o,$.onValidateColumn=(n,c,m,C)=>{const y={};if(N[0].includes(c.fieldName)){if(C===0)return;(!C||C===void 0)&&(y.level="warning",y.message="\uD544\uC218 \uC785\uB825 \uAC12\uC785\uB2C8\uB2E4.")}return y},$.onCellClicked=(n,c)=>{t.onClicked(n,c),t.setGridFocus("D2"),t.commit()},t.DataProviderBind(Ee),t.GridViewBind($)},o=(n,c)=>{let m=!1;const C=n.getValue(c.index.itemIndex,"MinReference"),y=n.getValue(c.index.itemIndex,"MaxReference"),E=n.getValue(c.index.itemIndex,"PropertyValue");return typeof E>"u"||C===0&&y===0&&E===0?m=!1:C<=E&&(E<=y||y==0)?m=!0:m=!1,m?"rg-text-blue-color-weight600 right-column":"rg-text-red-color-weight600 right-column"},B=(n,c)=>{let m=!1;return n.getValue(c.index,"ReferenceNo")?m=!0:m=!1,m?"":"rg-column-color-1"},r=async(n,c)=>{n.commit(),t.commit(),t.setGridFocus("D2"),n.getValue(n.getCurrent().itemIndex,c.fieldName)},d=n=>{n.commit(),t.commit(),t.setGridFocus("D2"),$.validateCells()},L=async(n,c)=>{const m="LastField",C=n.getDataSource().getRowCount(),{fieldName:y}=n.getCurrent(),{itemIndex:E}=n.getCurrent();switch(t.setGridFocus("D2"),c.key){case"Enter":t.setAlert({visible:!1,desc:""}),n.commit(!0),y===m&&t.Util.Grid.fEnterLastField(n,E,C,S()===0),n.setFocus();break;case"Escape":t.Util.Grid.fEscape(n,E,C,"No");break;case"Insert":t.Util.Grid.fKeyInsert(n,E,S()===0,"No");break;case"ArrowDown":t.Util.Grid.fArrowDown(n,E,C,S()===0,"No");break;case"ArrowUp":t.Util.Grid.fArrowUp(n,E,C,S(E)>0);break;case"Tab":setTimeout(()=>{document.getElementById(t.Util.Common.fMakeId("Factorynm")).focus()},100);break}},S=n=>{const c=Ee.getAllStateRows().created;if(c.length>0){let m=0;return c.map(C=>{if(n===void 0||C>=n){const y=$.getValues(C);(!y.ItemTypeNm||y.ItemTypeNm===void 0)&&(m+=1)}}),m}return 0};return T.exports.useEffect(()=>{l()},[]),e.createElement(e.Fragment,null,e.createElement(s,{ref:u,key:t.Util.Common.fMakeId(t.Id),id:t.Util.Common.fMakeId(t.Id),style:{width:412,height:405}}))});let Ee,$;const Dt=De(()=>{const t="HCNINSERT",{$CommonStore:u,$UserStore:N}=Ge(),l=ft(),{searchVO:o,setSearchVO:B,headerVO:r,setHeaderVO:d,attachView:L,setAttachView:S,gridFocus:n,setGridFocus:c,alert:m,setAlert:C,confirm:y,setConfirm:E,ValidationRules1:R,cboSchType:K}=it(),i=new ve(t,C,!0,!0,!0,!0,!0),te=T.exports.useRef(null),X=T.exports.useRef(""),p=T.exports.useRef(0),_=T.exports.useRef(),ne=T.exports.useRef(""),I=T.exports.useRef(),H=T.exports.useRef(""),J=T.exports.useRef(),P=async()=>{u.fSetBinding(!0),await ot(z,d),u.fSetBinding(!1),X.current="",J.current="",i.Common.fSetTabIndex(),setTimeout(()=>{document.getElementById(z.Util.Common.fMakeId("Materialno")).focus()},100)},[z]=T.exports.useState({Util:i,User:N,fInit:P,setAlert:C,setHeaderVO:d}),A={ChemicalValue:"\uD654\uD559\uC131\uBD84\uAC12"},F={PropertyValue:"\uBB3C\uC131\uCE58\uAC12"},q=a=>ce=a,V=a=>de=a,x=a=>le=a,U=a=>pe=a,v=a=>j=a,M=a=>ie=a,re=()=>{pe.commit(),j.commit(),ie.commit()},W=async(a,b,D,Y)=>{if(u.fGetBinding())return;switch(a){case"SchGoodno":i.Common.fMultiFieldChange(B,{SchGoodcd:b,SchGoodno:D});break;case"Materialno":i.Common.fMultiFieldChange(d,{Materialcd:b,Materialno:D,Materialnm2:Y.Data.goodnm,MaterialSpec:Y.Data.spec,Material:Y.Data.class5,Materialnm:Y.Data.class5nm,MaterialStandard:"",MaterialStandardnm:"",DesignGrade:"",DesignGradenm:"",Conditions:"",Conditionsnm:""});break;case"MaterialStandardnm":i.Common.fMultiFieldChange(d,{MaterialStandard:b,MaterialStandardnm:D,DesignGrade:"",DesignGradenm:"",Conditions:"",Conditionsnm:""});break;case"DesignGradenm":i.Common.fMultiFieldChange(d,{DesignGrade:b,DesignGradenm:D,Conditions:"",Conditionsnm:""}),r.DesignGrade=b,r.DesignGrade&&await Fe(z,de,j,r);break;case"Conditionsnm":i.Common.fMultiFieldChange(d,{Conditions:b,Conditionsnm:D}),r.Conditions=b,r.Conditions&&await Ae(z,le,ie,r);break;case"MillMakernm":i.Common.fMultiFieldChange(d,{MillMaker:b,MillMakernm:D});break;case"Subcontractornm":i.Common.fMultiFieldChange(d,{Subcontractor:b,Subcontractornm:D});break}let O,ye,xe=[{checkReturn:""}];a=="Conditionsnm"?O=b:O=r.Conditions,a=="Materialno"?ye=b:ye=r.Materialcd,ye&&(xe=await lt(ye,r.MaterialStandard,r.DesignGrade,O,r.Heatno)),xe[0].checkReturn&&(!r.HCN||xe[0].combosHCN!=r.HCN)&&(C({visible:!0,desc:`\uC774 \uC790\uC7AC \uCF54\uB4DC, \uC790\uC7AC \uD45C\uC900, \uB4F1\uAE09, 
HEATNO \uBC0F CONDITION \uC138\uD2B8\uC5D0 HCN\uC774 \uC788\uC2B5\uB2C8\uB2E4 (${xe[0].combosHCN})`,type:"E"}),le.setRows({}),a=="Conditionsnm"?setTimeout(()=>{i.Common.fMultiFieldChange(d,{Conditions:"",Conditionsnm:""})},1e3):a=="Materialno"&&setTimeout(()=>{i.Common.fMultiFieldChange(d,{Materialcd:"",Materialno:"",Materialnm2:"",MaterialSpec:"",Material:"",Materialnm:""})},1e3))},ge=a=>{B(D=>({...D,SchText:a}));let b="";o.SchType==="0"?b=ce.searchData({fields:["HCN"],value:a,partialMatch:!0}):o.SchType==="1"&&(b=ce.searchData({fields:["Materialno"],value:a,partialMatch:!0})),i.Common.fEmptyReturn(b)&&b.dataRow!=0&&setTimeout(()=>{pe.setCurrent({dataRow:b.dataRow,column:0})},1)},Ne=a=>{!a.shiftKey&&a.key==="Tab"&&setTimeout(()=>{document.getElementById(i.Common.fMakeId("SchToDate")).focus()},100)},Be=a=>{!a.shiftKey&&a.key==="Tab"?setTimeout(()=>{document.getElementById(i.Common.fMakeId("SchFrDate")).focus()},10):a.shiftKey&&a.key==="Tab"&&setTimeout(()=>{document.getElementById(i.Common.fMakeId("SchType")).focus()},100)},we=async(a,b)=>{re(),c("H"),de.clearRows(),le.clearRows(),p.current=b;const D=ce.getJsonRow(b);J.current=D.HCN,u.fSetBinding(!0),d(D),u.fSetBinding(!1),setTimeout(()=>{Fe(z,de,j,D),Ae(z,le,ie,D)},100)},f=(a,b)=>{const D=j.getValue(b.itemIndex,"ReferenceSeq"),Y=j.getValue(b.itemIndex,"ReferenceCode");_.current=D,ne.current=Y},G=(a,b)=>{const D=ie.getValue(b.itemIndex,"ReferenceSeq"),Y=ie.getValue(b.itemIndex,"ReferenceCode");I.current=D,H.current=Y},h=async()=>{E({visible:!1,desc:"",id:""}),y.id==="SAVE"?(re(),await st(z,o,r,d,ce,de,le,pe,j,ie,A,F)):y.id==="DELETE"?(await dt(z,r),setTimeout(()=>{Re(z,o,ce,"HCN \uB9AC\uC2A4\uD2B8"),ue()},100)):y.id==="DELETE_ITEM1"?(await ut(z,r,j,de,_,ne),_.current="",ne.current=""):y.id==="DELETE_ITEM2"&&(await ct(z,r,ie,le,I,H),I.current="",H.current="")},Q=()=>{E({visible:!1,desc:"",id:""})},ue=async()=>{P(),de.clearRows(),le.clearRows(),_.current="",ne.current="",I.current="",H.current="",J.current=""},he=async()=>{i.Common.fValidate(!ae(o.SchFrDate,"YYYY-MM-DD").isValid(),"\uC870\uD68C\uAE30\uAC04\uC744 \uBC14\uB974\uAC8C \uC785\uB825\uD574\uC8FC\uC138\uC694.")||i.Common.fValidate(!ae(o.SchToDate,"YYYY-MM-DD").isValid(),"\uC870\uD68C\uAE30\uAC04\uC744 \uBC14\uB974\uAC8C \uC785\uB825\uD574\uC8FC\uC138\uC694.")||i.Common.fValidate(ae(o.SchFrDate).format("YYYYMMDD")>ae(o.SchToDate).format("YYYYMMDD"),"\uC870\uD68C\uAE30\uAC04\uC744 \uD655\uC778\uD574 \uC8FC\uC138\uC694.")||(await Re(z,o,ce,"HCN"),setTimeout(()=>{pe.setFocus()},100))},me=async()=>{i.Common.fValidate(!ae(r.Ymd,"YYYY-MM-DD").isValid(),"\uC785\uACE0\uC77C\uC790\uAC00 \uC81C\uB300\uB85C \uC785\uB825\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.")||i.Common.fValidateElements({Materialno:"\uC790\uC7AC\uCF54\uB4DC",Heatno:"HEATNO",MaterialStandardnm:"\uC7AC\uB8CC\uD45C\uC900",DesignGradenm:"\uB4F1\uAE09",Conditionsnm:"CONDITIONS",MillMakernm:"MAKER",Subcontractornm:"\uACF5\uAE09\uC790",HeatTreatment:"\uC5F4\uCC98\uB9AC"})||E({visible:!0,desc:"\uC800\uC7A5 \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",id:"SAVE"})},fe=async()=>{if(!i.Common.fValidate(!r.HCN,"HCN\uC774 \uC120\uD0DD\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.")){if(n==="H")C({visible:!0,desc:"HCN List\uB294 \uC0AD\uC81C \uD558\uC2E4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.",type:"W"});else if(n==="D1"){if(j.commit(),i.Common.fValidate(j.getCheckedItems(!0).length<1,"\uC0AD\uC81C\uD560 \uD654\uD559\uC131\uBD84\uC744 \uC120\uD0DD\uD558\uC138\uC694."))return;E({visible:!0,desc:"\uD654\uD559\uC131\uBD84\uC744 \uC0AD\uC81C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",id:"DELETE_ITEM1"})}else if(n==="D2"){if(ie.commit(),i.Common.fValidate(ie.getCheckedItems(!0).length<1,"\uC0AD\uC81C\uD560 \uBB3C\uC131\uCE58\uB97C \uC120\uD0DD\uD558\uC138\uC694."))return;E({visible:!0,desc:"\uBB3C\uC131\uCE58\uB97C \uC0AD\uC81C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",id:"DELETE_ITEM2"})}}},Z=async()=>{i.Common.fValidate(i.Common.fEmptyReturn(J.current)==="",`HCN\uC774 \uC120\uD0DD\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. 
\uD655\uC778\uD574 \uC8FC\uC2ED\uC2DC\uC624.`)||S(!0)},Me=()=>{S(!1)};return T.exports.useEffect(()=>{i.Common.fHotKey(u,u.isPopup,ue,he,me,fe)},[u.HotKey]),T.exports.useEffect(()=>{P()},[]),e.createElement(e.Fragment,null,e.createElement(qe,{pgmid:t,visible:"111101",onNew:ue,onSearch:he,onSave:me,onDelete:fe,onAttachment:Z}),e.createElement(ke,{className:"mainCon"},e.createElement(k.exports.Layout,{style:{width:"100%",height:775}},e.createElement(k.exports.LayoutPanel,{region:"west",split:!0,style:{width:520,height:775}},e.createElement(ke,{className:l.Scroll},e.createElement(s,{style:{marginTop:5}},e.createElement(s,{style:{marginTop:3,marginLeft:5,display:"flex",alignItems:"center"}},e.createElement(s,{className:l.SA1},e.createElement(s,{className:l.SA2},"\uAE30\uAC04")),e.createElement(s,{style:{display:"flex",alignItems:"center"}},e.createElement(s,{onKeyDown:a=>Ne(a)},e.createElement(be,{inputCls:"inputCls",selected:o.SchFrDate,inputId:i.Common.fMakeId("SchFrDate"),onHandleDateChange:a=>i.Common.fFieldChange(B,"SchFrDate",a)})),e.createElement(s,{style:{margin:"0  3px",width:"10px"}},"~"),e.createElement(s,{id:i.Common.fMakeId("SchToDate")},e.createElement(be,{inputCls:"inputCls",selected:o.SchToDate,inputId:i.Common.fMakeId("SchToDate"),onHandleDateChange:a=>i.Common.fFieldChange(B,"SchToDate",a)})))),e.createElement(s,{display:"flex",alignItems:"center"},e.createElement(s,{className:l.SA1,style:{marginLeft:8}},e.createElement(s,{className:l.SA2},"HCN")),e.createElement(s,{onKeyDown:a=>{a.shiftKey&&a.key==="Tab"&&(a.preventDefault(),j.setFocus())}},e.createElement(k.exports.TextBox,{inputId:i.Common.fMakeId("SchHCN"),inputCls:"inputCls",name:"SchHCN",onChange:a=>i.Common.fFieldChange(B,"SchHCN",a),value:o.SchHCN,className:l.SC3,style:{width:236}}))),e.createElement(Ce,{inputCls:"inputCls",pgmid:t,inputType:"Good",id:"SchGoodno",title:"\uC790\uC7AC\uCF54\uB4DC",helper:i.CodeHelper.helperGoodNoMaterial2,ComponentCode:o.SchGoodcd,ComponentValue:o.SchGoodno,SetValue:W,labelStyles:{width:80,height:25,margin:"3px 3px 5px 8px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},inputStyles:{width:236,margin:"0px 0px 5px 0px"}}),e.createElement(s,{display:"flex",alignItems:"center"},e.createElement(s,{className:l.SA1,style:{marginLeft:8}},e.createElement(s,{className:l.SA2},"\uAC80\uC0C9")),e.createElement(k.exports.ComboBox,{inputCls:"inputCls",inputId:i.Common.fMakeId("SchType"),data:K,value:o.SchType,editable:!1,onChange:a=>i.Common.fFieldChange(B,"SchType",a),onSelectionChange:()=>{setTimeout(()=>{document.getElementById(i.Common.fMakeId("SchText")).focus()},100)},panelStyle:{height:66},className:l.SA4}),e.createElement(s,{onKeyDown:a=>{Be(a)}},e.createElement(k.exports.TextBox,{inputCls:"inputCls",inputId:i.Common.fMakeId("SchText"),className:l.SA5,onChange:a=>ge(a),value:o.SchText}))),e.createElement(s,{style:{marginTop:5}},e.createElement(Xe,{Util:i,Id:"Grid1",GridTitle:"\uD5E4\uB354",Height:634,currentIndex:p,GridFields:Qe,GridColumns:Ze,RowChanged:we,DataProviderBind:q,GridViewBind:U}))))),e.createElement(k.exports.LayoutPanel,{region:"center",split:!0,style:{minWidth:400,maxWidth:1400,height:774}},e.createElement(k.exports.Layout,null,e.createElement(k.exports.LayoutPanel,{region:"north"},e.createElement(k.exports.Form,{ref:te,style:{maxWidth:"100%"},model:r,rules:R,labelWidth:120,labelAlign:"right"},e.createElement(s,{style:{width:"100%",height:315}},e.createElement(s,{style:{marginTop:8,display:"flex",alignItems:"center"}},e.createElement(s,{className:l.SC1},"\uACF5\uC7A5\uBA85"),e.createElement(s,{onKeyDown:a=>{a.shiftKey&&a.key==="Tab"&&(a.preventDefault(),j.setFocus())}},e.createElement(k.exports.TextBox,{inputId:i.Common.fMakeId("Factorynm"),inputCls:"inputCls",name:"Factorynm",value:N.user.factorynm,editable:!1,className:l.SC3}))),e.createElement(s,{display:"flex"},e.createElement(Ce,{inputCls:"inputCls",pgmid:t,inputType:"Good",id:"Materialno",title:"\uC790\uC7AC\uCF54\uB4DC",helper:i.CodeHelper.helperGoodNoMaterial2,ComponentCode:r.Materialcd,ComponentValue:r.Materialno,SetValue:W,labelStyles:{width:90,height:25,margin:"3px 10px 5px 10px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},inputStyles:{width:200,margin:"0px 0px 5px 0px"},inputRequired:!0}),e.createElement(s,{style:{marginTop:3,display:"flex",alignItems:"center"}},e.createElement(s,{className:l.SC1},"SPEC"),e.createElement(s,null,e.createElement(k.exports.TextBox,{inputId:i.Common.fMakeId("Spec"),inputCls:"inputCls",name:"Spec",value:r.MaterialSpec,editable:!1,className:l.SC3}))),e.createElement(s,{style:{marginTop:3,display:"flex",alignItems:"center"}},e.createElement(s,{className:l.SC1},"\uC7AC\uC9C8"),e.createElement(s,{onKeyDown:a=>{!a.shiftKey&&a.key==="Tab"&&setTimeout(()=>{document.getElementById(i.Common.fMakeId("ForgingYn")).focus()},10)}},e.createElement(k.exports.TextBox,{inputId:i.Common.fMakeId("Materialnm"),inputCls:"inputCls",name:"Materialnm",value:r.Materialnm,editable:!1,className:l.SC3})))),e.createElement(s,{display:"flex"},e.createElement(s,{style:{marginTop:3,display:"flex",alignItems:"center"}},e.createElement(s,{className:l.SC1},e.createElement(s,{className:l.SC2},"HCN")),e.createElement(s,{onKeyDown:a=>{!a.shiftKey&&a.key==="Tab"&&setTimeout(()=>{document.getElementById(i.Common.fMakeId("ForgingYn")).focus()},10)}},e.createElement(k.exports.TextBox,{inputId:i.Common.fMakeId("HCN"),inputCls:"inputCls",name:"HCN",value:r.HCN,className:l.SC3,onChange:a=>i.Common.fFieldChange(d,"HCN",a),disabled:!0}))),e.createElement(s,{style:{marginLeft:10,marginTop:3,display:"flex",alignItems:"center"}},e.createElement(s,{style:{paddingLeft:10,display:"flex",alignItems:"center"}},e.createElement(s,{onKeyDown:a=>{a.shiftKey&&a.key==="Tab"&&setTimeout(()=>{document.getElementById(i.Common.fMakeId("HCN")).focus()},10)}},e.createElement(k.exports.CheckBox,{name:"ForgingYn",value:r.ForgingYn,id:"ForgingYn",inputId:i.Common.fMakeId("ForgingYn"),className:l.SA3,onChange:a=>{a===!0&&i.Common.fFieldChange(d,"ForgingYn","Y"),a===!1&&i.Common.fFieldChange(d,"ForgingYn","N")},checked:r.ForgingYn==="Y"})),e.createElement(k.exports.Label,{htmlFor:i.Common.fMakeId("ForgingYn"),style:{marginLeft:5,width:80,fontSize:12}},"HCN \uB2E8\uC870\uC720\uBB34")),e.createElement(s,{style:{paddingLeft:10,display:"flex",alignItems:"center"}},e.createElement(k.exports.CheckBox,{name:"Nace",value:r.Nace,id:"Nace",inputId:i.Common.fMakeId("Nace"),className:l.SA3,onChange:a=>{a===!0&&i.Common.fFieldChange(d,"Nace","Y"),a===!1&&i.Common.fFieldChange(d,"Nace","N")},checked:r.Nace==="Y"}),e.createElement(k.exports.Label,{htmlFor:i.Common.fMakeId("Nace"),style:{marginLeft:5,width:40,fontSize:12}},"NACE")),e.createElement(s,{style:{paddingLeft:10,display:"flex",alignItems:"center"}},e.createElement(k.exports.CheckBox,{name:"Dual",value:r.Dual,id:"Dual",inputId:i.Common.fMakeId("Dual"),className:l.SA3,onChange:a=>{a===!0&&i.Common.fFieldChange(d,"Dual","Y"),a===!1&&i.Common.fFieldChange(d,"Dual","N")},checked:r.Dual==="Y"}),e.createElement(k.exports.Label,{htmlFor:i.Common.fMakeId("Dual"),style:{marginLeft:5,width:40,fontSize:12}},"DUAL")))),e.createElement(s,{style:{marginTop:3,display:"flex",alignItems:"center"}},e.createElement(s,{className:l.SC1},e.createElement(s,{className:l.SC2},"HEATNO"),e.createElement(Se,{style:{marginLeft:20,color:"#ffa8a8"},size:16})),e.createElement(s,{onKeyDown:a=>{a.shiftKey&&a.key==="Tab"&&setTimeout(()=>{document.getElementById(i.Common.fMakeId("Nace")).focus()},10)}},e.createElement(k.exports.TextBox,{inputId:i.Common.fMakeId("Heatno"),inputCls:"inputCls",name:"Heatno",value:r.Heatno,className:l.SC3,onChange:a=>i.Common.fFieldChange(d,"Heatno",a)}))),e.createElement(s,{display:"flex"},e.createElement(Ce,{inputCls:"inputCls",pgmid:t,inputType:"",id:"MaterialStandardnm",title:"\uC7AC\uB8CC\uD45C\uC900",helper:i.CodeHelper.helperMaterialStandard,ComponentCode:r.MaterialStandard,ComponentValue:r.MaterialStandardnm,SetValue:W,labelStyles:{width:90,height:25,margin:"3px 10px 5px 10px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},inputStyles:{width:200,margin:"0px 0px 5px 0px"},inputRequired:!0}),e.createElement(je,{MaterialStandardnm:r.MaterialStandardnm,inputCls:"inputCls",pgmid:t,inputType:"",id:"DesignGradenm",title:"\uB4F1\uAE09",helper:i.CodeHelper.helperDesignGradeFilterMaterialStandard,ComponentCode:r.DesignGrade,ComponentValue:r.DesignGradenm,SetValue:W,labelStyles:{width:90,height:25,margin:"3px 10px 5px 10px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},inputStyles:{width:200,margin:"0px 0px 5px 0px"},inputRequired:!0}),e.createElement(Ce,{inputCls:"inputCls",pgmid:t,inputType:"",id:"Conditionsnm",title:"CONDITION",helper:i.CodeHelper.helperConditions,ComponentCode:r.Conditions,ComponentValue:r.Conditionsnm,SetValue:W,labelStyles:{width:90,height:25,margin:"3px 10px 5px 10px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},inputStyles:{width:200,margin:"0px 0px 5px 0px"},inputRequired:!0})),e.createElement(s,{display:"flex"},e.createElement(s,{style:{marginTop:3,display:"flex",alignItems:"center"}},e.createElement(s,{className:l.SC1},e.createElement(s,{className:l.SC2},"\uC785\uACE0\uC77C\uC790"),e.createElement(Se,{style:{marginLeft:25,color:"#ffa8a8"},size:18})),e.createElement(be,{inputCls:"inputCls",selected:r.Ymd,inputId:i.Common.fMakeId("Ymd"),onHandleDateChange:a=>i.Common.fFieldChange(d,"Ymd",a),style:{width:160}})),e.createElement(Ce,{inputCls:"inputCls",pgmid:t,inputType:"",id:"MillMakernm",title:"MAKER",helper:i.CodeHelper.helperMaker,ComponentCode:r.MillMaker,ComponentValue:r.MillMakernm,SetValue:W,labelStyles:{width:90,height:25,margin:"3px 10px 5px 10px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},inputStyles:{width:200,margin:"0px 0px 5px 0px"},inputRequired:!0}),e.createElement(Ce,{inputCls:"inputCls",pgmid:t,inputType:"Cust",id:"Subcontractornm",title:"\uACF5\uAE09\uC790",helper:i.CodeHelper.helperCust,ComponentCode:r.Subcontractor,ComponentValue:r.Subcontractornm,SetValue:W,labelStyles:{width:90,height:25,margin:"3px 10px 5px 10px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},inputStyles:{width:200,margin:"0px 0px 5px 0px"},inputRequired:!0})),e.createElement(s,{style:{marginTop:3,display:"flex"}},e.createElement(s,{className:l.SC1},e.createElement(s,{className:l.SC2},"\uC5F4\uCC98\uB9AC"),e.createElement(Se,{style:{marginLeft:25,color:"#ffa8a8"},size:18})),e.createElement(s,null,e.createElement(k.exports.TextBox,{style:{width:510,height:60,marginTop:3},inputId:i.Common.fMakeId("HeatTreatment"),inputCls:"inputCls",name:"HeatTreatment",value:r.HeatTreatment,onChange:a=>i.Common.fFieldChange(d,"HeatTreatment",a),multiline:!0}))),e.createElement(s,{style:{marginTop:3,display:"flex",alignItems:"center"}},e.createElement(s,{className:l.SC1},"\uBE44\uACE0"),e.createElement(s,{onKeyDown:a=>{!a.shiftKey&&a.key==="Tab"&&(a.preventDefault(),j.setFocus(),c("D1"))}},e.createElement(k.exports.TextBox,{inputId:i.Common.fMakeId("Remark"),inputCls:"inputCls",name:"Remark",value:r.Remark,className:l.SC3,style:{width:510},onChange:a=>i.Common.fFieldChange(d,"Remark",a)})))))),e.createElement(k.exports.LayoutPanel,{region:"center"},e.createElement(s,{style:{height:570,display:"flex"}},e.createElement(s,{style:{marginLeft:10,marginTop:10}},e.createElement(s,{className:l.TitleBox4,style:{width:840}},"HCN \uD654\uD559\uC131\uBD84 \uBB3C\uC131\uCE58 \uB4F1\uB85D"),e.createElement(s,{display:"flex"},e.createElement(s,null,e.createElement(mt,{Util:i,Id:"Grid2",GridTitle:"\uD654\uD559\uC131\uBD84",GridFields:et,GridColumns:tt,setGridFocus:c,setAlert:C,onClicked:f,DataProviderBind:V,GridViewBind:v,commit:re})),e.createElement(s,{style:{width:16}}),e.createElement(s,null,e.createElement(Ct,{Util:i,Id:"Grid3",GridTitle:"\uBB3C\uC131\uCE58",GridFields:at,GridColumns:nt,setGridFocus:c,setAlert:C,onClicked:G,DataProviderBind:x,GridViewBind:M,commit:re})))))))))),L&&e.createElement(Ke,{PGMID:t,FileTitle:"HCN",FileType:"HI",FileNo:J.current,FilePath:"HCNInsert",setClose:Me}),e.createElement(Ue,{visible:m.visible,description:m.desc,type:m.type,onConfirm:()=>C({visible:!1})}),e.createElement(ze,{visible:y.visible,description:y.desc,onCancel:Q,onConfirm:h}))});let ce,de,le,pe,j,ie;const ft=He(rt);export{Dt as default};
