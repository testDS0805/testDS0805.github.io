import{r as c,R as t}from"./index.da6908f5.js";import{m as a,o as V,c as I,u as O,U as G,h as d,P as k,B as s,r as U,A as P,d as F,i as H}from"./App.11263b70.js";import{C as z}from"./CommonButton.0b792d77.js";import{C as R}from"./CommonDatePicker.d7bc57f8.js";import"./index.6f186c21.js";const K=[{fieldName:"RowNo",dataType:a.exports.ValueType.NUMBER},{fieldName:"ForOutDate",dataType:a.exports.ValueType.TEXT},{fieldName:"InvoiceNo",dataType:a.exports.ValueType.TEXT},{fieldName:"RecordCnt",dataType:a.exports.ValueType.NUMBER},{fieldName:"Amount",dataType:a.exports.ValueType.NUMBER},{fieldName:"Tax",dataType:a.exports.ValueType.NUMBER},{fieldName:"Total",dataType:a.exports.ValueType.NUMBER}],X=[{name:"RowNo",fieldName:"RowNo",type:"data",width:30,header:{text:"\uC21C\uBC88"},numberFormat:"0",footer:{text:"\uD569\uACC4",styleName:"center-column"}},{name:"ForOutDate",fieldName:"ForOutDate",type:"data",width:80,header:{text:"\uBC1C\uD589\uC77C\uC790"}},{name:"InvoiceNo",fieldName:"InvoiceNo",type:"data",width:80,header:{text:"\uAC70\uB798\uBA85\uC138\uC11C \uBC88\uD638"}},{name:"RecordCnt",fieldName:"RecordCnt",type:"data",width:80,styleName:"right-column",header:{text:"\uD488\uBAA9\uAC74\uC218"},numberFormat:"#,##0"},{name:"Amount",fieldName:"Amount",type:"data",width:100,styleName:"right-column",header:{text:"\uACF5\uAE09\uAC00\uC561"},footer:{numberFormat:"#,##0",expression:"sum"},numberFormat:"#,##0"},{name:"Tax",fieldName:"Tax",type:"data",width:100,styleName:"right-column",header:{text:"\uBD80\uAC00\uC138"},footer:{numberFormat:"#,##0",expression:"sum"},numberFormat:"#,##0"},{name:"Total",fieldName:"Total",type:"data",width:100,styleName:"right-column",header:{text:"\uAC70\uB798\uAE08\uC561(VAT\uD3EC\uD568)"},footer:{numberFormat:"#,##0",expression:"sum"},numberFormat:"#,##0"}],L=[{fieldName:"RowNo",dataType:a.exports.ValueType.NUMBER},{fieldName:"GoodNo",dataType:a.exports.ValueType.TEXT},{fieldName:"Spec",dataType:a.exports.ValueType.TEXT},{fieldName:"GoodNm",dataType:a.exports.ValueType.TEXT},{fieldName:"Qty",dataType:a.exports.ValueType.NUMBER},{fieldName:"Price",dataType:a.exports.ValueType.NUMBER},{fieldName:"Amount",dataType:a.exports.ValueType.NUMBER},{fieldName:"Tax",dataType:a.exports.ValueType.NUMBER},{fieldName:"Total",dataType:a.exports.ValueType.NUMBER}],Q=[{name:"RowNo",fieldName:"RowNo",type:"data",width:30,header:{text:"\uC21C\uBC88"},numberFormat:"0",footer:{text:"\uD569\uACC4",styleName:"center-column"}},{name:"GoodNo",fieldName:"GoodNo",type:"data",width:150,styleName:"left-column",header:{text:"\uD488\uBC88"}},{name:"Spec",fieldName:"Spec",type:"data",width:150,styleName:"left-column",header:{text:"\uADDC\uACA9"}},{name:"GoodNm",fieldName:"GoodNm",type:"data",width:250,styleName:"left-column",header:{text:"\uD488\uBA85"}},{name:"Qty",fieldName:"Qty",type:"data",width:80,styleName:"right-column",header:{text:"\uC8FC\uBB38\uB7C9"},footer:{numberFormat:"#,##0",expression:"sum"},numberFormat:"#,##0"},{name:"Price",fieldName:"Price",type:"data",width:80,styleName:"right-column",header:{text:"\uB2E8\uAC00"},numberFormat:"#,##0"},{name:"Amount",fieldName:"Amount",type:"data",width:100,styleName:"right-column",header:{text:"\uACF5\uAE09\uAC00\uC561"},footer:{numberFormat:"#,##0",expression:"sum"},numberFormat:"#,##0"},{name:"Tax",fieldName:"Tax",type:"data",width:100,styleName:"right-column",header:{text:"\uBD80\uAC00\uC138"},footer:{numberFormat:"#,##0",expression:"sum"},numberFormat:"#,##0"},{name:"Total",fieldName:"Total",type:"data",width:100,styleName:"right-column",header:{text:"\uAC70\uB798\uAE08\uC561(VAT\uD3EC\uD568)"},footer:{numberFormat:"#,##0",expression:"sum"},numberFormat:"#,##0"}],_=V(()=>{const{$CommonStore:p,$UserStore:y}=O(),l=W(),N="AGENCYORDERSTATEMENT",E=c.exports.useRef(null),w=c.exports.useRef(null),[i,B]=c.exports.useState({frDate:new Date,toDate:new Date,custCd:y.user.custcd,custNm:y.user.custnm}),[h,m]=c.exports.useState({visible:!1,desc:"",type:"N"}),x=new G(N,m,!0,!0,!0,!0,!0),b=()=>{B({frDate:d().startOf("month").toDate(),toDate:new Date,custCd:y.user.custcd,custNm:y.user.custnm})},M=()=>{D=new a.exports.LocalDataProvider(!1),r=new a.exports.GridView(E.current),r.setDataSource(D),D.setFields(K),r.setColumns(X),r.setCheckBar({visible:!1}),r.setStateBar({visible:!1}),r.setRowIndicator({visible:!1}),r.setCopyOptions({singleMode:!0,enabled:!0}),r.displayOptions.selectionStyle="singleRow",r.setDisplayOptions({fitStyle:"evenFill"}),r.setOptions({summaryMode:"aggregate"}),r.setEditOptions({editable:!1}),r.displayOptions.rowHeight=35,r.onCellClicked=(e,o)=>{if(o.cellType==="data"){const n=o.dataRow,f=e.getDataSource().getValue(n,"InvoiceNo");g(u,f)}},r.onKeyDown=(e,o)=>{const n=o.key,f=e.getItemCount();let C=e.getCurrent().itemIndex;if(n==="ArrowDown"&&(C+=1,f>C)){const A=e.getDataSource().getValue(C,"InvoiceNo");g(u,A)}if(n==="ArrowUp"){C-=1,C<0&&(C=0);const A=e.getDataSource().getValue(C,"InvoiceNo");g(u,A)}}},v=()=>{T=new a.exports.LocalDataProvider(!1),u=new a.exports.GridView(w.current),u.setDataSource(T),T.setFields(L),u.setColumns(Q),u.setCheckBar({visible:!1}),u.setStateBar({visible:!1}),u.setRowIndicator({visible:!1}),u.setCopyOptions({singleMode:!0,enabled:!0}),u.setDisplayOptions({fitStyle:"evenFill"}),u.setOptions({summaryMode:"aggregate"}),u.setEditOptions({editable:!1}),u.displayOptions.rowHeight=35,u.setContextMenu([{label:"\uC5D1\uC140 \uB0B4\uBCF4\uB0B4\uAE30"}]),u.onContextMenuItemClicked=function(e,o){if(o.label==="\uC5D1\uC140 \uB0B4\uBCF4\uB0B4\uAE30"){if(e.getDataSource().getRowCount()<=0){m({visible:!0,desc:"\uC5D1\uC140 \uB0B4\uBCF4\uB0B4\uAE30 \uD560 \uB9AC\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."});return}u.exportGrid({type:"excel",target:"local",fileName:"\uAC70\uB798\uBA85\uC138\uC11C"+d(i.frData).format("YYYYMMDD")+"-"+d(i.toDate).format("YYYYMMDD")+".xlsx",done:function(){m({visible:!0,desc:"\uC5D1\uC140\uB85C \uB0B4\uBCF4\uB0B4\uAE30\uB97C \uC644\uB8CC\uD588\uC2B5\uB2C8\uB2E4."})}})}}},g=async(e,o)=>{if(!o){m({visible:!0,desc:"\uAC70\uB798\uBA85\uC138\uC11C \uBC88\uD638\uAC00 \uC81C\uB300\uB85C \uC785\uB825\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."});return}let n={...i};n.ForOutNo=o;let f=await F.get("/@api/agency/orderStatement/selectByDetailList",{params:n});e.getDataSource().clearRows();const C=f.data;C.length&&(e.getDataSource().setRows(C),e.orderBy([],[]))},S=async()=>{if(!i.custCd){m({visible:!0,desc:"\uC678\uC8FC\uCC98\uAC00 \uC81C\uB300\uB85C \uC785\uB825\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."});return}if(!d(i.frDate,"YYYY-MM-DD").isValid()||!d(i.toDate,"YYYY-MM-DD").isValid()){m({visible:!0,desc:"\uAC80\uC0C9\uAE30\uAC04\uC744 \uBC14\uB974\uAC8C \uC785\uB825\uD574 \uC8FC\uC138\uC694."});return}if(d(i.frDate).format("YYYYMMDD")>d(i.toDate).format("YYYYMMDD")){m({visible:!0,desc:"\uAC80\uC0C9\uAE30\uAC04\uC744 \uD655\uC778\uD574 \uC8FC\uC138\uC694."});return}let e={...i};e.frDate=d(e.frDate).format("YYYYMMDD"),e.toDate=d(e.toDate).format("YYYYMMDD");try{let o=await F.get("/@api/agency/orderStatement/selectByList",{params:e});Y();const n=o.data;if(console.log(n,n.length),n.length<1){m({visible:!0,desc:"\uC870\uD68C \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."});return}D.setRows(o.data),r.setFocus()}catch(o){o.response.status===404?m({visible:!0,desc:"\uC870\uD68C \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}):m({visible:!0,desc:"\uC870\uD68C\uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.",type:"E"})}},Y=()=>{r.orderBy([],[])};return c.exports.useEffect(()=>{p.HotKey&&p.HotKey.pgmid===N&&(p.HotKey.key==="SEARCH"&&S(),p.HotKey.key==="NEW"&&b())},[p.HotKey]),c.exports.useEffect(()=>{const e=d().startOf("month");B(o=>({...o,frDate:e.toDate()})),M(),v()},[]),t.createElement(t.Fragment,null,t.createElement(z,{pgmid:N,visible:"11000",onNew:b,onSearch:S}),t.createElement(k,{className:"mainCon"},t.createElement(s,{style:{width:"100%",backgroundColor:"#f9f9f9",borderRadius:"5px",display:"flex",flexDirection:"column",padding:5}},t.createElement(s,{style:{display:"flex",alignItems:"center"}},t.createElement(s,{className:l.S1},t.createElement(s,{className:l.S2},"\uC678\uC8FC\uCC98")),t.createElement(U.exports.TextBox,{placeholder:"\uC678\uC8FC\uC5C5\uCCB4 \uC0AC\uC6A9\uC790\uAC00 \uC544\uB2D9\uB2C8\uB2E4",editable:!1,className:l.S4,value:i.custNm}),t.createElement(s,{className:l.S1},t.createElement(s,{className:l.S2},"\uBC1C\uD589\uC77C\uC790")),t.createElement(s,{style:{display:"flex",alignItems:"center"}},t.createElement(R,{inputCls:"inputCls",className:l.S3,selected:i.frDate,inputId:x.Common.fMakeId("sDate"),onHandleDateChange:e=>x.Common.fFieldChange(B,"frDate",e)}),t.createElement(s,{style:{margin:"0 10px",width:"10px"}},"~"),t.createElement(R,{inputCls:"inputCls",className:l.S3,selected:i.toDate,inputId:x.Common.fMakeId("eDate"),onHandleDateChange:e=>x.Common.fFieldChange(B,"toDate",e)})))),t.createElement(s,null,t.createElement(s,{className:l.TitleBox4,style:{marginTop:30,width:250}},t.createElement("span",{className:l.TitleText3},"\uAC70\uB798\uBA85\uC138\uC11C \uC870\uD68C")),t.createElement(s,{ref:E,style:{width:"100%",height:300,marginTop:10}})),t.createElement(s,null,t.createElement(s,{className:l.TitleBox4,style:{marginTop:30,width:250}},t.createElement("span",{className:l.TitleText3},"\uAC70\uB798\uBA85\uC138\uC11C \uC0C1\uC138\uC870\uD68C")),t.createElement(s,{ref:w,style:{width:"100%",height:300,marginTop:10}}))),t.createElement(P,{visible:h.visible,description:h.desc,type:h.type,onConfirm:()=>m({visible:!1})}))});let D,T,r,u;const W=I({S1:{margin:"3px 10px",backgroundColor:"#e0ecff",color:"#163971",padding:5,height:25,fontSize:"12px",display:"flex",alignItems:"center",width:110,fontWeight:600},S2:{width:100},S3:{"& .textbox-text":{fontSize:"12px"},"& .textbox":{fontSize:"12px"},"& .combo-arrow":{backgroundImage:`url(${H})`,backgroundRepeat:"no-repeat",backgroundColor:"#ffffff!important",height:12}},S4:{width:185,height:25,"& input":{fontSize:"12px !important"}},S5:{width:100,height:25,"& input":{fontSize:"12px !important"}},S6:{width:500,height:25,"& textarea":{fontSize:"12px !important",padding:"5px !important",fontFamily:"Noto Sans KR"}},TitleBox4:{margin:"5px 0px",backgroundColor:"#e0ecff",color:"#163971",padding:5,height:25,fontSize:"12px",display:"flex",alignItems:"center",fontWeight:600},TitleText3:{width:"100%"}});export{_ as default};
