import{r as x,R as a}from"./index.da6908f5.js";import{o as q,c as D,U as V,u as ee,f as oe,B as N,F as te,r as me,A as ne,d as ie}from"./App.11263b70.js";const ce=q(({inputCls:z,pgmid:F,inputType:u,id:s,title:P,helper:w,onConfirm:ae,ComponentValue:p,ComponentName:E,SetValue:j,boxStyles:H,labelStyles:W,inputStyles:L,disabled:R,editable:$,onTabEvent:T,inputRequired:A=!1})=>{const[O,I]=x.exports.useState({visible:!1,desc:"",type:"N"}),o=new V(F,I,!0,!0,!0,!0,!0),v=le(),g=x.exports.useRef(""),{$CommonStore:C}=ee(),[M,n]=x.exports.useState({CompValue:p,CompName:E}),[d,S]=x.exports.useState({visible:!1,description:"",value:"",datas:{},id:"",viewId:"",selectedData:{}}),G=()=>{K(C.Codeclass.selData),o.Common.fFieldChange(S,"visible",!1),C.fSetCodeclassPopup(!1)},J=()=>{document.getElementById(d.id).focus(),o.Common.fFieldChange(S,"visible",!1),C.fSetCodeclassPopup(!1)},y=()=>{const e=document.getElementsByClassName("inputCls"),m=Object.values(e).filter(r=>r.id.includes(F)),t=Number(document.getElementById(o.Common.fMakeId(s)).getAttribute("tabindex"))+1;for(let r=m.length;r--;){const c=Number(m[r].getAttribute("tabindex"));t===c&&setTimeout(()=>{m[r].focus()})}},Q=e=>{const m=document.getElementsByClassName("inputCls"),t=Object.values(m).filter(c=>c.id.includes(F)),r=Number(document.getElementById(o.Common.fMakeId(e)).getAttribute("tabindex"))+1;for(let c=t.length;c--;){const B=Number(t[c].getAttribute("tabindex"));r===B&&setTimeout(()=>{t[c-2].focus()})}},k=async(e,m,t="",r=!0,c=!1)=>{var B;let U={...w};m==="Cust"?B="selectByCustClass":(B="selectByTSqlItem",U.iCustNm=t);try{let f=await ie.get(`/@api/common/codeclass/${B}`,{params:U}),_=f.data[1],i={};_.map((l,b,h)=>{m==="Cust"?(l.custnm===(t.length>0&&t)||l.custcd===(t.length>0&&t))&&(i={...i,...h[b]}):m==="Pno"?(l.name===(t.length>0&&t)||l.pno===(t.length>0&&t))&&(i={...i,...h[b]}):m==="Dept"?(l.deptnm===(t.length>0&&t)||l.deptcd===(t.length>0&&t))&&(i={...i,...h[b]}):m==="Act"?(l.actnm3===(t.length>0&&t)||l.actcod===(t.length>0&&t))&&(i={...i,...h[b]}):m==="Whs"?(l.wrhnm===(t.length>0&&t)||l.wrhcd===(t.length>0&&t))&&(i={...i,...h[b]}):(l.minornm===(t.length>0&&t)||l.minorcd===(t.length>0&&t))&&(i={...i,...h[b]})}),c?(S({visible:!0,datas:f.data,desc:f.data[2][0].Remark,value:t,id:o.Common.fMakeId(s),viewId:e,selectedData:C.Codeclass.selData}),C.fSetCodeclassPopup(!0)):Object.keys(i).length<1&&r?(S({visible:!0,datas:f.data,desc:f.data[2][0].Remark,value:t,id:o.Common.fMakeId(s),viewId:e,selectedData:C.Codeclass.selData}),C.fSetCodeclassPopup(!0)):Object.keys(i).length>0&&(T?T():y(),K(i))}catch(f){if(f.response&&f.response.status===404){I({visible:!0,desc:"\uC870\uD68C\uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."});return}else{I({visible:!0,desc:"\uC870\uD68C\uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4."+f});return}}},K=e=>{switch(u){case"Dept":o.Common.fMultiFieldChange(n,{CompValue:o.Common.fTrim(e.deptcd),CompName:o.Common.fTrim(e.deptnm)});break;case"Pno":o.Common.fMultiFieldChange(n,{CompValue:o.Common.fTrim(e.pno),CompName:o.Common.fTrim(e.name)});break;case"Cust":o.Common.fMultiFieldChange(n,{CompValue:o.Common.fTrim(e.custcd),CompName:o.Common.fTrim(e.custnm+"("+o.Common.fTrim(e.taxno)+")")}),C.fSetParameter([e.taxno,e.custnm]);break;case"Act":o.Common.fMultiFieldChange(n,{CompValue:o.Common.fTrim(e.actcod),CompName:o.Common.fTrim(e.actnm3)});break;case"Whs":o.Common.fMultiFieldChange(n,{CompValue:o.Common.fTrim(e.wrhcd),CompName:o.Common.fTrim(e.wrhnm)});break;case"Whcd":o.Common.fMultiFieldChange(n,{CompValue:o.Common.fTrim(e.wrhcd),CompName:o.Common.fTrim(e.wrhnm)});break;case"Man":o.Common.fMultiFieldChange(n,{CompValue:o.Common.fTrim(e.pno),CompName:o.Common.fTrim(e.name)});break;case"Lcno":o.Common.fMultiFieldChange(n,{CompValue:o.Common.fTrim(e.lcno),CompName:o.Common.fTrim(e.lcno)});break;case"Good":o.Common.fMultiFieldChange(n,{CompValue:o.Common.fTrim(e.goodno),CompName:o.Common.fTrim(e.lcno)});break;case"Card":o.Common.fMultiFieldChange(n,{CompValue:o.Common.fTrim(e.cardcd),CompName:o.Common.fTrim(e.cardno.substr(0,19))});break;default:P==="\uAE08\uC735\uAE30\uAD00"?o.Common.fMultiFieldChange(n,{CompValue:o.Common.fTrim(e.minorcd),CompName:o.Common.fTrim(e.minornm)+"("+o.Common.fTrim(e.item1)+")"}):o.Common.fMultiFieldChange(n,{CompValue:o.Common.fTrim(e.minorcd),CompName:o.Common.fTrim(e.minornm)});break}},X=e=>{g.current=e},Y=(e,m)=>{e.key==="Enter"?e.target.value||A?(o.Common.fMultiFieldChange(n,{CompValue:void 0,CompName:void 0}),k(m,u,e.target.value,!0)):y():e.key==="Tab"&&(e.shiftKey?Q():e.target.value||A?k(m,u,e.target.value,!0):T?T():y()),e.ctrlKey&&e.which===32&&k(m,u,e.target.value,!0,!0)},Z=e=>{(e.key==="Backspace"||e.key==="Delete")&&(C.fSetCodeclass({selData:{},inputId:o.Common.fMakeId(s),inputName:s,inputType:"DEL",isHelper:w}),o.Common.fMultiFieldChange(n,{CompValue:void 0,CompName:void 0}))};return x.exports.useEffect(()=>{j(s,M.CompValue,M.CompName),setTimeout(()=>{y()},200)},[M.CompName]),x.exports.useEffect(()=>{o.Common.fMultiFieldChange(n,{CompValue:p}),g.current=p,p!==""&&p!==void 0&&E===""&&E===void 0&&k(o.Common.fMakeId(s),u,g.current===null?"":g.current,!1)},[p]),a.createElement(a.Fragment,null,a.createElement(oe,{visible:d.visible,description:d.desc,value:d.value,datas:d.datas,id:d.id,viewId:d.viewId,selectedData:d.selectedData,width:800,onCancel:()=>o.Common.fCancel(s),setVisibleData:G,setVisibleCancel:J}),a.createElement(N,{className:v.BoxAlignStyle,style:H},a.createElement(N,{className:v.TitleBox,style:W},a.createElement("span",{className:v.TitleText},P),A&&a.createElement(N,{className:v.TitleBoxR},a.createElement(te,{size:10}))),w&&a.createElement(N,{onKeyDown:e=>{Y(e,s)},onKeyUp:e=>{Z(e)}},a.createElement(me.exports.TextBox,{key:o.Common.fMakeId(s),inputCls:z,inputId:o.Common.fMakeId(s),placeholder:"",className:v.InputBox,onChange:e=>X(e),value:M.CompValue,style:L,name:s,disabled:R,editable:$,addonRight:()=>a.createElement(N,{className:"textbox-icon icon-search",title:"Codeclass",onClick:()=>{R||k(o.Common.fMakeId(s),u,g.current===null?"":g.current,!0,!0)}})}))),a.createElement(ne,{visible:O.visible,description:O.desc,type:O.type,onConfirm:()=>I({visible:!1})}))}),se={TitleBox:{margin:"3px 15px",backgroundColor:"#e0ecff",color:"#163971",padding:5,height:25,fontSize:"12px",alignItems:"center",width:110,fontWeight:600,display:"inline-block",position:"relative"},TitleBoxR:{position:"absolute",right:5,top:4,color:"#ffa8a8"},TitleText:{width:100},SB5:{width:77,height:25,"& input":{fontSize:"12px !important",textAlign:"center",color:"#424242"}},InputBox:{width:185,height:25,"& input":{fontSize:"12px !important"},"& textarea":{fontSize:"12px !important",fontFamily:"Noto Sans KR"}},RadioLabel:{display:"flex",alignItems:"center",height:20,width:50,fontSize:12,margin:"0px 1px"},BoxAlignStyle:{marginTop:3,display:"flex",alignItems:"end"}},le=D(se);export{ce as A};
