import{r as c,R as e}from"./index.da6908f5.js";import{m as a,h as Z,d as L,o as H,B as u,c as _,u as ee,U as te,P as X,r as T,A as ae,C as ie}from"./App.11263b70.js";import{C as ne,c as oe}from"./CommonButton.0b792d77.js";import{C as V}from"./CodeHelperPopup.3932fdb9.js";import{H as re}from"./HeaderList.b90f1652.js";const se=[{fieldName:"Factory",dataType:a.exports.ValueType.TEXT},{fieldName:"KeyNo",dataType:a.exports.ValueType.TEXT},{fieldName:"MenuName",dataType:a.exports.ValueType.TEXT},{fieldName:"PgmId",dataType:a.exports.ValueType.TEXT},{fieldName:"PgmNm",dataType:a.exports.ValueType.TEXT},{fieldName:"PgmGb",dataType:a.exports.ValueType.TEXT},{fieldName:"PgmGbNm",dataType:a.exports.ValueType.TEXT},{fieldName:"Above",dataType:a.exports.ValueType.TEXT},{fieldName:"AboveNm",dataType:a.exports.ValueType.TEXT},{fieldName:"Path",dataType:a.exports.ValueType.TEXT},{fieldName:"Dept",dataType:a.exports.ValueType.TEXT},{fieldName:"SortNo",dataType:a.exports.ValueType.NUMBER},{fieldName:"UseYn",dataType:a.exports.ValueType.TEXT},{fieldName:"Checked",dataType:a.exports.ValueType.TEXT}],ue=[{name:"MenuName",fieldName:"MenuName",type:"data",width:"400",header:{text:"\uBA54\uB274\uBA85",showTooltip:!0},renderer:{type:"text",showTooltip:!0},styleName:"left-column"},{name:"PgmId",fieldName:"PgmId",type:"data",width:"300",header:{text:"\uD504\uB85C\uADF8\uB7A8ID",showTooltip:!0},renderer:{type:"text",showTooltip:!0},styleName:"left-column"}],le=[{fieldName:"Factory",dataType:a.exports.ValueType.TEXT},{fieldName:"PgmId",dataType:a.exports.ValueType.TEXT},{fieldName:"PgmNm",dataType:a.exports.ValueType.TEXT},{fieldName:"PgmGb",dataType:a.exports.ValueType.TEXT},{fieldName:"PgmGbNm",dataType:a.exports.ValueType.TEXT},{fieldName:"Above",dataType:a.exports.ValueType.TEXT},{fieldName:"AboveNm",dataType:a.exports.ValueType.TEXT},{fieldName:"Path",dataType:a.exports.ValueType.TEXT},{fieldName:"Dept",dataType:a.exports.ValueType.TEXT},{fieldName:"SortNo",dataType:a.exports.ValueType.NUMBER},{fieldName:"UseYn",dataType:a.exports.ValueType.TEXT},{fieldName:"Checked",dataType:a.exports.ValueType.TEXT}],me=[{name:"PgmGbNm",fieldName:"PgmGbNm",type:"data",width:"40",header:{text:"\uBAA8\uB4C8\uBA85",showTooltip:!0},renderer:{type:"text",showTooltip:!0},styleName:"left-column"},{name:"AboveNm",fieldName:"AboveNm",type:"data",width:"80",header:{text:"\uD558\uC704\uBAA8\uB4C8\uBA85",showTooltip:!0},renderer:{type:"text",showTooltip:!0},styleName:"left-column"},{name:"PgmId",fieldName:"PgmId",type:"data",width:"150",header:{text:"\uD504\uB85C\uADF8\uB7A8ID",showTooltip:!0},renderer:{type:"text",showTooltip:!0},styleName:"left-column"},{name:"PgmNm",fieldName:"PgmNm",type:"data",width:"150",header:{text:"\uD504\uB85C\uADF8\uB7A8\uBA85",showTooltip:!0},renderer:{type:"text",showTooltip:!0},styleName:"left-column"}],de={DateTitleBox:{margin:"5px 10px 0px 15px",backgroundColor:"#e0ecff",padding:5,color:"#163971",height:25,fontSize:"12px",display:"flex",width:85,alignItems:"center",fontWeight:600},TitleBox4:{backgroundColor:"#fccf76",color:"#163971",padding:5,height:20,fontSize:"12px",display:"flex",alignItems:"center",width:"100%",fontWeight:600},TitleText3:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},InputBox3:{marginTop:5,width:120,height:25,"& input":{fontSize:"12px !important"}},Scroll:{"& .mainCon":{height:"700px",padding:"10px"}}};function ce(){const[t,n]=c.exports.useState({SchPgmGb:"",SchPgmGbNm:"",Pno:"",PnoNm:"",CopyPno:"",CopyPnoNm:""}),[h,l]=c.exports.useState(""),[o,m]=c.exports.useState({visible:!1,desc:"",type:"N"}),[d,r]=c.exports.useState({visible:!1,desc:"",id:""}),[C,g]=c.exports.useState({visible:!1,description:"",value:"",datas:{},id:"",viewId:"",selectedData:{}});return String.prototype.DateValidation=function(i){return new Date(this)instanceof Date&&!isNaN(new Date(this))?Z(this).format(i):null},{searchVO:t,setSearchVO:n,gridFocus:h,setGridFocus:l,alert:o,setAlert:m,confirm:d,setConfirm:r,codeClassInputs:C,setCodeClassInputs:g}}const Ce=async t=>{t({SchPgmGb:"",SchPgmGbNm:"",Pno:"",PnoNm:"",CopyPno:"",CopyPnoNm:""},50)},G=async(t,n,h,l,o,m)=>{const d={...n},r=await t.Util.Command.fSearchByReturn("/@api/admin/menuAuth/selectByList",d);r!==void 0&&(h.setRows(r.List1,"KeyNo",!0,"","iconField"),l.setRows(r.List2),o.expandAll(),m.expandAll())},pe=async(t,n,h,l,o,m)=>{m.commit(!0);const d={...n};d.Factory=t.User.user.factory,d.iUserPno=t.User.user.userid;let r=[];if(t.Util.Grid.fCheckGridDataAll(l,r,{},"\uBA54\uB274")===void 0)try{const i=(await L.post("/@api/admin/menuAuth/updateByList",{header:d,detail:r})).data;if(i.errmess!==""){t.setAlert({visible:!0,desc:i.errmess,type:"E"});return}t.setAlert({visible:!0,desc:"\uBB38\uC11C \uC800\uC7A5\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."}),setTimeout(async()=>{await G(t,n,h,l,o,m)},500)}catch(g){t.setAlert({visible:!0,desc:`\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.${g}`})}},fe=async(t,n,h,l,o,m)=>{m.commit(!0);const d={...n};d.Factory=t.User.user.factory,d.iUserPno=t.User.user.userid;try{const C=(await L.post("/@api/admin/menuAuth/updateByCopy",{header:d})).data;if(C.errmess!==""){t.setAlert({visible:!0,desc:C.errmess,type:"E"});return}t.setAlert({visible:!0,desc:"\uBB38\uC11C \uC800\uC7A5\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."}),setTimeout(async()=>{await G(t,n,h,l,o,m)},500)}catch(r){t.setAlert({visible:!0,desc:`\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.${r}`})}},ye=H(t=>{const n=c.exports.useRef(null),h=[""],l=async()=>{t.Util.Grid.fContainerInit(t.Util.Common.fMakeId(t.Id)),I=new a.exports.LocalTreeDataProvider(!1),P=new a.exports.TreeView(n.current),t.Util.Grid.fInitGridTree(P,I,t.GridFields,t.GridColumns),P.displayOptions.rowHeight=25,P.onValidateColumn=(o,m,d,r)=>{const C={};return h[0].includes(m.fieldName)&&(!r||r===void 0)&&(C.level="warning",C.message="\uD544\uC218 \uC785\uB825 \uAC12\uC785\uB2C8\uB2E4."),C},t.DataProviderBind(I),t.GridViewBind(P)};return c.exports.useEffect(()=>{l()},[]),e.createElement(e.Fragment,null,e.createElement(u,{ref:n,key:t.Util.Common.fMakeId(t.Id),id:t.Util.Common.fMakeId(t.Id),style:{width:"100%",height:t.Height}}))});let I,P;const Ae=H(()=>{const t="MENUAUTH",{$CommonStore:n,$UserStore:h}=ee(),l=he(),{searchVO:o,setSearchVO:m,alert:d,setAlert:r,confirm:C,setConfirm:g}=ce(),i=new te(t,r,!0,!0,!0,!0,!0),w=c.exports.useRef(!1),M=c.exports.useRef(""),K=c.exports.useRef(0),O=c.exports.useRef(0),A=c.exports.useRef(null),b=async()=>{n.fSetBinding(!0),await Ce(m),n.fSetBinding(!1),M.current="",i.Common.fSetTabIndex()},[D]=c.exports.useState({Util:i,User:h,fInit:b,setAlert:r}),z=p=>{B=p},j=p=>{N=p},W=p=>{x=p,x.setCheckBar({visible:!0,width:30}),x.onKeyDown=(f,s)=>{switch(f.commit(),s.code){case"Space":{const E=f.getCurrent().itemIndex;i.Common.fEmptyReturn(f.getValue(E,"PgmId"))!==""&&f.checkItem(E,!f.isCheckedItem(E))}break;case"ArrowRight":v();break;case"Tab":n.fGetShift()||y.setFocus();break}}},$=p=>{y=p,y.setStateBar({visible:!0}),y.onKeyDown=(f,s)=>{switch(f.commit(),s.code){case"ArrowLeft":k();break;case"Tab":n.fGetShift()&&x.setFocus();break}}},Y=async()=>{g({visible:!1,desc:"",id:""}),C.id==="SAVE"?await pe(D,o,B,N,x,y):C.id==="COPY"&&await fe(D,o,B,N,x,y)},J=()=>{g({visible:!1,desc:"",id:""}),A.current.focus()},v=async()=>{x.getCheckedRows(!0).some(f=>{const s=B.getJsonRow(f),E=y.getDataSource().getJsonRows();if(i.Common.fEmptyReturn(s.PgmId)!==""){if(E.some(Q=>{if(s.PgmId===Q.PgmId){w.current=!0;return}}),w.current){w.current=!1,x.checkAll(!1);return}y.getDataSource().addRow([s.Factory,s.PgmId,s.PgmNm,s.PgmGb,s.PgmGbNm,s.Above,s.AboveNm,s.Path]),x.checkAll(!1),y.setCurrent({dataRow:N.getJsonRows().length-1,column:0})}})},k=async()=>{const p=y.getCurrent().itemIndex;p!==-1&&y.getDataSource().removeRow(p)},S=(p,f,s)=>{if(!n.fGetBinding())switch(p){case"SchPgmGbNm":i.Common.fMultiFieldChange(m,{SchPgmGb:f,SchPgmGbNm:s});break;case"PnoNm":i.Common.fMultiFieldChange(m,{Pno:f,PnoNm:s});break;case"CopyPnoNm":i.Common.fMultiFieldChange(m,{CopyPno:f,CopyPnoNm:s});break}},q=async()=>{i.Common.fValidate(!o.PnoNm,"\uC0AC\uC6A9\uC790\uAC00 \uC120\uD0DD\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.")||i.Common.fValidate(!o.CopyPnoNm,"\uBCF5\uC0AC\uB300\uC0C1\uC774 \uC120\uD0DD\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.")||(A.current=document.activeElement,g({visible:!0,desc:`\uAD8C\uD55C\uBCF5\uC0AC\uB97C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? 
(\uAE30\uC874\uC5D0 \uBD80\uC5EC\uB41C \uAD8C\uD55C\uC740 \uC0AD\uC81C \uD6C4 \uBCF5\uC0AC\uB429\uB2C8\uB2E4)`,id:"COPY"}))},R=async()=>{b(),i.Common.fProviderClearRows(B),i.Common.fProviderClearRows(N)},F=async()=>{i.Common.fValidate(!o.PnoNm,"\uC0AC\uC6A9\uC790\uAC00 \uC120\uD0DD\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.")||await G(D,o,B,N,x,y)},U=async()=>{i.Common.fValidateElements({PnoNm:"\uC0AC\uC6A9\uC790"})||(A.current=document.activeElement,g({visible:!0,desc:"\uC800\uC7A5 \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",id:"SAVE"}))};return c.exports.useEffect(()=>{i.Common.fHotKey(n,n.isPopup,R,F,U)},[n.HotKey]),c.exports.useEffect(()=>(b(),()=>{n.fSetHotKey()}),[]),e.createElement(e.Fragment,null,e.createElement(ne,{pgmid:t,visible:"111000",onNew:R,onSearch:F,onSave:U}),e.createElement(X,{className:"mainCon"},e.createElement(T.exports.Layout,{style:{width:"100%",height:775}},e.createElement(T.exports.LayoutPanel,{region:"north",style:{height:47}},e.createElement(X,{className:l.Scroll},e.createElement(u,{style:{marginTop:5}},e.createElement(u,{display:"flex",alignItems:"center"},e.createElement(u,{style:{display:"flex",alignItems:"center"}},e.createElement(V,{inputCls:"inputCls",pgmid:t,inputType:"Pno",id:"PnoNm",title:"\uC0AC\uC6A9\uC790",helper:i.Common.fCreateHelper("B0012","001"),ComponentCode:o.Pno,ComponentValue:o.PnoNm,SetValue:S,labelStyles:{margin:"0px 0px 0px 10px",width:85},inputStyles:{margin:"0px 0px 0px 10px",width:150},inputRequired:!0}),e.createElement(V,{inputCls:"inputCls",pgmid:t,inputType:"",id:"SchPgmGbNm",title:"\uBAA8\uB4C8",helper:i.Common.fCreateHelper("M003"),ComponentCode:o.SchPgmGb,ComponentValue:o.SchPgmGbNm,SetValue:S,labelStyles:{margin:"0px 0px 0px 10px",width:85},inputStyles:{margin:"0px 0px 0px 10px",width:150}}),e.createElement(V,{inputCls:"inputCls",pgmid:t,inputType:"Pno",id:"CopyPnoNm",title:"\uC2E0\uADDC\uC0AC\uC6A9\uC790",helper:i.Common.fCreateHelper("B0012","001"),ComponentCode:o.CopyPno,ComponentValue:o.CopyPnoNm,SetValue:S,labelStyles:{margin:"0px 0px 0px 355px",width:85},inputStyles:{margin:"0px 0px 0px 10px",width:150}}),e.createElement(T.exports.LinkButton,{style:{width:120,height:25,color:"#424242",borderRadius:3,margin:"5px 0px 0px 15px"},onClick:()=>q()},e.createElement(u,{style:{height:30,display:"flex",alignItems:"center",justifyContent:"center"}},e.createElement(oe,{size:16}),e.createElement(u,{style:{marginLeft:5,fontSize:13,paddingBottom:2,fontWeight:530}},"\uAD8C\uD55C\uBCF5\uC0AC")))))))),e.createElement(T.exports.LayoutPanel,{region:"center"},e.createElement(T.exports.Layout,null,e.createElement(T.exports.LayoutPanel,{region:"west",style:{width:800,height:775}},e.createElement(u,{className:l.TitleBox4,style:{width:"100%"}},e.createElement(u,{className:l.TitleText3},"\uC804\uCCB4\uBA54\uB274")),e.createElement(u,null,e.createElement(ye,{Util:i,Id:"Grid1",GridTitle:"\uD5E4\uB354",Height:707,currentIndex:K,GridFields:se,GridColumns:ue,DataProviderBind:z,GridViewBind:W}))),e.createElement(T.exports.LayoutPanel,{region:"center",style:{height:775}},e.createElement(u,{style:{display:"flex",justifyContent:"center",marginTop:353}},e.createElement(T.exports.LinkButton,{style:{width:50,height:23,color:"#424242",borderRadius:3,marginLeft:0,marginTop:0},onClick:v},e.createElement(u,{style:{width:100,display:"flex",alignItems:"center",justifyContent:"center"}},e.createElement(u,{style:{fontSize:12,paddingBottom:2,fontWeight:500}},">>")))),e.createElement(u,{style:{display:"flex",justifyContent:"center",marginTop:10}},e.createElement(T.exports.LinkButton,{style:{width:50,height:23,color:"#424242",borderRadius:3,marginLeft:0,marginTop:0},onClick:k},e.createElement(u,{style:{width:100,display:"flex",alignItems:"center",justifyContent:"center"}},e.createElement(u,{style:{fontSize:12,paddingBottom:2,fontWeight:500}},"<<"))))),e.createElement(T.exports.LayoutPanel,{region:"east",style:{width:800,height:775}},e.createElement(u,{className:l.TitleBox4,style:{width:"100%"}},e.createElement(u,{className:l.TitleText3},"\uC0AC\uC6A9\uC790\uBCC4 \uBA54\uB274")),e.createElement(u,null,e.createElement(re,{Util:i,Id:"Grid2",GridTitle:"\uC0AC\uC6A9\uC790",Height:707,currentIndex:O,GridFields:le,GridColumns:me,DataProviderBind:j,GridViewBind:$}))))))),e.createElement(ae,{visible:d.visible,description:d.desc,type:d.type,onConfirm:()=>{r({visible:!1}),A.current&&A.current.focus()}}),e.createElement(ie,{visible:C.visible,description:C.desc,onCancel:J,onConfirm:Y}))});let B,N,x,y;const he=_(de);export{Ae as default};
