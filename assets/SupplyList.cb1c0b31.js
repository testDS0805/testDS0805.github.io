import{r as c,R as t}from"./index.da6908f5.js";import{m as l,o as B,B as i,h as d,d as F,u as R,c as U,U as b,P as k,A as L,r as v,q as Y}from"./App.11263b70.js";import{C as G}from"./CommonButton.0b792d77.js";import{C as T}from"./CommonDatePicker.d7bc57f8.js";import"./index.6f186c21.js";const M={SC1:{width:70,height:25,margin:"3px 10px",backgroundColor:"#e0ecff",color:"#163971",padding:5,fontSize:"12px",alignItems:"center",fontWeight:600,display:"flex"},SC4:{display:"flex",alignItems:"center"}},O=[{fieldName:"CustCd",dataType:l.exports.ValueType.TEXT},{fieldName:"SupNo",dataType:l.exports.ValueType.TEXT},{fieldName:"SupplyDate",dataType:l.exports.ValueType.TEXT},{fieldName:"Count",dataType:l.exports.ValueType.NUMBER},{fieldName:"Amount",dataType:l.exports.ValueType.NUMBER},{fieldName:"Tax",dataType:l.exports.ValueType.NUMBER},{fieldName:"OkAmt",dataType:l.exports.ValueType.NUMBER}],H=[{name:"SupplyDate",fieldName:"SupplyDate",type:"data",width:80,header:{text:"\uBC1C\uD589\uC77C\uC790"},renderer:{type:"text",showTooltip:!0}},{name:"SupNo",fieldName:"SupNo",type:"data",width:80,header:{text:"\uAC70\uB798\uBA85\uC138\uC11C \uBC88\uD638"},renderer:{type:"text",showTooltip:!0}},{name:"Count",fieldName:"Count",type:"data",width:80,styleName:"center-column",header:{text:"\uD488\uBAA9\uAC74\uC218"},numberFormat:"#,##0",renderer:{type:"text"}},{name:"Amount",fieldName:"Amount",type:"data",width:100,styleName:"right-column",header:{text:"\uACF5\uAE09\uAC00\uC561"},footer:{numberFormat:"#,##0",expression:"sum"},numberFormat:"#,##0",renderer:{type:"text"}},{name:"Tax",fieldName:"Tax",type:"data",width:100,styleName:"right-column",header:{text:"\uBD80\uAC00\uC138"},footer:{numberFormat:"#,##0",expression:"sum"},numberFormat:"#,##0",renderer:{type:"text",showTooltip:!0}},{name:"OkAmt",fieldName:"OkAmt",type:"data",width:100,styleName:"right-column",header:{text:"\uAC70\uB798\uAE08\uC561(VAT\uD3EC\uD568)"},footer:{numberFormat:"#,##0",expression:"sum"},numberFormat:"#,##0",renderer:{type:"text",showTooltip:!0}},{name:"Print",fieldName:"Print",type:"data",width:50,header:{text:"\uCD9C\uB825"},editable:!1,styleName:"center-column center_custom_renderer",renderer:"Renderer_PrintBtn"}],K=B(e=>{const r=c.exports.useRef(null),u=async()=>{e.Util.Grid.fContainerInit(e.Util.Common.fMakeId(e.Id)),y=new l.exports.LocalDataProvider(!1),p=new l.exports.GridView(r.current),e.Util.Grid.fInitGridHeader(p,y,e.GridFields,e.GridColumns,30,s,a,o,e.GridTitle),p.setFooters({visible:!0}),p.setRowIndicator({visible:!0}),p.displayOptions.rowHeight=35,e.DataProviderBind(y),e.GridViewBind(p),p.registerCustomRenderer("Renderer_PrintBtn",{initContent:function(n){n.appendChild(this._button1=document.createElement("span"))},canClick:function(){return!0},clearContent:function(n){n.innerHTML=""},render:function(n,f){this._value=n.getValue(f.index._itemIndex,"SupNo"),this._button1.className="grid_print_button"},click:function(n){n.preventDefault,n.target===this._button1&&e.fPrint(this._value)}})},s=async(n,f,h)=>{h>=0&&e.RowChanged(n,h)},a=async()=>{},o=async()=>{};return c.exports.useEffect(()=>{u()},[]),t.createElement(t.Fragment,null,t.createElement(i,{ref:r,key:e.Util.Common.fMakeId(e.id),id:e.Util.Common.fMakeId(e.Id),style:{width:"100%",height:e.Height}}))});let y,p;const $=(e,r)=>{e({SchCustCd:r.user.custcd,SchCustNm:r.user.custnm,SchFrDate:d().subtract(1,"month"),SchToDate:new Date,SchSupNo:"",SchAccunit:r.user.accunit,SchFactory:r.user.factory})},X=async(e,r,u,s)=>{if(e.Util.Common.fValidate(!d(r.SchFrDate,"YYYY-MM-DD").isValid()||!d(r.SchToDate,"YYYY-MM-DD").isValid(),"\uBC1C\uC8FC\uAE30\uAC04\uC744 \uBC14\uB974\uAC8C \uC785\uB825\uD574 \uC8FC\uC138\uC694.")||e.Util.Common.fValidate(d(r.SchFrDate).format("YYYYMMDD")>d(r.SchToDate).format("YYYYMMDD"),"\uC870\uD68C\uAE30\uAC04\uC744 \uD655\uC778\uD574 \uC8FC\uC138\uC694."))return;const a={...r};a.SchFrDate=d(a.SchFrDate).format("YYYYMMDD"),a.SchToDate=d(a.SchToDate).format("YYYYMMDD"),a.SchAccunit=e.User.user.accunit,a.SchFactory=e.User.user.factory,await e.Util.Command.fSearch(u,"/@api/supply/supplyList/selectByList",a,s)},q=async(e,r,u,s)=>{try{const a=await F.get("@api/supply/supplyItem/selectByPrint",{params:{CustCd:r.SchCustCd,SupNo:s.current,SchAccunit:e.User.user.accunit,SchFactory:e.User.user.factory}});if(!a.data)e.setAlert({visible:!0,desc:"\uCD9C\uB825\uC790\uB8CC \uC870\uD68C \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."});else{u(!0);const o='{ "data": '+JSON.stringify(a.data)+" }";e.Util.Report.fReport(o,"/\uC8FC\uBB38\uBC1C\uC8FC\uCC98\uB9AC_\uAC70\uB798\uBA85\uC138\uC11C.mrd","http://report.ehansun.co.kr/ReportingServer","http://hseerp.ehansun.co.kr/report")}}catch{e.setAlert({visible:!0,desc:"\uCD9C\uB825\uC790\uB8CC \uC870\uD68C\uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4."})}};function z(){const{$UserStore:e}=R(),[r,u]=c.exports.useState({SchCustCd:e.user.custcd,SchCustNm:e.user.custnm,SchFrDate:d().subtract(1,"month"),SchToDate:new Date,SchSupNo:"",SchAccunit:"",SchFactory:""}),[s,a]=c.exports.useState(!1),[o,n]=c.exports.useState({visible:!1,desc:"",type:"N"});return{searchVO:r,setSearchVO:u,printView:s,setPrintView:a,alert:o,setAlert:n}}const te=B(()=>{const e="SUPPLYLIST",{$CommonStore:r,$UserStore:u}=R(),s=J(),{searchVO:a,setSearchVO:o,printView:n,setPrintView:f,alert:h,setAlert:S}=z(),C=new b(e,"",!0,!0,!0,!0,!0),D=c.exports.useRef(0),A=c.exports.useRef(""),P=()=>{$(o,u)},[g]=c.exports.useState({Util:C,User:u,fInit:P,setAlert:S}),I=m=>{},V=m=>{E=m},N=(m,x)=>{D.current=x,A.current=E.getValue(x,"SupNo")},_=async()=>{await X(g,a,E,"\uB0A9\uD488 \uBAA9\uB85D")},w=async()=>{await q(g,a,f,A)};return c.exports.useEffect(()=>{C.Common.fHotKey(r,r.isPopup,_)},[r.HotKey]),t.createElement(t.Fragment,null,t.createElement(G,{pgmid:e,visible:"01000",onSearch:_}),t.createElement(k,{className:"mainCon"},t.createElement(i,{display:"flex",flexDirection:"column",alignItems:"flex-start",style:{padding:1,border:"1px solid #e2e2e2",borderRadius:5,backgroundColor:"#f9f9f9"}},t.createElement(i,{style:{marginTop:2,marginLeft:5,display:"flex",alignItems:"center"}},t.createElement(i,{className:s.SC4},t.createElement(i,{className:s.SC1},"\uAE30\uAC04"),t.createElement(T,{inputCls:"inputCls",selected:a.SchFrDate,inputId:C.Common.fMakeId("SchFrDate"),onHandleDateChange:m=>C.Common.fFieldChange(o,"SchFrDate",m)}),t.createElement(i,{style:{margin:"0 3px",width:"10px"}},"~"),t.createElement(T,{inputCls:"inputCls",selected:a.SchToDate,inputId:C.Common.fMakeId("SchToDate"),onHandleDateChange:m=>C.Common.fFieldChange(o,"SchToDate",m)})))),t.createElement(i,{style:{marginTop:5}},t.createElement(K,{Util:C,id:"Grid1",Height:730,currentIndex:D,GridFields:O,GridColumns:H,RowChanged:N,DataProviderBind:V,GridViewBind:I,fPrint:w}))),t.createElement(L,{visible:h.visible,description:h.desc,type:h.type,onConfirm:()=>S({visible:!1})}),n&&t.createElement(v.exports.Dialog,{title:t.createElement(i,{style:{display:"flex"}},t.createElement("img",{src:Y,alt:"logo",style:{width:"50px"}}),t.createElement(i,{style:{marginLeft:15}},"\uAC70\uB798\uBA85\uC138\uC11C \uCD9C\uB825")),style:{width:"1870px",height:"900px"},bodyCls:"f-column",closable:!0,draggable:!0,modal:!0,onClose:()=>f(!1)},t.createElement(i,{className:"f-full"},t.createElement("div",{id:"crownix-viewer",style:{position:"absolute",width:"100%",height:"100%"}}))))});let E;const J=U(M);export{te as default};
