import{r as E,R as t}from"./index.da6908f5.js";import{m as o,o as Ce,B as l,h as S,u as de,n as We,c as Te,U as De,r as g,A as Ne,d as Ee,P as se,F as ne,C as Oe}from"./App.11263b70.js";import{S as xe}from"./ReturnSalesStyle.00990502.js";import{A as Be,a as He,C as Ke}from"./CommonButton.0b792d77.js";import{C as z}from"./CommonDatePicker.d7bc57f8.js";import{C as j}from"./CodeHelperPopup.3932fdb9.js";import{A as Qe}from"./Approval.69c4f070.js";import{A as ze}from"./Attachments.19d97d2b.js";import"./index.6f186c21.js";import"./EvidenceViewer.5aab9677.js";const $e=[{fieldName:"Accunit",dataType:o.exports.ValueType.TEXT},{fieldName:"ApprDocProg",dataType:o.exports.ValueType.TEXT},{fieldName:"CreDate",dataType:o.exports.ValueType.DATE,datetimeFormat:"yyyyMMdd"},{fieldName:"CrePno",dataType:o.exports.ValueType.TEXT},{fieldName:"CustCD",dataType:o.exports.ValueType.TEXT},{fieldName:"CustCDNm",dataType:o.exports.ValueType.TEXT},{fieldName:"CustAddr1",dataType:o.exports.ValueType.TEXT},{fieldName:"CustTel",dataType:o.exports.ValueType.TEXT},{fieldName:"CustFax",dataType:o.exports.ValueType.TEXT},{fieldName:"DelStatus",dataType:o.exports.ValueType.TEXT},{fieldName:"DocStatus",dataType:o.exports.ValueType.TEXT},{fieldName:"ExpType",dataType:o.exports.ValueType.TEXT},{fieldName:"Factdivi",dataType:o.exports.ValueType.TEXT},{fieldName:"Factory",dataType:o.exports.ValueType.TEXT},{fieldName:"ForNo",dataType:o.exports.ValueType.TEXT},{fieldName:"ModDate",dataType:o.exports.ValueType.DATE,datetimeFormat:"yyyyMMdd"},{fieldName:"ModPno",dataType:o.exports.ValueType.TEXT},{fieldName:"OutReqYmd",dataType:o.exports.ValueType.DATE,datetimeFormat:"yyyyMMdd"},{fieldName:"PayCond",dataType:o.exports.ValueType.DATE,datetimeFormat:"yyyyMMdd"},{fieldName:"Remark",dataType:o.exports.ValueType.TEXT},{fieldName:"ResultDeptCd",dataType:o.exports.ValueType.TEXT},{fieldName:"ResultDeptCdNm",dataType:o.exports.ValueType.TEXT},{fieldName:"ResultPno",dataType:o.exports.ValueType.TEXT},{fieldName:"ResultPnoNm",dataType:o.exports.ValueType.TEXT},{fieldName:"Sliptyp",dataType:o.exports.ValueType.TEXT},{fieldName:"Vatcd",dataType:o.exports.ValueType.TEXT},{fieldName:"VatcdNm",dataType:o.exports.ValueType.TEXT}],Je=[{fieldName:"ApprDocProg",type:"data",width:80,header:{text:"\uC644\uACB0\uAD6C\uBD84"},styleName:"center-column"},{fieldName:"ForNo",type:"data",width:90,header:{text:"\uBC18\uD488\uC694\uCCAD\uBC88\uD638"},styleName:"center-column"},{fieldName:"OutReqYmd",type:"data",width:90,datetimeFormat:"yyyy-MM-dd",styleName:"center-column",header:{text:"\uBC18\uD488\uC694\uCCAD\uC77C"}},{fieldName:"CustCDNm",type:"data",width:110,styleName:"left-column",header:{text:"\uAC70\uB798\uCC98\uBA85"},renderer:{showTooltip:!0}}],_e=[{fieldName:"AcceptNo",dataType:o.exports.ValueType.TEXT},{fieldName:"Accunit",dataType:o.exports.ValueType.TEXT},{fieldName:"AcceptSeq",dataType:o.exports.ValueType.TEXT},{fieldName:"Amount",dataType:o.exports.ValueType.NUMBER},{fieldName:"CreDate",dataType:o.exports.ValueType.DATE,datetimeFormat:"yyyyMMdd"},{fieldName:"CrePno",dataType:o.exports.ValueType.TEXT},{fieldName:"ExpType",dataType:o.exports.ValueType.TEXT},{fieldName:"Factory",dataType:o.exports.ValueType.TEXT},{fieldName:"ForNo",dataType:o.exports.ValueType.TEXT},{fieldName:"ForSeq",dataType:o.exports.ValueType.TEXT},{fieldName:"GoodCd",dataType:o.exports.ValueType.TEXT},{fieldName:"GoodNo",dataType:o.exports.ValueType.TEXT},{fieldName:"GoodCdNm",dataType:o.exports.ValueType.TEXT},{fieldName:"GoodSpec",dataType:o.exports.ValueType.TEXT},{fieldName:"ModDate",dataType:o.exports.ValueType.DATE,datetimeFormat:"yyyyMMdd"},{fieldName:"ModPno",dataType:o.exports.ValueType.TEXT},{fieldName:"No",dataType:o.exports.ValueType.TEXT},{fieldName:"Price",dataType:o.exports.ValueType.NUMBER},{fieldName:"Qty",dataType:o.exports.ValueType.NUMBER},{fieldName:"Remark",dataType:o.exports.ValueType.TEXT},{fieldName:"Tax",dataType:o.exports.ValueType.NUMBER},{fieldName:"Total",dataType:o.exports.ValueType.NUMBER},{fieldName:"UnitCd",dataType:o.exports.ValueType.TEXT},{fieldName:"UnitCdNm",dataType:o.exports.ValueType.TEXT},{fieldName:"Whcd",dataType:o.exports.ValueType.TEXT},{fieldName:"WhcdNm",dataType:o.exports.ValueType.TEXT}],je=[{name:"No",fieldName:"No",width:50,styleName:"center-column rg-lightdisable-cell",editable:!1,header:{text:"NO",showTooltip:!0},renderer:{type:"text",showTooltip:!0}},{fieldName:"GoodNo",width:170,styleName:"left-column rg-lightdisable-cell",editable:!1,header:{text:"\uD488\uBC88"},renderer:{type:"text",showTooltip:!0}},{fieldName:"GoodSpec",width:100,styleName:"left-column rg-lightdisable-cell",editable:!1,header:{text:"\uADDC\uACA9"},renderer:{type:"text",showTooltip:!0}},{fieldName:"GoodCdNm",width:150,styleName:"left-column rg-lightdisable-cell",editable:!1,header:{text:"\uD488\uBA85"},renderer:{type:"text",showTooltip:!0}},{fieldName:"WhcdNm",width:80,styleName:"left-column rg-lightdisable-cell",editable:!1,header:{text:"\uCD9C\uACE0\uCC3D\uACE0"},renderer:{type:"text",showTooltip:!0}},{fieldName:"UnitCdNm",width:60,styleName:"center-column rg-lightdisable-cell",editable:!1,header:{text:"\uCD9C\uACE0\uB2E8\uC704"},renderer:{type:"text",showTooltip:!0}},{fieldName:"Qty",width:60,styleName:"right-column",numberFormat:"#,##0.##",header:{text:"\uC694\uCCAD\uC218\uB7C9"},renderer:{type:"text",showTooltip:!0},editor:{type:"number",editFormat:"#,##0.##"},footer:{numberFormat:"#,##0.##",expression:"sum"}},{fieldName:"Price",width:70,styleName:"right-column rg-lightdisable-cell",editable:!1,numberFormat:"#,##0.##",header:{text:"\uB2E8\uAC00"},renderer:{type:"text",showTooltip:!0},editor:{type:"number",editFormat:"#,##0"}},{fieldName:"Amount",width:80,styleName:"right-column rg-lightdisable-cell",numberFormat:"#,##0",editable:!1,header:{text:"\uACF5\uAE09\uAC00\uC561"},renderer:{type:"text",showTooltip:!0},editor:{type:"number",editFormat:"#,##0"},footer:{numberFormat:"#,##0",expression:"sum"}},{fieldName:"Tax",width:70,styleName:"right-column rg-lightdisable-cell",numberFormat:"#,##0",editable:!1,header:{text:"\uBD80\uAC00\uC138"},renderer:{type:"text",showTooltip:!0},editor:{type:"number",editFormat:"#,##0"},footer:{numberFormat:"#,##0",expression:"sum"}},{fieldName:"Total",width:80,styleName:"right-column rg-lightdisable-cell",numberFormat:"#,##0",editable:!1,header:{text:"\uD569\uACC4\uAE08\uC561"},renderer:{type:"text",showTooltip:!0},editor:{type:"number",editFormat:"#,##0"},footer:{numberFormat:"#,##0",expression:"sum"}},{fieldName:"Remark",width:300,styleName:"left-column",placeHolder:"\uCD5C\uB30060\uC790",header:{text:"\uBE44\uACE0"},renderer:{type:"text",showTooltip:!0},editor:{maxLength:60}}],ye=[{fieldName:"AcceptNo",dataType:o.exports.ValueType.TEXT},{fieldName:"AcceptSeq",dataType:o.exports.ValueType.TEXT},{fieldName:"Accunit",dataType:o.exports.ValueType.TEXT},{fieldName:"Amount",dataType:o.exports.ValueType.NUMBER},{fieldName:"Factory",dataType:o.exports.ValueType.TEXT},{fieldName:"Foroutno",dataType:o.exports.ValueType.TEXT},{fieldName:"Foroutseq",dataType:o.exports.ValueType.TEXT},{fieldName:"GoodCd",dataType:o.exports.ValueType.TEXT},{fieldName:"Goodnm",dataType:o.exports.ValueType.TEXT},{fieldName:"Goodno",dataType:o.exports.ValueType.TEXT},{fieldName:"Price",dataType:o.exports.ValueType.NUMBER},{fieldName:"Remark",dataType:o.exports.ValueType.TEXT},{fieldName:"Spec",dataType:o.exports.ValueType.TEXT},{fieldName:"Tax",dataType:o.exports.ValueType.NUMBER},{fieldName:"Total",dataType:o.exports.ValueType.NUMBER},{fieldName:"Unitcd",dataType:o.exports.ValueType.TEXT},{fieldName:"Unitnm",dataType:o.exports.ValueType.TEXT},{fieldName:"Whcd",dataType:o.exports.ValueType.TEXT},{fieldName:"WrhNm",dataType:o.exports.ValueType.TEXT},{fieldName:"Qty",dataType:o.exports.ValueType.NUMBER},{fieldName:"selectFlag",dataType:o.exports.ValueType.TEXT}],Ze=[{fieldName:"Foroutno",width:40,styleName:"center-column",header:{text:"\uCD9C\uD558\uC9C0\uC2DC\uBC88\uD638"}},{fieldName:"Foroutseq",width:35,styleName:"center-column",header:{text:"\uCD9C\uD558\uC9C0\uC2DC\uC21C\uBC88"}},{fieldName:"AcceptNo",width:40,styleName:"center-column",header:{text:"\uC218\uC8FC\uBC88\uD638"}},{fieldName:"AcceptSeq",width:25,styleName:"center-column",header:{text:"\uC218\uC8FC\uC21C\uBC88"}},{fieldName:"Goodno",width:50,styleName:"left-column",header:{text:"\uD488\uBC88"},renderer:{type:"text",showTooltip:!0}},{fieldName:"Goodnm",width:55,styleName:"left-column",header:{text:"\uD488\uBA85"},renderer:{type:"text",showTooltip:!0}},{fieldName:"Spec",width:60,styleName:"left-column",header:{text:"\uADDC\uACA9"},renderer:{type:"text",showTooltip:!0}},{fieldName:"WrhNm",width:40,styleName:"center-column",header:{text:"\uCD9C\uACE0\uCC3D\uACE0"}},{fieldName:"Unitnm",width:25,styleName:"center-column",header:{text:"\uCD9C\uACE0\uB2E8\uC704"}},{fieldName:"Qty",width:30,styleName:"right-column",numberFormat:"#,##0",header:{text:"\uC694\uCCAD\uC218\uB7C9"},renderer:{type:"text",showTooltip:!0}},{fieldName:"Price",width:30,styleName:"right-column",numberFormat:"#,##0",header:{text:"\uB2E8\uAC00"},renderer:{type:"text",showTooltip:!0}},{fieldName:"Amount",width:40,styleName:"right-column",numberFormat:"#,##0",header:{text:"\uACF5\uAE09\uAC00\uC561"},renderer:{type:"text",showTooltip:!0}},{fieldName:"Tax",width:40,styleName:"right-column",numberFormat:"#,##0",header:{text:"\uBD80\uAC00\uC138"},renderer:{type:"text",showTooltip:!0}},{fieldName:"Total",width:40,styleName:"right-column",numberFormat:"#,##0",header:{text:"\uD569\uACC4\uAE08\uC561"},renderer:{type:"text",showTooltip:!0}},{fieldName:"Remark",width:80,styleName:"left-column",header:{text:"\uBE44\uACE0"},renderer:{type:"text",showTooltip:!0}}],et=[{fieldName:"Foroutno",width:50,styleName:"center-column",header:{text:"\uCD9C\uD558\uC9C0\uC2DC\uBC88\uD638"}},{fieldName:"Foroutseq",width:40,styleName:"center-column",header:{text:"\uCD9C\uD558\uC9C0\uC2DC\uC21C\uBC88"}},{fieldName:"AcceptNo",width:50,styleName:"center-column",header:{text:"\uC218\uC8FC\uBC88\uD638"}},{fieldName:"AcceptSeq",width:40,styleName:"center-column",header:{text:"\uC218\uC8FC\uC21C\uBC88"}},{fieldName:"Goodno",width:40,styleName:"center-column",header:{text:"\uD488\uBC88"},renderer:{type:"text",showTooltip:!0}},{fieldName:"Goodnm",width:50,styleName:"left-column",header:{text:"\uD488\uBA85"},renderer:{type:"text",showTooltip:!0}},{fieldName:"Spec",width:50,styleName:"left-column",header:{text:"\uADDC\uACA9"},renderer:{type:"text",showTooltip:!0}},{fieldName:"WrhNm",width:40,styleName:"center-column",header:{text:"\uCD9C\uACE0\uCC3D\uACE0"}},{fieldName:"Unitnm",width:30,styleName:"center-column",header:{text:"\uCD9C\uACE0\uB2E8\uC704"}},{fieldName:"Qty",width:30,styleName:"right-column",numberFormat:"#,##0",header:{text:"\uC694\uCCAD\uC218\uB7C9"},renderer:{type:"text",showTooltip:!0}},{fieldName:"Price",width:30,styleName:"right-column",numberFormat:"#,##0",header:{text:"\uB2E8\uAC00"},renderer:{type:"text",showTooltip:!0}},{fieldName:"Amount",width:40,styleName:"right-column",numberFormat:"#,##0",header:{text:"\uACF5\uAE09\uAC00\uC561"},renderer:{type:"text",showTooltip:!0}},{fieldName:"Tax",width:40,styleName:"right-column",numberFormat:"#,##0",header:{text:"\uBD80\uAC00\uC138"},renderer:{type:"text",showTooltip:!0}},{fieldName:"Total",width:40,styleName:"right-column",numberFormat:"#,##0",header:{text:"\uD569\uACC4\uAE08\uC561"},renderer:{type:"text",showTooltip:!0}},{fieldName:"Remark",width:80,styleName:"left-column",header:{text:"\uBE44\uACE0"},renderer:{type:"text",showTooltip:!0}}],tt=Ce(a=>{const p=E.exports.useRef(null),h=async()=>{a.Util.Grid.fContainerInit(a.Util.Common.fMakeId(a.Id)),ie=new o.exports.LocalDataProvider(!1),Q=new o.exports.GridView(p.current),a.Util.Grid.fInitGridHeader(Q,ie,a.GridFields,a.GridColumns,30,s,m,c,a.GridTitle),Q.setRowIndicator({visible:!1}),Q.onCellDblClicked=function(){document.getElementById(a.Util.Common.fMakeId("OutReqYmd")).focus()},Q.setRowStyleCallback((r,i)=>{if(r.getValue(i.index,"ApprDocProg")==="\uBC18\uB824")return"rg-column-color-1";if(r.getValue(i.index,"ApprDocProg")==="\uC644\uACB0")return"rg-column-color-3";if(r.getValue(i.index,"ApprDocProg")==="\uC9C4\uD589\uC911")return"rg-column-color-2"}),a.DataProviderBind(ie),a.GridViewBind(Q)},s=async(r,i,A)=>{A>=0&&a.RowChanged(r,A)},m=(r,i)=>{a.currentIndex.current===i.dataRow&&i.dataRow>=0&&a.RowChanged(r,i.dataRow)},c=async(r,i)=>{switch(i.key){case(i.shiftKey&&"Tab"):i.preventDefault(),document.getElementById(a.Util.Common.fMakeId("SchText")).focus();break;case"Tab":i.preventDefault(),document.getElementById(a.Util.Common.fMakeId("SchFrDate")).focus();break}};return E.exports.useEffect(()=>{h()},[]),t.createElement(t.Fragment,null,t.createElement(l,{ref:p,key:a.Util.Common.fMakeId(a.Id),id:a.Util.Common.fMakeId(a.Id),style:{width:"100%",height:a.Height}}))});let ie,Q;function ge(){const[a,p]=E.exports.useState({SchAccunit:"",SchFactory:"",SchFrDate:S().clone().startOf("year").toDate(),SchToDate:new Date,SchCust:"",SchCustNm:"",SchCompleteType:"1",SchType:"0",SchText:""}),[h,s]=E.exports.useState({Accunit:"",CreDate:"",CrePno:"",CustCD:"",CustCDNm:"",CustAddr1:"",CustTel:"",CustFax:"",DelStatus:"",ExpType:"",Factdivi:"",Factory:"",ForNo:"",ModDate:"",ModPno:"",OutReqYmd:"",PayCond:"",Remark:"",ResultDeptCd:"",ResultDeptCdNm:"",ResultPno:"",ResultPnoNm:"",Sliptyp:"",Vatcd:"",VatcdNm:"",DocSource:"RT",UserId:""}),[m,c]=E.exports.useState(""),[r,i]=E.exports.useState({visible:!1,desc:"",type:"N"}),[A,k]=E.exports.useState({visible:!1,desc:"",id:""}),[T,n]=E.exports.useState(!1),[x,D]=E.exports.useState({visible:!1}),f=["103011","103013","103015"],B=["No","GoodCdNm","WhcdNm","UnitCdNm","Qty"],[R]=E.exports.useState([{value:"0",text:"\uBC18\uD488\uC694\uCCAD\uBC88\uD638"},{value:"1",text:"\uBC18\uD488\uC694\uCCAD\uC77C"},{value:"2",text:"\uAC70\uB798\uCC98\uBA85"}]),[G]=E.exports.useState({PayCond:"required",OutReqYmd:"required",GoodSpec:"required",CustCD:"required",CustCDNm:"required",ResultDeptCd:"required",ResultDeptCdNm:"required",ResultPno:"required",ResultPnoNm:"required",Vatcd:"required",VatcdNm:"required",Remark:"required"});return{searchVO:a,setSearchVO:p,headerVO:h,setHeaderVO:s,gridFocus:m,setGridFocus:c,cboSchType:R,headerRules:G,alert:r,setAlert:i,confirm:A,setConfirm:k,salesSearch:x,setSalesSearch:D,attachView:T,setAttachView:n,vatInfo:f,validationField:B}}const at=Ce(a=>{const p=E.exports.useRef(null),{validationField:h,vatInfo:s}=ge(),{$UserStore:m}=de(),c=async()=>{a.Util.Grid.fContainerInit(a.Util.Common.fMakeId(a.Id)),V=new o.exports.LocalDataProvider(!1),P=new o.exports.GridView(p.current),a.Util.Grid.fInitGridDetail(P,V,a.GridFields,a.GridColumns,r,i,k),P.setRowIndicator({visible:!1}),P.setFooters({visible:!0}),P.onCellClicked=function(T,n){n.dataRow>=0&&a.setGridFocus("D")},P.onValidateColumn=(T,n,x,D)=>{const f={};return h.includes(n.fieldName)&&(!D||D===void 0)&&(f.level="warning",f.message="\uD544\uC218 \uC785\uB825 \uAC12\uC785\uB2C8\uB2E4."),f},V.onRowInserted=(T,n)=>{a.Util.Grid.fSetMultiDataProvider(T,n,{No:We(n+1).format("000"),Accunit:m.user.accunit,Factory:m.user.factory})},a.DataProviderBind(V),a.GridViewBind(P),P.getDataSource().addRow([])},r=async()=>{},i=async(T,n)=>{T.commit(),a.setGridFocus("D");const{column:x}=T.getCurrent(),D=V.getJsonRow(n);if(x==="Qty"){V.setValue(n,"Qty",Math.abs(D.Qty)*-1);const f=V.getValue(n,"Qty");if(s.includes(a.vatCd.current)){let B=0;B=Math.round(f*D.Price*.1),V.setValue(n,"Amount",Math.round(f*D.Price)),V.setValue(n,"Tax",B),V.setValue(n,"Total",Math.round(f*D.Price)+B)}else V.setValue(n,"Amount",Math.round(f*D.Price)),V.setValue(n,"Tax",0),V.setValue(n,"Total",Math.round(f*D.Price))}},A=T=>{const n=V.getAllStateRows().created;if(n.length>0){let x=0;return n.map(D=>{if(T===void 0||D>=T){const f=P.getValues(D);(!f.GoodCd||f.GoodCd===void 0||!f.Qty||f.Qty===void 0)&&(x+=1)}}),x}return 0},k=async(T,n)=>{const x="Remark",D=T.getDataSource().getRowCount(),{itemIndex:f}=T.getCurrent(),{fieldName:B}=T.getCurrent(),R=V.getJsonRows(),G=R.length-1;switch(n.key){case"Enter":a.setAlert({visible:!1,desc:""}),T.commit(!0),B===x&&a.Util.Grid.fEnterLastField(T,f,D,A()===0);break;case"Escape":a.Util.Grid.fEscape(T,f,D,"No");break;case"ArrowDown":a.Util.Grid.fArrowDown(T,f,D,A()===0,"No");break;case"ArrowUp":R[G].GoodCd||R[G].Qty||a.Util.Grid.fArrowUp(T,f,D,A(f)>0);break;case(n.shiftKey&&n.key==="Tab"):n.preventDefault(),document.getElementById(a.Util.Common.fMakeId("Remark")).focus();break;case"Tab":n.preventDefault(),document.getElementById(a.Util.Common.fMakeId("OutReqYmd")).focus();break}};return E.exports.useEffect(()=>{c()},[]),t.createElement(t.Fragment,null,t.createElement(l,{ref:p,key:a.Util.Common.fMakeId(a.Id),id:a.Util.Common.fMakeId(a.Id),style:{width:"99.99999%",height:355}}))});let V,P;const ut=({visible:a,onClose:p,sendRows:h,custCd:s})=>{const m="RETURNSALES_",{$UserStore:c}=de(),r=ot(),i=E.exports.useRef(null),A=E.exports.useRef(null),[k,T]=E.exports.useState({visible:!1,desc:"",type:"N"}),n=new De(m,T,!0,!0,!0,!0,!1),[x,D]=E.exports.useState({}),f=()=>{D({SchFrdate:S().clone().subtract(1,"year").toDate(),SchTodate:new Date,SchCustcd:s,SchGoodno:"",SchFactory:""},50),n.Common.fSetTabIndex(),document.getElementById(n.Common.fMakeId("SchFrdate")).focus()},B=()=>{n.Grid.fContainerInit(n.Common.fMakeId("Grid01")),Y=new o.exports.LocalDataProvider(!1),X=new o.exports.GridView(i.current),n.Grid.fInitGridHeader(X,Y,ye,Ze,30,R,G,ae),X.setRowIndicator({visible:!0}),X.setRowStyleCallback((C,F)=>{if(C.getValue(F.index,"selectFlag")==="Y")return"rg-column-color-2"}),X.onCellDblClicked=function(C,F){const I=Y.getJsonRow(F.dataRow);Y.getValue(F.dataRow,"selectFlag")!="Y"&&(L.addRow(I),Y.setValue(F.dataRow,"selectFlag","Y"))}},R=async()=>{},G=async()=>{},ae=async(C,F)=>{const I=X.getCurrent(),K=Y.getJsonRow(I.dataRow);switch(F.key){case"Enter":Y.getValue(I.dataRow,"selectFlag")!="Y"&&(L.addRow(K),Y.setValue(I.dataRow,"selectFlag","Y"));break;case(F.shiftKey&&"Tab"):document.getElementById(n.Common.fMakeId("SchGoodno")).focus();break;case"Tab":Z.setFocus();break}},ee=()=>{n.Grid.fContainerInit(n.Common.fMakeId("Grid02")),L=new o.exports.LocalDataProvider(!1),Z=new o.exports.GridView(A.current),n.Grid.fInitGridHeader(Z,L,ye,et,30,ue,oe,u),Z.setRowIndicator({visible:!0})},ue=async()=>{},oe=async()=>{},u=async(C,F)=>{switch(F.key){case(F.shiftKey&&"Tab"):X.setFocus();break}},$=async()=>{if(n.Common.fValidate(!S(x.SchFrdate,"YYYY-MM-DD").isValid()||!S(x.SchTodate,"YYYY-MM-DD").isValid(),"\uC870\uD68C\uAE30\uAC04\uC744 \uBC14\uB974\uAC8C \uC785\uB825\uD574 \uC8FC\uC138\uC694.")||n.Common.fValidate(S(x.SchFrDate).format("YYYYMMDD")>S(x.SchToDate).format("YYYYMMDD"),"\uC870\uD68C\uAE30\uAC04\uC744 \uD655\uC778\uD574 \uC8FC\uC138\uC694."))return;const C={...x};C.SchFrdate=S(C.SchFrdate).format("YYYYMMDD"),C.SchTodate=S(C.SchTodate).format("YYYYMMDD"),C.SchFactory=c.user.factory,await n.Command.fSearch(Y,"/@api/business/returnSales/selectSalesRecord",C,"\uB9E4\uCD9C\uB0B4\uC5ED")},w=()=>{const C=L.getJsonRows();if(C.length<1){T({visible:!0,desc:"\uBC18\uD488\uC694\uCCAD\uC790\uB8CC\uB97C \uC120\uD0DD\uD558\uC138\uC694.",type:"W"});return}h(C),console.log("selectedRows",C),p()},M=()=>{const{dataRow:C}=Z.getCurrent();if(C===-1){T({visible:!0,desc:"\uC0AD\uC81C\uD560 \uBC18\uD488\uC694\uCCAD\uC790\uB8CC\uB97C \uC120\uD0DD\uD574 \uC8FC\uC138\uC694.",type:"W"});return}const F=L.getValue(C,"Foroutno"),I=L.getValue(C,"Foroutseq"),K=Y.getJsonRows();L.removeRow(C),K.forEach((J,U)=>{J.Foroutno===F&&J.Foroutseq===I&&Y.setValue(U,"selectFlag","N")}),L.getJsonRows().length===0&&X.setFocus()},H=()=>{p()};return window.onkeydown=function(C){a&&(C.key==="F3"?(C.preventDefault(),$()):C.key==="F5"?(C.preventDefault(),M()):C.key==="F6"?(C.preventDefault(),H()):C.key==="F4"&&(C.preventDefault(),w()))},E.exports.useEffect(()=>{if(a){f(),B(),ee();let C=document.getElementsByClassName("window-mask");C[C.length-1].style="z-index: 100";let F=document.getElementsByClassName("window-shadow");F[F.length-1].style="z-index: 1250",document.getElementById(n.Common.fMakeId("SchFrdate")).focus()}},[a]),a?t.createElement(t.Fragment,null,t.createElement(g.exports.Dialog,{style:{width:"90%",height:"90%"},title:t.createElement(l,{className:r.CTextWrap},"\uB9E4\uCD9C\uB0B4\uC5ED\uAC80\uC0C9"),onClose:H,draggable:!0,modal:!0},t.createElement(l,{style:{marginLeft:"5px",marginTop:"5px"}},t.createElement(g.exports.LinkButton,{className:"c9",style:{width:170,height:30,alignItems:"center",color:"#424242"},onClick:$},t.createElement(l,{className:r.CTextWrap},t.createElement(Be,{size:18}),t.createElement(l,{style:{fontSize:12.5}},"\uAC70\uB798\uCC98\uBCC4\uB9E4\uCD9C\uC790\uB8CC\uAC80\uC0C9 F3"))),t.createElement(g.exports.LinkButton,{className:"c4",style:{width:160,height:30,alignItems:"center",marginLeft:5,color:"#424242"},onClick:w},t.createElement(l,{className:r.CTextWrap},t.createElement(l,{style:{fontSize:12.5}},"\uBC18\uD488\uC694\uCCAD\uAC80\uC0C9\uC790\uB8CC\uCC98\uB9AC F4"))),t.createElement(g.exports.LinkButton,{className:"c11",style:{width:160,height:30,alignItems:"center",marginLeft:5,color:"#424242"},onClick:M},t.createElement(l,{className:r.CTextWrap},t.createElement(l,{style:{fontSize:12.5}},"\uBC18\uD488\uC694\uCCAD\uAC80\uC0C9\uC790\uB8CC\uC0AD\uC81C F5"))),t.createElement(g.exports.LinkButton,{className:"c10",style:{width:90,height:30,alignItems:"center",marginLeft:5,color:"#424242"},onClick:H},t.createElement(l,{className:r.CTextWrap},t.createElement(He,{size:18}),t.createElement(l,{style:{fontSize:12.5}},"\uC885\uB8CC F6")))),t.createElement(l,{className:r.SC4,style:{marginTop:5,marginLeft:5}},t.createElement(l,{className:r.CLabel},"\uAE30\uAC04"),t.createElement(l,{className:r.SC4,style:{marginLeft:5}},t.createElement(z,{inputCls:"inputCls",selected:x.SchFrdate,inputId:n.Common.fMakeId("SchFrdate"),onHandleDateChange:C=>{n.Common.fFieldChange(D,"SchFrdate",C),console.log("value",C)}}),t.createElement(l,{style:{margin:"0 3px",width:"10px"}},"~"),t.createElement(z,{inputCls:"inputCls",selected:x.SchTodate,inputId:n.Common.fMakeId("SchTodate"),onHandleDateChange:C=>n.Common.fFieldChange(D,"SchTodate",C)})),t.createElement(l,{className:r.CLabel,style:{marginLeft:20}},t.createElement(l,null,"\uD488\uBC88")),t.createElement(l,{onKeyDown:C=>{C.shiftKey&&C.keyCode===9?document.getElementById(n.Common.fMakeId("SchTodate")).focus():C.keyCode===9&&(C.preventDefault(),X.setFocus())}},t.createElement(g.exports.TextBox,{inputCls:"inputCls",inputId:n.Common.fMakeId("SchGoodno"),onChange:C=>{n.Common.fFieldChange(D,"SchGoodno",C.toUpperCase())},value:x.SchGoodno,className:r.SA5,style:{width:180}}))),t.createElement(l,{style:{marginTop:15,marginLeft:5}},t.createElement(l,{className:r.CLabel,style:{backgroundColor:"#C8F9FA",borderRadius:3,border:"1px solid #9ac9ed"}},"\uB9E4\uCD9C\uB0B4\uC5ED")),t.createElement(l,{ref:i,id:n.Common.fMakeId("Grid01"),style:{width:1700,height:340}}),t.createElement(l,{style:{marginTop:15,marginLeft:5}},t.createElement(l,{className:r.CLabel,style:{backgroundColor:"#C8F9FA",width:100,borderRadius:3,border:"1px solid #9ac9ed"}},"\uBC18\uD488\uC694\uCCAD\uC790\uB8CC")),t.createElement(l,{ref:A,id:n.Common.fMakeId("Grid02"),style:{width:"100%",height:320}})),t.createElement(Ne,{visible:k.visible,description:k.desc,type:k.type,onConfirm:()=>T({visible:!1})})):null};let Y,L,X,Z;const ot=Te(xe),rt=(a,p,h)=>{a({SchAccunit:"",SchFactory:"",SchFrDate:S().clone().startOf("month").toDate(),SchToDate:new Date,SchCust:"",SchCustNm:"",SchCompleteType:"1",SchType:"0",SchText:""},50),p({Accunit:"",CreDate:"",CrePno:"",CustCD:"",CustCDNm:"",CustAddr1:"",CustTel:"",CustFax:"",DelStatus:"",DocStatus:"\uACB0\uC7AC \xB7 \uBBF8\uC0C1\uC2E0",ExpType:"",Factdivi:"085006",Factory:"",ForNo:"",ModDate:"",ModPno:"",OutReqYmd:new Date,PayCond:new Date,Remark:"",ResultDeptCd:h.user.deptcd,ResultDeptCdNm:h.user.deptnm,ResultPno:h.user.userid,ResultPnoNm:h.user.username.trim(),Sliptyp:"0",Vatcd:"103001",VatcdNm:"\uC138\uAE08\uACC4\uC0B0\uC11C(\uC77C\uBC18\uACFC\uC138)"},50)},lt=(a,p)=>{p({Accunit:"",CreDate:"",CrePno:"",CustCD:"",CustCDNm:"",CustAddr1:"",CustTel:"",CustFax:"",DelStatus:"",DocStatus:"\uACB0\uC7AC \xB7 \uBBF8\uC0C1\uC2E0",ExpType:"",Factdivi:"085006",Factory:"",ForNo:"",ModDate:"",ModPno:"",OutReqYmd:new Date,PayCond:new Date,Remark:"",ResultDeptCd:a.User.user.deptcd,ResultDeptCdNm:a.User.user.deptnm,ResultPno:a.User.user.userid,ResultPnoNm:a.User.user.username.trim(),Sliptyp:"0",Vatcd:"103011",VatcdNm:"\uC804\uC790\uC138\uAE08\uACC4\uC0B0\uC11C(\uC77C\uBC18\uACFC\uC138)"},50)},te=async(a,p,h,s,m,c,r)=>{if(a.Util.Common.fValidate(!S(p.SchFrDate,"YYYY-MM-DD").isValid()||!S(p.SchToDate,"YYYY-MM-DD").isValid(),"\uC870\uD68C\uAE30\uAC04\uC744 \uBC14\uB974\uAC8C \uC785\uB825\uD574 \uC8FC\uC138\uC694.")||a.Util.Common.fValidate(S(p.SchFrDate).format("YYYYMMDD")>S(p.SchToDate).format("YYYYMMDD"),"\uC870\uD68C\uAE30\uAC04\uC744 \uD655\uC778\uD574 \uC8FC\uC138\uC694."))return;const i={...p};if(r!=null){const A=S(r.current).format("YYYY-MM-DD"),k=S(p.SchFrDate).format("YYYY-MM-DD"),T=S(p.SchToDate).format("YYYY-MM-DD");A<k?(i.SchFrDate=S(A).format("YYYYMMDD"),he(A,"fr",a,h)):A>T&&(i.SchToDate=S(A).format("YYYYMMDD"),he(A,"to",a,h))}c!=null&&(i.SchCompleteType=c.current==="\uACB0\uC7AC \xB7 \uC9C4\uD589\uC911"?"2":p.SchCompleteType),i.SchFrDate=S(i.SchFrDate).format("YYYYMMDD"),i.SchToDate=S(i.SchToDate).format("YYYYMMDD"),i.SchAccunit=a.User.user.accunit,i.SchFactory=a.User.user.factory,i.iUserId=a.User.user.userid,await a.Util.Command.fSearch(s,"/@api/business/returnSales/selectByList",i,m)},he=(a,p,h,s)=>{p==="fr"?h.Util.Common.fFieldChange(s,"SchFrDate",a):h.Util.Common.fFieldChange(s,"SchToDate",a)},Ae=async(a,p,h,s,m)=>{const c={...p};c.Factory=a.User.user.factory,c.Accunit=a.User.user.accunit,c.UserId=a.User.user.userid,c.ForNo=m;try{const r=await a.Util.Command.fSearchByReturn("/@api/business/returnSales/selectByDetailList",c);r===void 0||r.length<1?a.Util.Grid.fNewRow(h,{No:"001"}):h.setRows(r.dList),s.clearCurrent()}catch{a.setAlert({visible:!0,desc:"\uC0C1\uC138\uB0B4\uC5ED \uC870\uD68C\uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.",type:"E"})}},st=async(a,p,h,s,m,c,r,i,A,k,T)=>{i.commit();const n={...s};n.PayCond=S(s.PayCond).format("YYYYMMDD"),n.OutReqYmd=S(s.OutReqYmd).format("YYYYMMDD"),n.Accunit=a.User.user.accunit,n.Factory=a.User.user.factory,n.UserId=a.User.user.userid;let x=[];if(a.Util.Grid.fCheckGridData(c,x,k,"\uBC18\uD488\uB300\uC7A5 \uC0C1\uC138")===void 0){x.forEach(f=>{for(const[B,R]of Object.entries(f))typeof f[B]=="string"&&(f[B]=R.trim())});try{const B=(await Ee.post("/@api/business/returnSales/updateByList",{header:n,detail:x})).data;if(B.errmess!=="")return a.setAlert({visible:!0,desc:B.errmess,type:"E"}),B.ForNo;const R=B.ForNo?B.ForNo.trim():s.ForNo.trim();return a.setAlert({visible:!0,desc:"\uBB38\uC11C \uC800\uC7A5\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. "}),setTimeout(()=>{a.Util.Common.fFieldChange(a.setHeaderVO,"ForNo",R),setTimeout(async()=>{await te(a,p,h,m,"\uBC18\uD488 \uB300\uC7A5","",T);const G=m.searchData({fields:["ForNo"],value:R,partialMatch:!0});G!=null&&r.setCurrent({dataRow:G.dataRow,column:0})},500)},700),R}catch(f){a.setAlert({visible:!0,desc:`\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.${f}`})}}},nt=async(a,p,h,s,m)=>{const c={...p};c.Accunit=a.User.user.accunit,c.Factory=a.User.user.factory;try{const i=(await Ee.post("/@api/business/returnSales/deleteByList",{data:c})).data;if(i.errmess!=""){a.setAlert({visible:!0,desc:i.errmess,type:"E"});return}else await a.Util.Command.fDeleteFiles("returnsales",i.List),a.setAlert({visible:!0,desc:"\uBC18\uD488\uB300\uC7A5 \uBB38\uC11C\uAC00 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4."});setTimeout(async()=>{await te(a,h,"",s,"\uBC18\uD488\uB300\uC7A5"),m.setCurrent({itemIndex:0,column:0})},100)}catch(r){a.setAlert({visible:!0,desc:`\uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4. ${r}`})}},it=async(a,p,h,s,m,c)=>{const r={...p};r.Accunit=a.User.user.accunit,r.Factory=a.User.user.factory,await a.Util.Command.fDeleteCheckItem(m,s,"/@api/business/returnSales/deleteByItem",r,"\uBC18\uD488\uB300\uC7A5 \uC0C1\uC138\uB0B4\uC5ED"),setTimeout(async()=>{await Ae(a,h,s,m,c)},100)},Et=Ce(()=>{const a="RETURNSALES",{$CommonStore:p,$UserStore:h}=de(),s=Ct(),{searchVO:m,setSearchVO:c,headerVO:r,setHeaderVO:i,gridFocus:A,setGridFocus:k,cboSchType:T,headerRules:n,alert:x,setAlert:D,confirm:f,setConfirm:B,salesSearch:R,setSalesSearch:G,attachView:ae,setAttachView:ee,vatInfo:ue}=ge(),oe={GoodCd:"\uD488\uBC88",Whcd:"\uCD9C\uACE0\uCC3D\uACE0",UnitCd:"\uCD9C\uACE0\uB2E8\uC704",Qty:"\uC694\uCCAD\uC218\uB7C9"},u=new De(a,D,!0,!0,!0,!0,!0),$=E.exports.useRef(0),w=E.exports.useRef(null),M=E.exports.useRef(null),H=E.exports.useRef(null),C=E.exports.useRef(null),F=E.exports.useRef(null),I=E.exports.useRef(null),K=E.exports.useRef(!0),J=()=>{rt(c,i,h),w.current="",M.current="",setTimeout(()=>{u.Common.fSetTabIndex(),document.getElementById(u.Common.fMakeId("SchFrDate")).focus()},300),document.getElementById(u.Common.fMakeId("Remark")).maxLength=100},[U]=E.exports.useState({Util:u,User:h,fInit:J,setAlert:D,setHeaderVO:i}),Se=e=>{q=e},Fe=e=>{O=e},we=e=>{b=e},Re=e=>{y=e},Ve=e=>{const d=y.getAllStateRows().created;if(d.length>0){let N=0;return d.map(v=>{if(e===void 0||v>=e){const W=b.getValues(v);(!W.GoodCd||W.GoodCd===void 0||!W.Qty||W.Qty===void 0)&&(N+=1)}}),N}return 0},be=()=>{u.Grid.fTab(b,Ve()===0,"No")},ke=(e,d)=>{b.commit(!0),k("H"),y.clearRows();const N=O.getJsonRow(d);w.current===N.ForNo&&(K.current=!K.current),w.current=N.ForNo,i(N),u.Common.fMultiFieldChange(i,{CustAddr1:N.CustAddr1,CustTel:N.CustTel,CustFax:N.CustFax,DocStatus:N.DocStatus,ForNo:N.ForNo}),M.current=N.CustCD,C.current=N.Vatcd,Ae(U,m,y,b,N.ForNo),setTimeout(()=>{$.current=d},100)},_=(e,d,N,v)=>{switch(e){case"SchCustNm":u.Common.fMultiFieldChange(c,{SchCust:d,SchCustNm:N});return;case"CustCDNm":u.Common.fMultiFieldChange(i,{CustCD:d,CustCDNm:N,CustAddr1:v.Data.haddr1,CustTel:v.Data.tel,CustFax:v.Data.fax}),d&&(M.current=d);return;case"ResultDeptCdNm":u.Common.fMultiFieldChange(i,{ResultDeptCd:d,ResultDeptCdNm:N});return;case"ResultPnoNm":u.Common.fMultiFieldChange(i,{ResultPno:d,ResultPnoNm:N});return;case"VatcdNm":u.Common.fMultiFieldChange(i,{Vatcd:d,VatcdNm:N}),d&&(C.current=d,Ie());return}},Ie=()=>{const e=y.getJsonRows();ue.includes(C.current)?e.forEach((d,N)=>{const v=y.getValue(N,"Amount");u.Grid.fSetMultiDataProvider(y,N,{Tax:v*.1,Total:v*1.1})}):e.forEach((d,N)=>{const v=y.getValue(N,"Amount");u.Grid.fSetMultiDataProvider(y,N,{Tax:0,Total:v})})},ve=e=>{F.current=e,i({...r,DocStatus:e}),re("2","checked"),te(U,m,c,O,"\uBC18\uD488\uB300\uC7A5 \uBAA9\uB85D",F,I),setTimeout(()=>{const d=O.searchData({fields:["ForNo"],value:w.current,partialMatch:!0});d!=null&&q.setCurrent({dataRow:d.dataRow,column:0})},300)},Ge=()=>{if(M.current===void 0||M.current===""||M.current===null){D({visible:!0,desc:"\uAC70\uB798\uCC98\uB97C \uBA3C\uC800 \uC120\uD0DD\uD558\uC138\uC694",type:"W"});return}G({visible:!0})},Me=()=>{G({visible:!1}),b.setFocus()},re=(e,d)=>{r.DocStatus="\uACB0\uC7AC \xB7 \uBBF8\uC0C1\uC2E0",d&&c({...m,SchCompleteType:e})},Ye=e=>{const d=m.SchCompleteType;e.key==="ArrowRight"?(d==="1"&&c({...m,SchCompleteType:"2"}),d==="2"&&c({...m,SchCompleteType:"1"})):e.key==="ArrowLeft"?(d==="1"&&c({...m,SchCompleteType:"2"}),d==="2"&&c({...m,SchCompleteType:"1"})):e.shiftKey&&e.key==="Tab"?(e.preventDefault(),document.getElementById(u.Common.fMakeId("SchCustNm")).focus()):e.key==="Tab"&&(e.preventDefault(),document.getElementById(u.Common.fMakeId("SchType")).focus())},me=(e,d)=>{(e.AcceptNo||e.AcceptNo==="")&&y.setValue(d,"AcceptNo",u.Common.fTrim(e.AcceptNo)),(e.AcceptSeq||e.AcceptSeq==="")&&y.setValue(d,"AcceptSeq",u.Common.fTrim(e.AcceptSeq)),(e.Amount||e.Amount==="")&&y.setValue(d,"Amount",u.Common.fTrim(e.Amount*-1)),(e.GoodCd||e.GoodCd==="")&&y.setValue(d,"GoodCd",u.Common.fTrim(e.GoodCd)),(e.Goodnm||e.Goodnm==="")&&y.setValue(d,"GoodCdNm",u.Common.fTrim(e.Goodnm)),(e.Goodno||e.Goodno==="")&&y.setValue(d,"GoodNo",u.Common.fTrim(e.Goodno)),(e.Price||e.Price==="")&&y.setValue(d,"Price",u.Common.fTrim(e.Price)),(e.Qty||e.Qty==="")&&y.setValue(d,"Qty",u.Common.fTrim(e.Qty)*-1),(e.Qty||e.Qty==="")&&y.setValue(d,"Remark",u.Common.fTrim(e.Remark)),(e.Spec||e.Spec==="")&&y.setValue(d,"GoodSpec",u.Common.fTrim(e.Spec)),(e.Tax||e.Tax==="")&&y.setValue(d,"Tax",u.Common.fTrim(e.Tax*-1)),(e.Unitcd||e.Unitcd==="")&&y.setValue(d,"UnitCd",u.Common.fTrim(e.Unitcd)),(e.Unitnm||e.Unitnm==="")&&y.setValue(d,"UnitCdNm",u.Common.fTrim(e.Unitnm)),(e.Whcd||e.Whcd==="")&&y.setValue(d,"Whcd",u.Common.fTrim(e.Whcd)),(e.WrhNm||e.WrhNm==="")&&y.setValue(d,"WhcdNm",u.Common.fTrim(e.WrhNm)),(e.Total||e.Total==="")&&y.setValue(d,"Total",u.Common.fTrim(e.Total*-1))},Ue=e=>{if(e.length>0){const d=y.getAllStateRows().created;d.length<1?e.forEach(N=>{let W=y.getJsonRows().length;b.getDataSource().addRow([]),me(N,W)}):(y.removeRows(d),e.forEach(N=>{b.getDataSource().addRow([]);let W=y.getJsonRows().length-1;me(N,W)}))}},le=()=>{lt(U,i),y.clearRows(),w.current="",M.current="",u.Grid.fNewRow(y,{No:"001"}),setTimeout(()=>{document.getElementById(u.Common.fMakeId("PayCond")).focus()},50)},ce=async()=>{le(),await te(U,m,c,O,"\uBC18\uD488\uB300\uC7A5 \uBAA9\uB85D"),setTimeout(()=>{document.getElementById(u.Common.fMakeId("SchText")).focus()},100)},pe=async()=>{u.Common.fValidate(!r.CustCD,"\uAC70\uB798\uCC98\uAC00 \uC81C\uB300\uB85C \uC785\uB825\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4")||u.Common.fValidate(!r.ResultDeptCd,"\uC601\uC5C5\uB2F4\uB2F9\uBD80\uC11C\uAC00 \uC81C\uB300\uB85C \uC785\uB825\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4")||u.Common.fValidate(!r.ResultPno,"\uC601\uC5C5\uB2F4\uB2F9\uC790\uAC00 \uC81C\uB300\uB85C \uC785\uB825\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4")||u.Common.fValidate(!r.Vatcd,"\uACC4\uC0B0\uC11C\uC885\uB958\uAC00 \uC81C\uB300\uB85C \uC785\uB825\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4")||u.Common.fValidate(!r.Remark,"\uBE44\uACE0\uAC00 \uC785\uB825\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4")||((I.current===null||I.current==="")&&(I.current=r.OutReqYmd),b.commit(),B({visible:!0,desc:"\uC800\uC7A5\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",id:"SAVE"}))},fe=async()=>{if(!u.Common.fValidate(!r.ForNo,"\uBC18\uD488\uB300\uC7A5\uC774 \uC120\uD0DD\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.")){if(b.commit(!0),A==="H")B({visible:!0,desc:`\uC8FC\uC758) ${w.current} \uBB38\uC11C\uB97C \uC0AD\uC81C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`,id:"DELETE"});else if(A==="D"){if(u.Common.fValidate(b.getCheckedItems(!0).length<1,"\uC0AD\uC81C\uD560 \uC138\uBD80\uB0B4\uC5ED\uC744 \uC120\uD0DD\uD558\uC138\uC694."))return;B({visible:!0,desc:`${w.current} \uC0C1\uC138\uB0B4\uC5ED\uC744 \uC0AD\uC81C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`,id:"DELETE_ITEM"})}}},Pe=()=>{u.Common.fValidate(w.current==="",`\uBC18\uD488\uC694\uCCAD\uBC88\uD638\uAC00 \uC120\uD0DD\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. 
\uD655\uC778\uD574 \uC8FC\uC2ED\uC2DC\uC624.`)||ee(!0)},Le=()=>{ee(!1)},Xe=async()=>{if(B({visible:!1,desc:"",id:""}),f.id==="SAVE"){const e=await st(U,m,c,r,O,y,q,b,w.current,oe,I);w.current=e,u.Common.fFieldChange(i,"ForNo",e)}else f.id==="DELETE"?await nt(U,r,m,O,q):f.id==="DELETE_ITEM"&&await it(U,r,m,y,b,w.current)},qe=()=>{B({visible:!1,desc:"",id:""})};return E.exports.useEffect(()=>{u.Common.fHotKey(p,p.isPopup,le,ce,pe,fe)},[p.HotKey]),E.exports.useEffect(()=>(J(),()=>{p.fSetHotKey()}),[]),t.createElement(t.Fragment,null,t.createElement(Ke,{pgmid:a,visible:"111101",onNew:le,onSearch:ce,onSave:pe,onDelete:fe,onAttachment:Pe}),t.createElement(se,{className:"mainCon"},t.createElement(g.exports.Layout,{style:{width:"100%",height:"100%"}},t.createElement(g.exports.LayoutPanel,{region:"west",split:!0,style:{minWidth:350,width:410,maxWidth:410,height:775}},t.createElement(se,null,t.createElement(l,{style:{marginTop:5,marginLeft:5,display:"flex",alignItems:"center"}},t.createElement(l,{className:s.SA1},t.createElement(l,{className:s.SA2},"\uAE30\uAC04")),t.createElement(l,{style:{display:"flex",alignItems:"center",marginLeft:5}},t.createElement(l,{onKeyDown:e=>{e.shiftKey&&e.keyCode===9&&(e.preventDefault(),q.setFocus())}},t.createElement(z,{inputCls:"inputCls",selected:m.SchFrDate,inputId:u.Common.fMakeId("SchFrDate"),onHandleDateChange:e=>u.Common.fFieldChange(c,"SchFrDate",e)})),t.createElement(l,{style:{margin:"0 3px",width:"10px"}},"~"),t.createElement(z,{inputCls:"inputCls",selected:m.SchToDate,inputId:u.Common.fMakeId("SchToDate"),onHandleDateChange:e=>u.Common.fFieldChange(c,"SchToDate",e)}))),t.createElement(l,{style:{marginTop:2,marginLeft:5,display:"flex",alignItems:"center"},onKeyDown:e=>{e.shiftKey&&e.keyCode===9?(e.preventDefault(),document.getElementById(u.Common.fMakeId("SchToDate")).focus()):e.key==="Tab"&&(e.preventDefault(),document.getElementById(u.Common.fMakeId("radioBox")).focus())}},t.createElement(j,{title:"\uAC70\uB798\uCC98\uBA85",inputCls:"inputCls",pgmid:a,inputType:"Cust",id:"SchCustNm",helper:u.CodeHelper.helperCust,ComponentCode:m.SchCust,ComponentValue:m.SchCustNm,SetValue:_,labelStyles:{width:70,height:25,margin:"0px 3px 5px 3px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},inputStyles:{width:235,margin:"0px 0px 5px 5px"},onBlur:()=>document.getElementById(u.Common.fMakeId("radioBox")).focus(),onConfirm:()=>{}})),t.createElement(l,{style:{marginTop:2,marginLeft:5,display:"flex",alignItems:"center"}},t.createElement(l,{className:s.SA1},t.createElement(l,{className:s.SA2},"\uACB0\uC7AC\uC0C1\uD0DC")),t.createElement(l,{id:u.Common.fMakeId("radioBox"),onKeyDown:e=>Ye(e),className:"inputCls",style:{display:"flex",flexDirection:"row",border:"1px solid #9ac9ed",borderRadius:5,height:27,width:235,alignItems:"center",justifyContent:"center",marginLeft:5}},t.createElement(l,{style:{marginLeft:5}},t.createElement(g.exports.RadioButton,{className:s.Radio,inputId:u.Common.fMakeId("all"),value:"1",groupValue:m.SchCompleteType,onChange:e=>re("1",e),inputCls:"inputCls"}),t.createElement(g.exports.Label,{htmlFor:u.Common.fMakeId("all"),className:s.RadioLabel,style:{width:100}},"\uC791\uC131\uC911+\uBC18\uB824")),t.createElement(l,{style:{marginLeft:5}},t.createElement(g.exports.RadioButton,{className:s.Radio,inputId:u.Common.fMakeId("complated"),value:"2",groupValue:m.SchCompleteType,onChange:e=>re("2",e),inputCls:"inputCls"}),t.createElement(g.exports.Label,{htmlFor:u.Common.fMakeId("complated"),className:s.RadioLabel},"\uC804\uCCB4")))),t.createElement(l,{style:{marginTop:2,marginLeft:5,display:"flex",alignItems:"center"}},t.createElement(l,{className:s.SA1},t.createElement(l,{className:s.SA2},"\uAC80\uC0C9")),t.createElement(g.exports.ComboBox,{inputCls:"inputCls",inputId:u.Common.fMakeId("SchType"),data:T,value:m.SchType,editable:!1,onChange:e=>u.Common.fFieldChange(c,"SchType",e),onSelectionChange:e=>{u.Common.fGridSort(q,e.value,{0:"ForNo",1:"OutReqYmd",2:"CustCDNm"})},className:s.SA4,panelStyle:{height:100}}),t.createElement(l,{onKeyDown:e=>{e.shiftKey&&e.key==="Tab"?(e.preventDefault(),document.getElementById(u.Common.fMakeId("SchType")).focus()):e.key==="Tab"&&(e.preventDefault(),q.setFocus())}},t.createElement(g.exports.TextBox,{inputCls:"inputCls",inputId:u.Common.fMakeId("SchText"),onChange:e=>{q.commit(),u.Common.fFieldChange(c,"SchText",e),u.Common.fSearchMatch(q,O,m.SchType,{0:"ForNo",1:"OutReqYmd",2:"CustCDNm"},e)},value:m.SchText,className:s.SA5,style:{width:130}}))),t.createElement(l,{style:{marginTop:5}},t.createElement(tt,{Util:u,Id:"Grid1",Height:631,currentIndex:$,GridFields:$e,GridColumns:Je,RowChanged:ke,DataProviderBind:Fe,GridViewBind:Se})))),t.createElement(g.exports.LayoutPanel,{region:"center",style:{height:775}},t.createElement(se,null,t.createElement(g.exports.Form,{style:{maxWidth:"100%",marginTop:5},model:r,rules:n},t.createElement(l,{style:{display:"flex",flexDirection:"column"}},t.createElement(l,{className:s.SC4},t.createElement(l,{className:s.SC1},"\uACF5\uC7A5\uBA85"),t.createElement(g.exports.TextBox,{inputId:u.Common.fMakeId("Factorynm"),inputCls:"inputCls",value:h.user.factorynm,editable:!1,className:s.SC3})),t.createElement(l,{className:s.SC4},t.createElement(l,{className:s.SC1},"\uBC18\uD488\uC694\uCCAD\uBC88\uD638"),t.createElement(g.exports.TextBox,{inputId:u.Common.fMakeId("ForNo"),inputCls:"inputCls",value:r.ForNo,editable:!1,className:s.SC3,onChange:e=>u.Common.fFieldChange(i,"ForNo",e)})),t.createElement(l,{className:s.SC4},t.createElement(l,{className:s.SC1},t.createElement(l,{className:s.SC2},"\uC791\uC131\uC77C\uC790"),t.createElement(ne,{style:{color:"#ffa8a8"},size:10})),t.createElement(z,{inputId:u.Common.fMakeId("PayCond"),inputCls:"inputCls",selected:r.PayCond,onHandleDateChange:e=>u.Common.fFieldChange(i,"PayCond",e),disabled:!!w.current,inputRequired:!0,style:{width:160}})),t.createElement(l,null),t.createElement(l,{className:s.SC4,onKeyDown:e=>{e.shiftKey&&e.key==="Tab"?(e.preventDefault(),b.setFocus()):e.key==="Tab"&&(e.preventDefault(),document.getElementById(u.Common.fMakeId("CustCDNm")).focus())}},t.createElement(l,{className:s.SC1},t.createElement(l,{className:s.SC2},"\uBC18\uD488\uC77C\uC790"),t.createElement(ne,{style:{color:"#ffa8a8"},size:10})),t.createElement(l,null),t.createElement(z,{inputCls:"inputCls",selected:r.OutReqYmd,onHandleDateChange:e=>{u.Common.fFieldChange(i,"OutReqYmd",e),I.current=e},inputRequired:!0,style:{width:160},inputId:u.Common.fMakeId("OutReqYmd")})),t.createElement(j,{title:"\uAC70\uB798\uCC98",inputCls:"inputCls",pgmid:a,inputType:"Cust",id:"CustCDNm",helper:u.CodeHelper.helperCust,ComponentCode:r.CustCD,ComponentValue:r.CustCDNm,SetValue:_,labelStyles:{width:90,height:25,margin:"3px 10px 5px 10px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},inputStyles:{width:200,margin:"0px 0px 5px 0px"},inputRequired:!0,onConfirm:()=>{}}),t.createElement(l,{className:s.SC4},t.createElement(l,{className:s.SC1},"\uC8FC\uC18C"),t.createElement(g.exports.TextBox,{inputCls:"inputCls",value:r.CustAddr1,editable:!1,className:s.SC3,style:{width:400},disabled:!0})),t.createElement(l,{className:s.SC4},t.createElement(l,{className:s.SC1},"TEL"),t.createElement(g.exports.TextBox,{inputCls:"inputCls",value:r.CustTel,editable:!1,className:s.SC3,disabled:!0})),t.createElement(l,{className:s.SC4},t.createElement(l,{className:s.SC1},"FAX"),t.createElement(g.exports.TextBox,{inputCls:"inputCls",value:r.CustFax,editable:!1,className:s.SC3,disabled:!0})),t.createElement(j,{title:"\uC601\uC5C5\uB2F4\uB2F9\uBD80\uC11C",inputCls:"inputCls",pgmid:a,inputType:"Dept",id:"ResultDeptCdNm",helper:u.CodeHelper.helperDeptNm,ComponentCode:r.ResultDeptCd,ComponentValue:r.ResultDeptCdNm,SetValue:_,labelStyles:{width:90,height:25,margin:"3px 10px 5px 10px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},inputStyles:{width:200,margin:"0px 0px 5px 0px"},inputRequired:!0,onConfirm:()=>{}}),t.createElement(j,{title:"\uC601\uC5C5\uB2F4\uB2F9\uC790",inputCls:"inputCls",pgmid:a,inputType:"Pno",id:"ResultPnoNm",helper:u.CodeHelper.helperPnoNm2,ComponentCode:r.ResultPno,ComponentValue:r.ResultPnoNm,SetValue:_,labelStyles:{width:90,height:25,margin:"3px 10px 5px 10px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},inputStyles:{width:200,margin:"0px 0px 5px 0px"},inputRequired:!0,onConfirm:()=>{}}),t.createElement(j,{inputCls:"inputCls",pgmid:a,inputType:"VatNm",id:"VatcdNm",title:"\uACC4\uC0B0\uC11C\uC885\uB958",helper:u.CodeHelper.helperExpenseVatNm2,ComponentCode:r.Vatcd,ComponentValue:r.VatcdNm,SetValue:_,labelStyles:{width:90,height:25,margin:"0px 10px 5px 10px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},inputStyles:{width:200,margin:"0px 0px 5px 0px"},inputRequired:!0,onConfirm:()=>{}}),t.createElement(l,{className:s.SC4,onKeyDown:e=>{e.shiftKey&&e.key==="Tab"?(e.preventDefault(),document.getElementById(u.Common.fMakeId("VatcdNm")).focus()):e.key==="Tab"&&(e.preventDefault(),H.current.focus())},style:{marginBottom:5}},t.createElement(l,{className:s.SC1,style:{marginBottom:20}},t.createElement(l,{className:s.SC2},"\uBE44\uACE0"),t.createElement(ne,{style:{color:"#ffa8a8"},size:10})),t.createElement(g.exports.TextBox,{inputId:u.Common.fMakeId("Remark"),inputCls:"inputCls",value:r.Remark,placeholder:"\uCD5C\uB300 100\uC790",className:s.SC3,style:{width:400,height:50},onChange:e=>{u.Common.fFieldChange(i,"Remark",e)},multiline:!0}),t.createElement(l,{onKeyDown:e=>{e.shiftKey&&e.key==="Tab"?(e.preventDefault(),setTimeout(()=>{document.getElementById(u.Common.fMakeId("Remark")).focus()},1)):e.key==="Tab"&&(e.preventDefault(),setTimeout(()=>{b.setFocus()},10))},style:{alignItems:"center !important"}},t.createElement(g.exports.LinkButton,{ref:H,className:"c9",style:{color:"#163971",height:40,marginLeft:40,marginTop:10},onClick:Ge},t.createElement(l,{className:s.ButtonWrapper},t.createElement(Be,{size:18}),t.createElement(l,{style:{fontWeight:500}},"\uB9E4\uCD9C\uB0B4\uC5ED\uAC80\uC0C9(\uAC70\uB798\uCC98)"))))))),t.createElement(l,{style:{width:"100%",height:320},onKeyDown:e=>{e.shiftKey&&e.key==="Tab"&&(e.preventDefault(),H.current.focus())}},t.createElement(at,{Util:u,Id:"Grid2",GridTitle:"\uBC18\uD488\uB300\uC7A5 \uC0C1\uC138 \uB0B4\uC5ED",GridFields:_e,GridColumns:je,setGridFocus:k,setAlert:D,TabGrid:be,DataProviderBind:Re,GridViewBind:we,vatCd:C})))),t.createElement(g.exports.LayoutPanel,{region:"east",title:r.DocStatus,collapsible:!0,collapsed:!0,expander:!0,style:{width:400}},t.createElement(l,{style:{marginTop:10}},t.createElement(Qe,{PGMID:a,ApprovalType:"A",ApprovalDocNo:r.ForNo,ApprovalDocSource:"RT",ApprovalDocFlag:"C",AttachmentsKeyName:"\uBC18\uD488\uB300\uC7A5\uBC88\uD638",RetrieveFlag:K.current,MaxRevNo:0,RevNo:0,SetTitle:ve,isImageComponent:!0,isAttachments:!0,filepath:"returnsales"}))))),ae&&t.createElement(ze,{PGMID:a,FileTitle:"\uBC18\uD488\uC694\uCCAD\uBC88\uD638",FileType:"RT",FileNo:w.current,FilePath:"returnsales",setClose:Le}),t.createElement(Ne,{visible:x.visible,description:x.desc,type:x.type,onConfirm:()=>D({visible:!1})}),t.createElement(ut,{visible:R.visible,onClose:()=>Me(),sendRows:Ue,custCd:M.current}),t.createElement(Oe,{visible:f.visible,description:f.desc,onCancel:qe,onConfirm:Xe}))});let q,b,O,y;const Ct=Te(xe);export{Et as default};
