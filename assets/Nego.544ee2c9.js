import{r as f,R as n}from"./index.da6908f5.js";import{m as l,o as Lt,c as Jt,u as Ut,U as Kt,P as $e,r as x,B as m,F as Qe,q as jt,f as zt,A as Wt,C as qt,h as V,n as R,d as H}from"./App.11263b70.js";import{C as ue}from"./CodeHelperPopup.3932fdb9.js";import{C as $t}from"./CommonButton.0b792d77.js";import{C as de}from"./CommonDatePicker.d7bc57f8.js";import{A as Qt}from"./Approval.69c4f070.js";import{A as Zt}from"./Attachments.19d97d2b.js";import"./index.6f186c21.js";import"./EvidenceViewer.5aab9677.js";const ea=[{fieldName:"Accunit",dataType:l.exports.ValueType.TEXT},{fieldName:"NegoNo",dataType:l.exports.ValueType.TEXT},{fieldName:"NegoDate",dataType:l.exports.ValueType.DATE,datetimeFormat:"yyyyMMdd"},{fieldName:"Mediator",dataType:l.exports.ValueType.TEXT},{fieldName:"FileNo",dataType:l.exports.ValueType.TEXT},{fieldName:"RateDay",dataType:l.exports.ValueType.DATE,datetimeFormat:"yyyyMMdd"},{fieldName:"currcd",dataType:l.exports.ValueType.TEXT},{fieldName:"currNm",dataType:l.exports.ValueType.TEXT},{fieldName:"Exchange",dataType:l.exports.ValueType.TEXT},{fieldName:"ingubun",dataType:l.exports.ValueType.TEXT},{fieldName:"ingubunNm",dataType:l.exports.ValueType.TEXT},{fieldName:"RefNo",dataType:l.exports.ValueType.TEXT},{fieldName:"custcd",dataType:l.exports.ValueType.TEXT},{fieldName:"custNm",dataType:l.exports.ValueType.TEXT},{fieldName:"AccountNo",dataType:l.exports.ValueType.TEXT},{fieldName:"Deptcd",dataType:l.exports.ValueType.TEXT},{fieldName:"Deptnm",dataType:l.exports.ValueType.TEXT},{fieldName:"Pno",dataType:l.exports.ValueType.TEXT},{fieldName:"PName",dataType:l.exports.ValueType.TEXT},{fieldName:"Mediatornm",dataType:l.exports.ValueType.TEXT},{fieldName:"slipno",dataType:l.exports.ValueType.TEXT},{fieldName:"slipyn",dataType:l.exports.ValueType.TEXT},{fieldName:"ApprDocProg",dataType:l.exports.ValueType.TEXT},{fieldName:"DocStatus",dataType:l.exports.ValueType.TEXT}],ta=[{name:"ApprDocProg",fieldName:"ApprDocProg",width:65,styleName:"center-column",header:{text:"\uACB0\uC7AC\uC0C1\uD0DC"}},{name:"NegoDate",fieldName:"NegoDate",width:80,styleName:"center-column",header:{text:"\uC791\uC131\uC77C\uC790"},datetimeFormat:"yyyy-MM-dd"},{name:"NegoNo",fieldName:"NegoNo",width:95,styleName:"center-column",header:{text:"\uC791\uC131\uBC88\uD638"}},{name:"CustNm",fieldName:"CustNm",width:100,styleName:"left-column",header:{text:"\uC740\uD589"}}],aa=[{fieldName:"Accunit",dataType:l.exports.ValueType.TEXT},{fieldName:"Negono",dataType:l.exports.ValueType.TEXT},{fieldName:"Negoseq",dataType:l.exports.ValueType.TEXT},{fieldName:"No",dataType:l.exports.ValueType.TEXT},{fieldName:"Guid",dataType:l.exports.ValueType.TEXT},{fieldName:"Pono",dataType:l.exports.ValueType.TEXT},{fieldName:"Lcno",dataType:l.exports.ValueType.TEXT},{fieldName:"Cino",dataType:l.exports.ValueType.TEXT},{fieldName:"Blno",dataType:l.exports.ValueType.TEXT},{fieldName:"Custcd",dataType:l.exports.ValueType.TEXT},{fieldName:"Custnm",dataType:l.exports.ValueType.TEXT},{fieldName:"Bankcd",dataType:l.exports.ValueType.TEXT},{fieldName:"Banknm",dataType:l.exports.ValueType.TEXT},{fieldName:"Saldate",dataType:l.exports.ValueType.DATE,datetimeFormat:"yyyyMMdd"},{fieldName:"Salexchange",dataType:l.exports.ValueType.NUMBER},{fieldName:"Salamt",dataType:l.exports.ValueType.NUMBER},{fieldName:"Salkoramt",dataType:l.exports.ValueType.NUMBER},{fieldName:"Negoexchange",dataType:l.exports.ValueType.NUMBER},{fieldName:"Negoamt",dataType:l.exports.ValueType.NUMBER},{fieldName:"Negokoramt",dataType:l.exports.ValueType.NUMBER},{fieldName:"Difamt",dataType:l.exports.ValueType.NUMBER},{fieldName:"Janamt",dataType:l.exports.ValueType.NUMBER},{fieldName:"Credate",dataType:l.exports.ValueType.TEXT},{fieldName:"Crepno",dataType:l.exports.ValueType.TEXT},{fieldName:"Moddate",dataType:l.exports.ValueType.TEXT},{fieldName:"ModPno",dataType:l.exports.ValueType.TEXT},{fieldName:"Tofactory",dataType:l.exports.ValueType.TEXT},{fieldName:"ToFactorynm",dataType:l.exports.ValueType.TEXT},{fieldName:"Totalnegoamt",dataType:l.exports.ValueType.NUMBER},{fieldName:"Totalnegokoramt",dataType:l.exports.ValueType.NUMBER},{fieldName:"Tax",dataType:l.exports.ValueType.NUMBER},{fieldName:"Currcd",dataType:l.exports.ValueType.TEXT},{fieldName:"ExchangeDate",dataType:l.exports.ValueType.TEXT},{fieldName:"Exchange",dataType:l.exports.ValueType.NUMBER},{fieldName:"CostAmt",dataType:l.exports.ValueType.NUMBER},{fieldName:"KorCostAmt",dataType:l.exports.ValueType.NUMBER},{fieldName:"Account",dataType:l.exports.ValueType.TEXT},{fieldName:"Currnm",dataType:l.exports.ValueType.TEXT},{fieldName:"Amount",dataType:l.exports.ValueType.NUMBER},{fieldName:"IsYen",dataType:l.exports.ValueType.TEXT},{fieldName:"HSale",dataType:l.exports.ValueType.NUMBER},{fieldName:"HSaleKor",dataType:l.exports.ValueType.NUMBER}],oa=[{name:"No",fieldName:"No",width:50,styleName:"rg-disable-cell",editable:!1,header:{text:"NO"}},{name:"Custnm",fieldName:"Custnm",width:190,styleName:"left-column",button:"action",editable:!0,header:{text:"\uC218\uC785\uC790",showTooltip:!0},renderer:{type:"text",showTooltip:!0}},{name:"Cino",fieldName:"Cino",width:120,styleName:"center-column",button:"action",header:{text:"Ci\uBC88\uD638",showTooltip:!0},editor:{textCase:"upper"}},{name:"Saldate",fieldName:"Saldate",width:95,editable:!1,styleName:"rg-disable-cell",header:{text:"\uB9E4\uCD9C\uC77C\uC790",showTooltip:!0},renderer:{type:"text",showTooltip:!1},editor:{type:"date",maxLength:10,yearNavigation:!0,datetimeFormat:"yyyy-MM-dd"},datetimeFormat:"yyyy-MM-dd"},{name:"Salexchange",fieldName:"Salexchange",width:80,styleName:"rg-disable-cell right-column",editable:!1,header:{text:"\uB9E4\uCD9C\uD658\uC728",showTooltip:!0},editor:{type:"number",editFormat:"#,##0.00"},numberFormat:"#,##0.00"},{name:"Salamt",fieldName:"Salamt",width:100,styleName:"rg-disable-cell right-column",editable:!1,header:{text:"\uB9E4\uCD9C\uD1B5\uD654\uAE08\uC561",showTooltip:!0},footer:{numberFormat:"#,##0.##",expression:"sum"},editor:{type:"number",editFormat:"#,##0.##"},numberFormat:"#,##0.##"},{name:"Salkoramt",fieldName:"Salkoramt",width:100,styleName:"rg-disable-cell right-column",editable:!1,header:{text:"\uB9E4\uCD9C\uC6D0\uD654\uAE08\uC561",showTooltip:!0},footer:{numberFormat:"#,##0",expression:"sum"},editor:{type:"number",editFormat:"#,##0"},numberFormat:"#,##0"},{name:"Negoexchange",fieldName:"Negoexchange",width:80,styleName:"right-column",header:{text:"NEGO\uD658\uC728",showTooltip:!0},editor:{type:"number",editFormat:"#,##0.00"},numberFormat:"#,##0.00"},{name:"Negoamt",fieldName:"Negoamt",width:100,styleName:"right-column",editable:!0,header:{text:"NEGO\uD1B5\uD654\uAE08\uC561",showTooltip:!0},footer:{numberFormat:"#,##0.##",expression:"sum"},editor:{type:"number",editFormat:"#,##0.##"},numberFormat:"#,##0.##"},{name:"Negokoramt",fieldName:"Negokoramt",width:100,styleName:"right-column",editable:!0,header:{text:"NEGO\uC6D0\uD654\uAE08\uC561",showTooltip:!0},footer:{numberFormat:"#,##0",expression:"sum"},editor:{type:"number",editFormat:"#,##0"},numberFormat:"#,##0"},{name:"Difamt",fieldName:"Difamt",width:100,styleName:"rg-disable-cell right-column",editable:!1,header:{text:"\uD658\uCC28\uC561",showTooltip:!0},footer:{numberFormat:"#,##0",expression:"sum"},editor:{type:"number",editFormat:"#,##0"},numberFormat:"#,##0"},{name:"Janamt",fieldName:"Janamt",width:100,styleName:"rg-disable-cell right-column",editable:!1,header:{text:"\uC794\uC561",showTooltip:!0},editor:{type:"number",editFormat:"#,##0.##"},numberFormat:"#,##0.##"},{name:"Totalnegoamt",fieldName:"Totalnegoamt",width:100,styleName:"rg-disable-cell right-column",editable:!1,header:{text:"NEGO\uD1B5\uD654\uC9D1\uACC4",showTooltip:!0},editor:{type:"number",editFormat:"#,##0.##"},numberFormat:"#,##0.##"},{name:"Totalnegokoramt",fieldName:"Totalnegokoramt",width:100,styleName:"rg-disable-cell right-column",editable:!1,header:{text:"NEGO\uC6D0\uD654\uC9D1\uACC4",showTooltip:!0},editor:{type:"number",editFormat:"#,##0"},numberFormat:"#,##0"}],ra=[{fieldName:"accunit",dataType:l.exports.ValueType.TEXT},{fieldName:"BankCd",dataType:l.exports.ValueType.TEXT},{fieldName:"BankNm",dataType:l.exports.ValueType.TEXT},{fieldName:"CurrCd",dataType:l.exports.ValueType.TEXT},{fieldName:"exchangeRate",dataType:l.exports.ValueType.NUMBER},{fieldName:"CurrNm",dataType:l.exports.ValueType.TEXT},{fieldName:"negoNo",dataType:l.exports.ValueType.TEXT},{fieldName:"negoItemSeq",dataType:l.exports.ValueType.TEXT},{fieldName:"expenseSeq",dataType:l.exports.ValueType.TEXT},{fieldName:"recordNo",dataType:l.exports.ValueType.TEXT},{fieldName:"expenseGuid",dataType:l.exports.ValueType.TEXT},{fieldName:"toFactory",dataType:l.exports.ValueType.TEXT},{fieldName:"isCreated",dataType:l.exports.ValueType.TEXT},{fieldName:"ciNo",dataType:l.exports.ValueType.TEXT},{fieldName:"jukyoCd",dataType:l.exports.ValueType.TEXT},{fieldName:"jukyoNm",dataType:l.exports.ValueType.TEXT},{fieldName:"ProtypeCd",dataType:l.exports.ValueType.TEXT},{fieldName:"ProtypeNm",dataType:l.exports.ValueType.TEXT},{fieldName:"currMoney",dataType:l.exports.ValueType.NUMBER},{fieldName:"prodMoney",dataType:l.exports.ValueType.NUMBER},{fieldName:"remark",dataType:l.exports.ValueType.TEXT},{fieldName:"creDate",dataType:l.exports.ValueType.DATE},{fieldName:"crePno",dataType:l.exports.ValueType.TEXT},{fieldName:"modDate",dataType:l.exports.ValueType.DATE},{fieldName:"modPno",dataType:l.exports.ValueType.TEXT}],ua=[{name:"recordNo",fieldName:"recordNo",width:50,styleName:"rg-disable-cell",editable:!1,header:{text:"NO",showTooltip:!0}},{name:"ciNo",fieldName:"ciNo",width:150,styleName:"left-column rg-disable-cell",editable:!1,header:{text:"Ci\uBC88\uD638",showTooltip:!0}},{name:"jukyoCd",fieldName:"jukyoCd",width:90,styleName:"center-column",editable:!1,header:{text:"\uD68C\uACC4\uCC98\uB9AC\uCF54\uB4DC",showTooltip:!0}},{name:"jukyoNm",fieldName:"jukyoNm",width:150,styleName:"left-column",button:"action",editable:!0,header:{text:"\uD68C\uACC4\uCC98\uB9AC\uCF54\uB4DC\uBA85",showTooltip:!0}},{name:"ProtypeNm",fieldName:"ProtypeNm",width:150,styleName:"left-column",button:"action",editable:!0,header:{text:"\uC99D\uBE59\uC885\uB958",showTooltip:!0},editor:{maxLength:6}},{name:"BankNm",fieldName:"BankNm",button:"action",width:70,styleName:"left-column",editable:!0,header:{text:"\uC740\uD589",showTooltip:!0}},{name:"CurrNm",fieldName:"CurrNm",button:"action",width:50,styleName:"left-column",editable:!0,header:{text:"\uD1B5\uD654",showTooltip:!0}},{name:"currMoney",fieldName:"currMoney",width:100,styleName:"right-column",editable:!0,header:{text:"\uD1B5\uD654\uBE44\uC6A9",showTooltip:!0},editor:{type:"number",editFormat:"#,##0.####"},numberFormat:"#,##0.####",footer:{numberFormat:"#,##0.####",expression:"sum"}},{name:"prodMoney",fieldName:"prodMoney",styleName:"right-column",width:100,editable:!0,header:{text:"\uC6D0\uD654\uBE44\uC6A9",showTooltip:!0},editor:{type:"number",editFormat:"#,##0"},numberFormat:"#,##0",footer:{numberFormat:"#,##0",expression:"sum"}},{name:"remark",fieldName:"remark",styleName:"left-column",width:302,placeHolder:"\uCD5C\uB30050\uC790",header:{text:"\uBE44\uACE0",showTooltip:!0},renderer:{type:"text",showTooltip:!1},editor:{maxLength:50}}],na={textBoxMatchPickDateBox:{marginLeft:0,width:150,height:25,"& input":{fontSize:"12px !important"}},SA1:{width:70,height:25,margin:"3px 3px",backgroundColor:"#e0ecff",color:"#163971",padding:5,fontSize:"12px",alignItems:"center",fontWeight:600,display:"flex"},SA2:{width:60},SA3:{width:"15px!important",height:"15px!important",border:"1px solid #3c96ff",marginTop:"1px","& .checkbox-checked":{border:0,background:"#3c96ff"}},SA4:{width:90,height:25,"& input":{fontSize:"12px !important"}},SA5:{marginLeft:5,width:140,height:25,"& input":{fontSize:"12px !important"}},SB1:{width:253,height:32,"& input":{fontSize:"16px !important",textAlign:"center",color:"#0070c0"}},SB2:{fontSize:12,paddingBottom:2,fontWeight:500},SC1:{width:90,height:25,margin:"3px 10px",backgroundColor:"#e0ecff",color:"#163971",padding:5,fontSize:"12px",alignItems:"center",fontWeight:600,display:"flex"},SC2:{width:80},SC3:{width:200,height:25,"& input":{fontSize:"12px !important"}},SC4:{width:200,height:25,"& input":{fontSize:"12px !important",textAlign:"right"}},SC5:{fontSize:12,paddingBottom:2,fontWeight:500,marginLeft:5},SC6:{width:150,height:25,"& input":{fontSize:"12px !important",textAlign:"center"}},SC7:{width:80,height:29,margin:"3px 1px",backgroundColor:"#e0ecff",color:"#163971",padding:5,fontSize:"12px",alignItems:"center",fontWeight:600,display:"flex"},SC8:{"& textarea":{fontSize:"12px !important"}}},ya=Lt(()=>{const B="NEGO",{$CommonStore:I,$UserStore:E}=Ut(),y=la(),Me=f.exports.useRef(null),ve=f.exports.useRef(null),Ie=f.exports.useRef(null),Ze=f.exports.useRef(!1),z=f.exports.useRef(""),et=f.exports.useRef(0),tt=f.exports.useRef(0),Fe=f.exports.useRef("NEGO"),at=f.exports.useRef(null),ot=f.exports.useRef(!1),pe=f.exports.useRef(!0),Ge=f.exports.useRef(0),fe=f.exports.useRef(""),b=f.exports.useRef(""),G=f.exports.useRef(0),W=f.exports.useRef(0),U=f.exports.useRef(!1),Q=f.exports.useRef(0),P=f.exports.useRef(1),Z=f.exports.useRef(0),ne=f.exports.useRef(null),Pe=f.exports.useRef(null),le=f.exports.useRef(null),ge=f.exports.useRef(null),ye=f.exports.useRef(null),Ne=f.exports.useRef(null),De=f.exports.useRef(null),X=f.exports.useRef(""),ee=f.exports.useRef(""),[rt,Ye]=f.exports.useState(!1),[Oe,Y]=f.exports.useState(""),[w,F]=f.exports.useState({SchWriting:"Y"}),[p,S]=f.exports.useState({}),[ut,_e]=f.exports.useState(!1),[nt]=f.exports.useState({NegoDate:"required",custNm:"required",currNm:"required",Pno:"required"}),[O,q]=f.exports.useState({}),[lt]=f.exports.useState([{value:"0",text:"\uACB0\uC7AC\uC0C1\uD0DC"},{value:"1",text:"\uC791\uC131\uC77C\uC790"},{value:"2",text:"\uC791\uC131\uBC88\uD638"},{value:"3",text:"\uC740\uD589"}]),K=["Custnm","Saldate","Cino"],L={jukyoCd:"\uD68C\uACC4\uCC98\uB9AC\uCF54\uB4DC",jukyoNm:"\uD68C\uACC4\uCC98\uB9AC\uCF54\uB4DC\uBA85",currMoney:"\uD1B5\uD654\uBE44\uC6A9",prodMoney:"\uC6D0\uD654\uBE44\uC6A9",ProtypeNm:"\uC99D\uBE59\uC885\uB958",ProtypeCd:"\uC99D\uBE59\uC885\uB958\uCF54\uB4DC"},st={Cino:"CINO",Salkoramt:"\uC6D0\uD654\uAE08\uC561",Negoamt:"NEGO\uD1B5\uD654\uAE08\uC561"},it={recordNo:"NO",jukyoCd:"\uD68C\uACC4\uCC98\uB9AC\uCF54\uB4DC",jukyoNm:"\uD68C\uACC4\uCC98\uB9AC\uCF54\uB4DC\uBA85",ProtypeNm:"\uC99D\uBE59\uC885\uB958",currMoney:"\uD1B5\uD654\uBE44\uC6A9",prodMoney:"\uC6D0\uD654\uBE44\uC6A9"},mt=["Custnm","Cino"],ct=["BankNm","CurrNm","jukyoNm","ProtypeNm"],Ct=["Cino","custcd","Salamt","Salkoramt","Salexchange","Guid"],[he,A]=f.exports.useState({visible:!1,desc:"",type:"N"}),[te,$]=f.exports.useState({visible:!1,desc:"",id:""}),a=new Kt(B,A,!0,!0,!0,!0,!0),Te="057002",Ee=new Date,xe="recordNo",dt=async()=>{F({SchAccunit:"",SchFactory:"",SchToDate:V().format("YYYY-MM-DD"),SchFrDate:V().startOf("month").format("YYYY-MM-DD"),SchWriting:"Y",cboSchType:"1",SchText:""},50),Be(),setTimeout(()=>{U.current=!0},1e3),a.Common.fSetTabIndex(),document.getElementById(a.Common.fMakeId("SchFrDate")).focus()},Be=()=>{S({ApprDocProg:"",Bankcd:"",CINO:"",currcd:Te,currNm:"USD",custcd:"",custNm:"",Deptnm:E.user.deptnm,Deptcd:E.user.deptcd,Exchange:"1",exchangeRate:"",Factory:E.user.factory,FileNo:"",GeneDate:new Date,ingubun:"",ingubunNm:"",Negoamt:"",Negokoramt:"",expenseAmt:"",Difamt:"",NegoDate:new Date,Negoexchange:"1",NegoNo:"",No:"",PName:E.user.username.trim(),Pno:E.user.userid,RateDay:Ee,AccountNo:"",slipno:""})},pt=()=>{a.Grid.fContainerInit(a.Common.fMakeId("Grid1")),J=new l.exports.LocalDataProvider(!1),M=new l.exports.GridView(Me.current),a.Grid.fInitGridHeader(M,J,ea,ta,30,gt,yt,Nt),M.setRowIndicator({visible:!1}),M.setDisplayOptions({fitStyle:"none"}),M.setRowStyleCallback(ft),M.onCellDblClicked=function(){Y("H"),document.getElementById(a.Common.fMakeId("custNm")).focus()}},ft=(e,t)=>{const o=e.getValue(t.index,"ApprDocProg");if(o==="\uC644\uACB0")return"rg-column-color-3";if(o==="\uC9C4\uD589\uC911")return"rg-column-color-2";if(o==="\uBC18\uB824")return"rg-column-color-1"},gt=(e,t,o)=>{o>=0&&He(e,o)},yt=(e,t)=>{Ge.current===t.dataRow&&t.dataRow>=0&&He(e,t.dataRow)},He=async(e,t)=>{c.commit(),C.commit(),c.clearCurrent(),C.clearCurrent();const o=J.getJsonRow(t);b.current===o.NegoNo&&(pe.current=!pe.current),b.current=o.NegoNo,ne.current=o.currcd,z.current=o.DocStatus,U.current=!1,G.current=Number(o.Exchange),W.current=o.RateDay,ye.current=o.Pno,ee.current=o.currcd==="057003"?"Y":"N",a.Common.fFieldChange(S,"Deptcd",""),a.Common.fFieldChange(S,"Deptnm",""),S(o),a.Common.fFieldChange(S,"AccountNo",o.AccountNo),await Ue(),v(i.getJsonRows()),j(),Y("H"),setTimeout(()=>{Ge.current=t},100),o.currcd==="057003"&&i.getJsonRows().forEach((r,u)=>{i.setValue(u,"IsYen","Y")})},Nt=async(e,t)=>{switch(t.key){case(t.shiftKey&&"Tab"):document.getElementById(a.Common.fMakeId("SchText")).focus();break;case"Tab":setTimeout(()=>{document.getElementById(a.Common.fMakeId("radioBox")).focus()},0);break}},Dt=async()=>{a.Grid.fContainerInit(a.Common.fMakeId("Grid2")),i=new l.exports.LocalDataProvider(!1),c=new l.exports.GridView(ve.current),a.Grid.fInitGridDetail(c,i,aa,oa,Xe,ht,Tt),c.setRowIndicator({visible:!1}),c.setFooters({visible:!0}),c.onCellClicked=function(t,o){o.dataRow>=0&&(Y("D"),C.commit(),C.clearCurrent())},c.onValidateColumn=(t,o,r,u)=>{const s={};return K.includes(o.fieldName)&&u===void 0&&(s.level="warning",s.message="\uD544\uC218 \uC785\uB825 \uAC12\uC785\uB2C8\uB2E4!"),(o.name=="Salkoramt"||o.name=="Salamt")&&u===void 0&&(s.level="info",s.message=`\uC794\uC561, NEGO\uD1B5\uD654\uC9D1\uACC4, NEGO\uC6D0\uD654\uC9D1\uACC4
\uB97C \uACC4\uC0B0\uD558\uB824\uBA74 \uC774 \uD544\uB4DC\uC5D0 \uAC12\uC774 \uD544\uC694\uD569\uB2C8\uB2E4.`,s.message+=` 
(Ci\uBC88\uD638\uB97C \uC120\uD0DD\uD558\uC138\uC694)`),(o.name=="Negoamt"||o.name=="Negokoramt")&&u===void 0&&(s.level="info",s.message=`\uC794\uC561, NEGO\uD1B5\uD654\uC9D1\uACC4, NEGO\uC6D0\uD654\uC9D1\uACC4
\uB97C \uACC4\uC0B0\uD558\uB824\uBA74 \uC774 \uD544\uB4DC\uC5D0 \uAC12\uC774 \uD544\uC694\uD569\uB2C8\uB2E4.`),s},i.onRowInserted=(t,o)=>{const r=i.getJsonRows();let u=0;r.forEach(s=>{Number(s.Negoseq)>u&&(u=Number(s.Negoseq))}),a.Grid.fSetMultiDataProvider(t,o,{No:R(o+1).format("000"),ToFactory:E.user.factory,Currcd:"057002",Currnm:"USD",Negoexchange:G.current,IsYen:ee.current})},c.columnByName("Negoexchange").styleCallback=ae,c.columnByName("Negoamt").styleCallback=ae,c.columnByName("Salamt").styleCallback=ae,c.columnByName("Salexchange").styleCallback=ae,c.columnByName("Totalnegoamt").styleCallback=ae,c.getDataSource().addRow([]);const e=await ie(Te,Ee);i.setValue(0,"Negoexchange",e)},ae=(e,t)=>{const o=e.getValue(t._index._itemIndex,"IsYen");let r={};return o==="Y"?(r.numberFormat="#,##0.0000",r.editor={type:"number",editFormat:"#,##0.0000"}):(r.numberFormat="#,##0.00",r.editor={type:"number",editFormat:"#,##0.00"}),r},Xe=async(e,t)=>{e.commit(),Y("D");let o=e.getValue(e.getCurrent().itemIndex,t.fieldName);o===null&&(o="");let r={};if(t.fieldName==="Custnm")r=await a.Grid.gridCodeClass(e.getCurrent(),a.CodeHelper.helperCust,B,o,!0);else if(t.fieldName==="Currnm")r=await a.Grid.gridCodeClass(e.getCurrent(),a.CodeHelper.helperCurrNm,B,o,!0);else if(t.fieldName==="Cino"){const s=a.CodeHelper.fRedefHelper(a.CodeHelper.helperCino,{iInCode2:o,iInCode3:e.getValue(e.getCurrent().itemIndex,"custcd")});r=await a.Grid.gridCodeClass(e.getCurrent(),s,B,o,!0)}else t.fieldName==="Deptnm"&&(r=await a.Grid.gridCodeClass(e.getCurrent(),a.CodeHelper.helperDeptNm,B,o,!0));let u=0;r.datas[0].map(s=>{u+=Number(s.Size)}),Z.current=u<470?470:u+80,q(r)},ht=(e,t)=>{e.commit(),Y("D");const{column:o,itemIndex:r}=e.getCurrent(),u=e.getValue(r,o),s=e.getDataSource().getJsonRows();switch((u===null||u==="")&&o==="Custnm"&&a.Grid.fSetDataProvider(i,r,["custcd","Custnm"],void 0),o){case"Negoamt":u>s[t].Salamt&&e.getDataSource().setValue(t,"Negoamt",s[t].Salamt);break;case"Cino":s.forEach(d=>{d.negoItemSeq==s[t].Negoseq&&(d.ciNo=s[t].Cino)});break}if(o==="Negoexchange"&&(i.setValue(t,"Negoexchange",u),Ce(t),ce(i,t,c),v(i.getJsonRows()),c.validateCells()),o==="Negoamt"&&(i.setValue(t,"Negoamt",u),Ce(t),ce(i,t,c),v(i.getJsonRows()),c.validateCells()),Ct.includes(o)&&ce(i,t,e),o==="Negokoramt"){const d=i.getValue(r,"Negokoramt"),N=i.getValue(r,"Salkoramt");i.setValue(r,"Difamt",Math.floor(d-N)),v(i.getJsonRows())}c.commit()},Tt=async(e,t)=>{const o=e.getDataSource().getRowCount(),{fieldName:r,itemIndex:u}=e.getCurrent(),s={fieldName:r},d=e.getDataSource().getJsonRows();let N=0;if(u>0)for(let h=0;h<K.length;h++)Object.getOwnPropertyDescriptor(d[u],`${K[h]}`).value&&(N+=1),!Object.getOwnPropertyDescriptor(d[u],`${K[h]}`).value===void 0&&(N+=1);if(t.shiftKey&&t.keyCode==9)t.preventDefault(),setTimeout(()=>{document.getElementById(a.Common.fMakeId("Pno")).focus()},200);else switch(t.key){case"Enter":if(A({visible:!1,desc:""}),e.commit(!0),r===e._view._columns.columns[e._view._columns.columns.length-1]._fieldName)a.Grid.fEnterLastField(e,u,o,se()===0);else if(e.getDataSource().getValue(u,r)&&mt.includes(r)){e.commit(),e.setCurrent({itemIndex:u,fieldName:r});const h=e.getValue(u,r);let T={};if(h!==""){if(r==="Custnm"){if(T=await a.Grid.gridCodeClass(e.getCurrent(),a.CodeHelper.helperCust,B,h,!1),!T.visible){const D=T.res;a.Grid.fSetMultiDataProvider(i,u,{custcd:D.custcd,Custnm:D.custnm})}}else if(r==="Cino"){const D=a.Common.fTrim(e.getValue(e.getCurrent().itemIndex,"custcd"));T=await a.Grid.gridCodeClass(e.getCurrent(),a.CodeHelper.fRedefHelper(a.CodeHelper.helperCino,{iInCode2:h,iInCode3:D||null}),B,h,!1),T.visible||(a.Grid.fSetMultiDataProvider(i,u,{Custnm:T.res.imcustnm,Custcd:T.res.imcustcd.trim(),Salexchange:R(T.res.saleexchange)._value,Salamt:R(T.res.saleamt)._value,Salkoramt:R(T.res.salekoramt)._value,Negoamt:0,Negokoramt:0,Cino:T.res.cino.trim(),Saldate:T.res.exinvoicedate,HSale:R(T.res.saleamt)._value,HSaleKor:R(T.res.salekoramt)._value}),setTimeout(()=>{We(i,u,c)},100))}}let k=0;T.datas[0].map(D=>{k+=Number(D.Size)}),Z.current=k<470?470:k+80,q(T)}e.setFocus();break;case"Escape":a.Grid.fEscape(e,u,o,"No"),v(i.getJsonRows());break;case"Insert":a.Grid.fKeyInsert(e,u,se()===0,"No");break;case"ArrowDown":a.Grid.fArrowDown(e,u,o,se(u)===0,"No");break;case"ArrowUp":N||(a.Grid.fArrowUp(e,u,o,se(u)>0),e.validateCells(),v(i.getJsonRows()));break;case"Tab":t.preventDefault(),b.current?setTimeout(()=>{document.getElementById(a.Common.fMakeId("custNm")).focus()},0):(setTimeout(()=>{document.getElementById(a.Common.fMakeId("NegoDate")).focus()},0),c.commit(),c.clearCurrent());break;case(t.ctrlKey&&" "):Xe(e,s);break}},se=e=>{const t=i.getAllStateRows().created;if(t.length>0){let o=0;return t.map(r=>{if(e===void 0||r>=e){const u=c.getValues(r);for(let s=0;s<K.length;s++)Object.getOwnPropertyDescriptor(u,`${K[s]}`).value||(o+=1),Object.getOwnPropertyDescriptor(u,`${K[s]}`).value===void 0&&(o+=1)}}),o}return 0},Et=()=>{a.Grid.fContainerInit(a.Common.fMakeId("Grid3")),g=new l.exports.LocalDataProvider(!1),C=new l.exports.GridView(Ie.current),a.Grid.fInitGridDetail(C,g,ra,ua,Le,xt,Bt),C.setRowIndicator({visible:!1}),C.setFooters({visible:!0}),C.setDisplayOptions({fitStyle:"fill"}),C.onCellClicked=function(e,t){t.dataRow>=0&&(c.commit(),c.clearCurrent(),Y("D"))},C.onValidateColumn=(e,t,o,r)=>{const u={};return Object.keys(L).includes(t.fieldName)&&(a.Common.fEmptyReturn(r)||(u.level="warning",u.message="\uD544\uC218 \uC785\uB825 \uAC12\uC785\uB2C8\uB2E4!")),u},C.onShowHeaderTooltip=function(e,t,o){return"header-tooltip: "+o}},Le=async(e,{itemIndex:t,fieldName:o})=>{e.commit(),Y("D"),e.setFocus();let r=e.getValue(t,o);r===null&&(r="");let u={};o==="jukyoNm"?u=await a.Grid.gridCodeClass(e.getCurrent(),a.CodeHelper.fRedefHelper(a.CodeHelper.helperJukyoNm,{iInCode2:r}),B,r,!0):o==="ProtypeNm"?u=await a.Grid.gridCodeClass(e.getCurrent(),a.CodeHelper.fRedefHelper(a.CodeHelper.helperProtypeNm,{iInCode6:r}),B,r,!0):o==="CurrNm"?u=await a.Grid.gridCodeClass(e.getCurrent(),a.CodeHelper.fRedefHelper(a.CodeHelper.helperCurrNm,{iInCode6:r}),B,r,!0):o==="BankNm"&&(u=await a.Grid.gridCodeClass(e.getCurrent(),a.CodeHelper.fRedefHelper(a.CodeHelper.helperBankNm,{iInCode6:r}),B,r,!0));let s=0;u.datas[0].map(d=>{s+=Number(d.Size)}),Z.current=s<470?470:s+80,q(u)},xt=(e,t)=>{e.commit();const{column:o,itemIndex:r}=e.getCurrent(),u=e.getValue(r,o);Y("D"),o==="currMoney"&&Se(t,W.current),o==="CurrNm"&&(u||(g.setValue(t,"CurrCd",ne.current),g.setValue(t,o,Pe.current)),Se(t,W.current)),o=="ProtypeNm"&&u==""&&(g.setValue(t,"ProtypeCd",""),e.commit()),o=="jukyoNm"&&u==""&&(g.setValue(t,"jukyoCd",""),e.commit()),o=="BankNm"&&u==""&&(g.setValue(t,"BankCd",""),e.commit()),Object.keys(L).includes(o)&&C.validateCells(),j()},Bt=async(e,t)=>{const{fieldName:o,itemIndex:r}=e.getCurrent(),u=e.getDataSource(),s=u.getRowCount(),d=u.getValue(r,"ciNo"),N=u.getValue(r,"negoItemSeq"),h=u.getJsonRows();let T=0;for(let k=0;k<Object.keys(L).length;k++)Object.getOwnPropertyDescriptor(h[r],`${Object.keys(L)[k]}`).value&&(T+=1),!Object.getOwnPropertyDescriptor(h[r],`${Object.keys(L)[k]}`).value===void 0&&(T+=1);if(t.shiftKey&&t.keyCode==9)t.preventDefault(),setTimeout(()=>{document.getElementById(a.Common.fMakeId("Pno")).focus()},200);else switch(t.key){case"Enter":if(e.commit(!0),o===e._view._columns.columns[e._view._columns.columns.length-1]._fieldName)a.Grid.fEnterLastField(e,r,s,we()===0),h.length<u.getJsonRows().length&&(u.setValue(r+1,"recordNo",R(Number(u.getValue(r,"recordNo"))+1).format("000")),u.setValue(r+1,"ciNo",d),u.setValue(r+1,"negoItemSeq",N),u.setValue(r+1,"BankCd",Ne.current),u.setValue(r+1,"BankNm",De.current),u.setValue(r+1,"CurrCd",le.current),u.setValue(r+1,"CurrNm",ge.current));else if(ct.includes(o)){e.commit(),e.setCurrent({itemIndex:r,fieldName:o});const k=e.getValue(r,o);let D={};k!==""?o==="jukyoNm"?(D=await a.Grid.gridCodeClass(e.getCurrent(),a.CodeHelper.fRedefHelper(a.CodeHelper.helperJukyoNm,{iInCode2:e.getValue(e.getCurrent().itemIndex,"jukyoNm")}),B,k,!1),D.visible||a.Grid.fSetMultiDataProvider(g,r,{jukyoCd:D.res.jukyocd,jukyoNm:D.res.jukyonm})):o==="ProtypeNm"?(D=await a.Grid.gridCodeClass(e.getCurrent(),a.CodeHelper.fRedefHelper(a.CodeHelper.helperProtypeNm,{iInCode6:e.getValue(e.getCurrent().itemIndex,"ProtypeNm")}),B,k,!1),D.visible||a.Grid.fSetMultiDataProvider(g,r,{ProtypeCd:D.res.minorcd,ProtypeNm:D.res.minornm})):o==="CurrNm"?(D=await a.Grid.gridCodeClass(e.getCurrent(),a.CodeHelper.fRedefHelper(a.CodeHelper.helperCurrNm,{iInCode6:e.getValue(e.getCurrent().itemIndex,"CurrNm")}),B,k,!1),D.visible||a.Grid.fSetMultiDataProvider(g,r,{CurrCd:D.res.minorcd,CurrNm:D.res.minornm})):o==="BankNm"&&(D=await a.Grid.gridCodeClass(e.getCurrent(),a.CodeHelper.fRedefHelper(a.CodeHelper.helperBankNm,{iInCode6:e.getValue(e.getCurrent().itemIndex,"BankNm")}),B,k,!1),D.visible||a.Grid.fSetMultiDataProvider(g,r,{BankCd:D.res.minorcd,BankNm:D.res.minornm})):k==""&&(o==="jukyoNm"?g.setValue(r,"jukyoCd",""):o==="ProtypeNm"?g.setValue(r,"ProtypeCd",""):o==="BankNm"&&g.setValue(r,"BankCd",""),e.commit(),e.setFocus());let _=0;D.datas[0].map(Xt=>{_+=Number(Xt.Size)}),Z.current=_<470?470:_+80,q(D),C.validateCells()}break;case"Tab":t.preventDefault(),b.current?setTimeout(()=>{document.getElementById(a.Common.fMakeId("custNm")).focus()},0):(setTimeout(()=>{document.getElementById(a.Common.fMakeId("NegoDate")).focus()},0),C.commit(),C.clearCurrent());break;case(t.ctrlKey&&" "):Le(e,{fieldName:o});break;case"Escape":C.commit(),T||u.getRowState(r)==="created"&&(u.removeRow(r),u.getRows().map((D,_)=>{r<=_&&u.setValue(_,xe,R(_+1).format("000"))})),e.validateCells(),a.Grid.fEscape(e,r,s,"No"),v(i.getJsonRows());break;case"ArrowDown":a.Grid.fArrowDown(e,r,s,we(r)===0,xe),h.length<u.getJsonRows().length&&(u.setValue(r+1,"ciNo",d),u.setValue(r+1,"negoItemSeq",N),u.setValue(r+1,"CurrNm",ge.current),u.setValue(r+1,"CurrCd",le.current),u.setValue(r+1,"BankNm",De.current),u.setValue(r+1,"BankCd",Ne.current),u.setValue(r+1,"isCreated",!0));break;case"ArrowUp":T||(a.Grid.fArrowUp(e,r,s,we(r)>0),e.validateCells());break;case"Backspace":o==="CurrNm"&&(t.preventDefault(),ne.current=g.getValue(r,"CurrCd"),Pe.current=g.getValue(r,"CurrNm"));break}},we=e=>{const t=g.getAllStateRows().created;if(t.length>0){let o=0;return t.map(r=>{if(e===void 0||r>=e){const u=C.getValues(r);for(let s=0;s<Object.keys(L).length;s++)Object.getOwnPropertyDescriptor(u,`${Object.keys(L)[s]}`).value||(o+=1),Object.getOwnPropertyDescriptor(u,`${Object.keys(L)[s]}`).value===void 0&&(o+=1)}}),o}return 0},wt=async e=>{if(I.fGetBinding()||!U.current)return;G.current=e;const t=i.getJsonRows().length;for(let o=0;o<t;o++)a.Grid.fSetMultiDataProvider(i,o,{Negoexchange:e}),Ce(o);I.fGetBinding()||(await qe(e),v(i.getJsonRows()),await j(),setTimeout(()=>{j()},100),await ke())},St=async e=>{setTimeout(()=>{a.Common.fFieldChange(S,"RateDay",e)},10);const t=await ie(p.currcd,e);G.current=t;const o=i.getJsonRows().length;for(let r=0;r<o;r++)a.Grid.fSetMultiDataProvider(i,r,{Negoexchange:t}),Ce(r);I.fGetBinding()||(await qe(t),v(i.getJsonRows()),await ke(),await j())},Se=async(e,t)=>{const o=C.getValue(e,"currMoney"),r=C.getValue(e,"CurrCd"),{Rate:u}=await be(r,V(t).format("YYYYMMDD"));g.setValue(e,"exchangeRate",u),g.setValue(e,"prodMoney",Math.floor(u*o)),C.validateCells()},ke=()=>{C.commit(),g.getJsonRows().length!=0&&g.getJsonRows().forEach((e,t)=>{e.CurrCd==le.current&&C.getDataSource().setValue(t,"prodMoney",Math.ceil(e.currMoney*G.current))})},Je=()=>{J&&M.clearCurrent(),i&&(i.clearRows(),c.clearCurrent(),a.Grid.fNewRow(i,{No:"001"})),g&&(g.clearRows(),C.clearCurrent())},kt=e=>{e.key==="Tab"&&setTimeout(()=>{c.setFocus()},0)},oe=async(e,t,o,r)=>{if(!I.fGetBinding())switch(e){case"custNm":a.Common.fMultiFieldChange(S,{custcd:t,custNm:o,AccountNo:r.Data.item1}),Ne.current=t,De.current=o;break;case"currNm":if(a.Common.fMultiFieldChange(S,{currcd:t,currNm:o}),le.current=t,ge.current=o,!t||!g)return;t==="057003"?(ee.current="Y",i.getJsonRows().forEach((u,s)=>{i.setValue(s,"IsYen","Y")})):(ee.current="N",i.getJsonRows().forEach((u,s)=>{i.setValue(s,"IsYen","N")})),await ie(t,p.RateDay),ke();break;case"ingubunNm":a.Common.fMultiFieldChange(S,{ingubun:t,ingubunNm:o});break;case"Dept":a.Common.fMultiFieldChange(S,{Deptcd:t,Deptnm:o});break;case"Pno":if(ye.current=t,a.Common.fMultiFieldChange(S,{Pno:t,PName:o}),!r.Data||!c||!C)return;P.current==1?(Q.current.panels[0].selected=!0,Q.current.panels[1].selected=!1,c.setFocus()):(Q.current.panels[1].selected=!0,Q.current.panels[0].selected=!1,C.setFocus());break}},Vt=async()=>{let e=2;c.commit(),C.commit();const t=O.selectedData,o=I.Codeclass.selData;if(t.column==="Cino")a.Grid.fSetMultiDataProvider(i,t.dataRow,{Custnm:o.imcustnm,Custcd:o.imcustcd.trim(),Salexchange:R(o.saleexchange)._value,Salamt:R(o.saleamt)._value,Salkoramt:R(o.salekoramt)._value,Negoamt:0,Negokoramt:0,Cino:o.cino.trim(),Saldate:o.exinvoicedate,Negoexchange:G.current,HSale:R(o.saleamt)._value,HSaleKor:R(o.salekoramt)._value}),setTimeout(()=>{We(i,t.dataRow,c)},100),e=2,c.setCurrent({itemIndex:c.getCurrent().itemIndex,fieldName:"Saldate"});else if(t.column==="Custnm")o.custcd!=p.custcd&&a.Grid.fSetMultiDataProvider(i,t.dataRow,{Salexchange:"",Salamt:"",Salkoramt:"",Negoamt:"",Negokoramt:"",Cino:"",Saldate:new Date,Totalnegokoramt:"",Totalnegoamt:"",Janamt:"",Difamt:""}),a.Grid.fSetMultiDataProvider(i,t.dataRow,{custcd:o.custcd,Custnm:o.custnm}),e=2;else if(t.column==="Deptnm")a.Grid.fSetMultiDataProvider(i,t.dataRow,{Deptcd:o.deptcd,Deptnm:o.deptnm}),a.Common.fFieldChange(S,"Deptcd",o.deptcd),e=2;else if(t.column==="jukyoNm")a.Grid.fSetMultiDataProvider(g,t.dataRow,{jukyoCd:o.jukyocd,jukyoNm:o.jukyonm}),e=3;else if(t.column==="ProtypeNm")a.Grid.fSetMultiDataProvider(g,t.dataRow,{ProtypeCd:o.minorcd,ProtypeNm:o.minornm}),e=3;else if(t.column==="BankNm")a.Grid.fSetMultiDataProvider(g,t.dataRow,{BankCd:o.minorcd,BankNm:o.minornm}),e=3;else if(t.column==="CurrNm"){ne.current=o.minorcd,a.Grid.fSetMultiDataProvider(g,t.dataRow,{CurrCd:o.minorcd,CurrNm:o.minornm}),Se(t.dataRow,W.current,o.minorcd);const{Rate:r}=await be(o.minorcd,V(W.current).format("YYYYMMDD"));g.setValue(t.dataRow,"exchangeRate",r),g.setValue(t.dataRow,"prodMoney",r*C.getValue(t.dataRow,"currMoney")),e=3}c.commit(),c.validateCells(),C.commit(),C.validateCells(),q({visible:!1,desc:"",value:"",datas:{},selectedData:{},id:"",viewId:""}),e==2?c.setFocus():e==3&&C.setFocus()},At=()=>{c.setFocus(),Y("D"),q({visible:!1}),P.current==1?c.setFocus():P.current==2&&C.setFocus()},ie=async(e,t)=>{if(!e){A({visible:!0,desc:"\uD658\uC728\uC744 \uAC00\uC838\uC624\uAE30 \uC704\uD574\uC11C\uB294 \uD1B5\uD654\uB97C \uBA3C\uC800 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694",type:"W"});return}if(t>new Date||!t){A({visible:!0,desc:"\uD658\uC728\uC77C\uC790\uB97C \uD655\uC778\uD574\uC8FC\uC138\uC694",type:"W"});return}let o=await be(e,V(t).format("YYYYMMDD"));return o?(a.Common.fFieldChange(S,"Exchange",o.Rate),G.current=o.Rate):(a.Common.fFieldChange(S,"Exchange",1),G.current=1,o={Rate:1}),o.Rate},me=(e,t)=>{t==="fr"?a.Common.fFieldChange(F,"SchFrDate",e):a.Common.fFieldChange(F,"SchToDate",e)},Ve=async()=>{Be(),b.current="",z.current="\uACB0\uC7AC \xB7 \uBBF8\uC0C1\uC2E0",P.current=1,G.current=1,Fe.current="NEGO",X.current=new Date,a.Common.fFieldChange(S,"Deptcd",E.user.deptcd),a.Common.fFieldChange(S,"Deptnm",E.user.deptnm),Je(),c&&c.clearCurrent(),C&&C.clearCurrent(),P.current=1,setTimeout(()=>{document.getElementById(a.Common.fMakeId("NegoDate")).focus()},100),b.current=!1;const e=await ie(Te,Ee);i.setValue(0,"Negoexchange",e)},re=async()=>{if(Be(),Je(),U.current=!1,a.Common.fValidate(!V(w.SchFrDate,"YYYY-MM-DD").isValid()||!V(w.SchToDate,"YYYY-MM-DD").isValid(),"\uC870\uD68C\uAE30\uAC04\uC744 \uBC14\uB974\uAC8C \uC785\uB825\uD574 \uC8FC\uC138\uC694.")||a.Common.fValidate(V(w.SchFrDate).format("YYYYMMDD")>V(w.SchToDate).format("YYYYMMDD"),"\uC870\uD68C\uAE30\uAC04\uC744 \uD655\uC778\uD574 \uC8FC\uC138\uC694."))return;const e={...w};if(X.current!=""){const t=V(X.current).format("YYYY-MM-DD"),o=V(w.SchFrDate).format("YYYY-MM-DD"),r=V(w.SchToDate).format("YYYY-MM-DD");t<o?(e.SchFrDate=V(t).format("YYYYMMDD"),me(t,"fr")):t>r&&(e.SchToDate=V(t).format("YYYYMMDD"),me(t,"to"))}e.SchFrDate=V(e.SchFrDate).format("YYYYMMDD"),e.SchToDate=V(e.SchToDate).format("YYYYMMDD"),e.SchWriting=z.current==="\uACB0\uC7AC \xB7 \uC9C4\uD589\uC911"?"N":w.SchWriting,e.SchAccunit=E.user.accunit,e.SchFactory=E.user.factory,await a.Command.fSearch(J,"/@api/business/nego/selectByList",e,"Nego \uBAA9\uB85D"),document.getElementById(a.Common.fMakeId("SchText")).focus(),F({...e}),z.current="\uACB0\uC7AC \xB7 \uBBF8\uC0C1\uC2E0",X.current=""},Ue=async()=>{if(I.fGetBinding())return;U.current=!1,i.clearRows();let e;try{e=(await H.get("/@api/business/nego/selectByDetailList",{params:{SchNegoNo:b.current,SchAccunit:E.user.accunit,SchFactory:E.user.factory,NegoDate:p.NegoDate,UserId:E.user.userid}})).data}catch{A({visible:!0,desc:"\uC0C1\uC138\uB0B4\uC5ED \uC870\uD68C\uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.",type:"E"})}for(let t=0;t<e.dList.length;t++){const o=e.dList[t];for(const[r,u]of Object.entries(o))o[r]=a.Common.fTrim(u)}i.setRows(e.dList),g.setRows(e.expenseTableRes),(!a.Common.fEmptyReturn(e.dList)||e.dList.length<1||i.getJsonRows().length<1)&&a.Grid.fNewRow(i,{No:"001"}),U.current=!0,c.commit(),C.commit(),c.setCurrent({dataRow:0,column:"Custnm"})},Ke=async()=>{try{Ye(!0);const e=await H.get("/@api/business/nego/printToday",{params:{date:V().format("YYYYMMDD")}});a.Report.fReport('{ "data" :'+JSON.stringify(e.data)+"}","/NEGO\uB300\uC7A5\uC794\uC561.mrd","http://report.ehansun.co.kr/ReportingServer","http://hseerp.ehansun.co.kr/report")}catch{A({visible:!0,desc:"fPrint error.",type:"E"})}},je=async()=>{(c||C)&&(c.commit(),C.commit(),c.validateCells(),C.validateCells(),c.clearCurrent(),C.clearCurrent()),!a.Common.fValidate(!V(p.NegoDate,"YYYY-MM-DD").isValid(),"\uC791\uC131\uC77C\uC790\uAC00 \uC81C\uB300\uB85C \uC785\uB825\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.")&&(a.Common.fValidate(!V(p.RateDay,"YYYY-MM-DD").isValid(),"\uD658\uC728\uC77C\uC790 \uC81C\uB300\uB85C \uC785\uB825\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.")||a.Common.fValidate(!p.Pno,"\uC0AC\uC6D0\uBA85\uC774 \uC81C\uB300\uB85C \uC785\uB825\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.")||a.Common.fValidate(!p.Deptnm,"\uBD80\uC11C\uBA85\uC774 \uC81C\uB300\uB85C \uC785\uB825\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.")||a.Common.fValidate(!p.custNm,"\uC740\uD589\uC774 \uC81C\uB300\uB85C \uC785\uB825\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.")||a.Common.fValidate(!p.currcd,"\uD654\uD3D0\uCF54\uB4DC\uAC00 \uC785\uB825\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.")||((X.current===null||X.current==="")&&(X.current=p.NegoDate),at.current=document.getElementById(a.Common.fMakeId("custNm")),$({visible:!0,desc:"\uC800\uC7A5 \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",id:"SAVE"})))},bt=async()=>{let e={...p};e={...p,Pno:ye.current},e.NegoDate=V(p.NegoDate).format("YYYYMMDD"),e.GeneDate=V(p.GeneDate).format("YYYY-MM-DD"),e.Accunit=E.user.accunit,e.Factory=E.user.factory,e.UserId=E.user.userid;let t=[],o=[];if(c.validateCells(),C.validateCells(),!(a.Grid.fCheckGridData(i,t,st,"NEGO\uAE08\uC561 \uD0ED\uC758 ")!==void 0||a.Grid.fCheckGridData(g,o,it,"\uBD80\uB300\uBE44\uC6A9 \uD0ED\uC758 ")!==void 0))try{const s=await H.post("/@api/business/nego/updateByList",{user:E.user.userid,header:e,detailsGrid2:t,detailsGrid3:o}),{errmess:d,Negono:N}=s.data;if(d!==""){A({visible:!0,desc:d,type:"E"});return}b.current=N?N.trim():p.Negono.trim(),A({visible:!0,desc:"\uBB38\uC11C \uC800\uC7A5\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."}),fe.current="Y",re().then(()=>{const h=J.searchData({fields:["NegoNo"],value:N.trim(),partialMatch:!0});h!=null&&M.setCurrent({dataRow:h.dataRow,column:0}),j()}),fe.current=""}catch(s){A({visible:!0,desc:`\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.${s}`})}},ze=async()=>{if(!a.Common.fValidate(!p.NegoNo,"nego \uBAA9\uB85D\uC774 \uC120\uD0DD\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.")){if(Oe==="H")$({visible:!0,desc:`\uC8FC\uC758) ${b.current} \uBB38\uC11C\uB97C \uC0AD\uC81C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`,id:"DELETE"});else if(Oe==="D"){if(a.Common.fValidate(c.getCheckedItems(!0).length<1,"\uC0AD\uC81C\uD560 nego\uB0B4\uC5ED\uC744 \uC120\uD0DD\uD558\uC138\uC694.")&&a.Common.fValidate(C.getCheckedItems(!0).length<1,"\uC0AD\uC81C\uD560 nego\uB0B4\uC5ED\uC744 \uC120\uD0DD\uD558\uC138\uC694."))return;P.current==1?$({visible:!0,desc:`${b.current} \uC0C1\uC138\uB0B4\uC5ED\uC744 \uC0AD\uC81C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`,id:"DELETE_ITEM"}):$({visible:!0,desc:"\uC120\uD0DD\uD55C \uBE44\uC6A9\uB0B4\uC5ED\uC744 \uC0AD\uC81C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",id:"DELETE_ITEM"})}}},Rt=async()=>{const e={...p};e.Accunit=E.user.accunit,e.Factory=E.user.factory,e.useridPno=E.user.userid;try{const o=(await H.post("/@api/business/nego/deleteByList",{data:e})).data;if(o.errmess!==""){A({visible:!0,desc:o.errmess,type:"E"});return}return A({visible:!0,desc:"NEGO\uC790\uB8CC\uC785\uB825 \uBB38\uC11C\uAC00 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4."}),o.status=!0,o}catch{return A({visible:!0,desc:"NEGO\uC790\uB8CC\uC785\uB825 \uBB38\uC11C \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4."}),!1}},Mt=async()=>{const e={...p};e.Accunit=E.user.accunit,e.Factory=E.user.factory,e.UserId=E.user.userid,c.commit(!0),C.commit(!0),P.current==1?(C.clearCurrent(),c.setFocus(),await a.Command.fDeleteCheckItem(c,i,"/@api/business/nego/deleteByItem",e,"Nego \uC0C1\uC138\uB0B4\uC5ED")):(c.clearCurrent(),C.setFocus(),await a.Command.fDeleteCheckItem(C,g,"/@api/business/nego/deleteByExpenseItem",e,"\uC120\uD0DD\uD55C \uBE44\uC6A9\uB0B4\uC5ED")),setTimeout(()=>{v(i.getJsonRows())},300)},vt=async()=>{if($({visible:!1,desc:"",id:""}),te.id==="SAVE")bt();else if(te.id==="DELETE"){const e=await Rt();e.errmess||await a.Command.fDeleteFiles("NEGO",e.List),Ve(),re()}else te.id==="DELETE_ITEM"&&(await Mt(),await Ue(),await j())},It=()=>{$({visible:!1,desc:"",id:""})},We=async(e,t,o,r)=>{const u=e.getJsonRows(),s={params:{Cino:a.Common.fEmptyReturn(u[t].Cino),Custno:a.Common.fEmptyReturn(u[t].Custcd),Salamt:a.Common.fEmptyReturn(u[t].Salamt),Salkoramt:a.Common.fEmptyReturn(u[t].Salkoramt),Salexchange:a.Common.fEmptyReturn(u[t].Salexchange),Negoamt:a.Common.fEmptyReturn(u[t].Negoamt),NegoKoramt:a.Common.fEmptyReturn(u[t].Negokoramt),NegoGuid:a.Common.fEmptyReturn(u[t].Guid)}};let d;try{if(d=(await H.get("/@api/business/nego/negoColumnNegokoramtCalcOneRow",s)).data.result.recordset[0],d.Totalnegokoramt&&d.Totalnegokoramt,d.Totalnegoamt&&d.Totalnegoamt,d.Janamt&&d.Janamt,d.Difamt&&d.Difamt,!r){const h=e.getValue(t,"HSale");e.setValue(t,"Salamt",h-d.Totalnegoamt),e.setValue(t,"Negoamt",h-d.Totalnegoamt),e.setValue(t,"Negokoramt",Math.floor((h-d.Totalnegoamt)*G.current)),e.setValue(t,"Totalnegokoramt",d.Totalnegokoramt),e.setValue(t,"Totalnegoamt",d.Totalnegoamt),e.setValue(t,"Janamt",h-d.Totalnegoamt)}await ce(i,t,c,"","fromHelper"),(d.Difamt||d.Janamt||d.Totalnegoamt||d.Totalnegokoramt)&&o.validateCells(),u[t].Negoamt&&o.validateCells(),v(i.getJsonRows())}catch(N){A({visible:!0,desc:`Nego \uACC4\uC0B0 \uC870\uD68C\uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.${N}`,type:"E"})}},ce=async(e,t,o,r,u)=>{const s=e.getJsonRows(),d={params:{Cino:a.Common.fEmptyReturn(s[t].Cino),Custno:a.Common.fEmptyReturn(s[t].Custcd),Salamt:a.Common.fEmptyReturn(s[t].HSale),Salkoramt:a.Common.fEmptyReturn(s[t].HSaleKor),Salexchange:a.Common.fEmptyReturn(s[t].Salexchange),Negoamt:a.Common.fEmptyReturn(s[t].Negoamt),NegoKoramt:a.Common.fEmptyReturn(s[t].Negokoramt),NegoGuid:a.Common.fEmptyReturn(s[t].Guid)}};let N;try{if(N=(await H.get("/@api/business/nego/negoColumnNegokoramtCalcOneRow",d)).data.result.recordset[0],N.Totalnegokoramt&&N.Totalnegokoramt,N.Totalnegoamt&&N.Totalnegoamt,N.Janamt&&N.Janamt,N.Difamt&&N.Difamt,!r){const T=i.getValue(t,"Salexchange"),k=i.getValue(t,"Negoamt");e.setValue(t,"Totalnegoamt",N.Totalnegoamt),e.setValue(t,"Totalnegokoramt",N.Totalnegokoramt),e.setValue(t,"Difamt",N.Difamt),e.setValue(t,"Janamt",N.Janamt),e.setValue(t,"Salamt",k),e.setValue(t,"Salkoramt",Math.floor(k*T))}if(u){const T=i.getValue(t,"Negokoramt"),k=e.getValue(t,"HSaleKor"),D=await Ft(t);e.setValue(t,"Salkoramt",Math.floor(k)-Math.floor(D[0].TotalSaleKorAmt));const _=e.getValue(t,"Salkoramt");e.setValue(t,"Difamt",Math.floor(T)-Math.floor(_))}(N.Difamt||N.Janamt||N.Totalnegoamt||N.Totalnegokoramt)&&o.validateCells(),s[t].Negoamt&&o.validateCells(),v(i.getJsonRows())}catch(h){A({visible:!0,desc:`Nego \uACC4\uC0B0 \uC870\uD68C\uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.${h}`,type:"W"})}},Ft=async e=>{const t=i.getValue(e,"Cino");try{return(await H.get("@api/business/nego/TotalSaleKorAmt",{params:{cino:t}})).data}catch(o){A({visible:!0,desc:`\uACC4\uC0B0 \uC870\uD68C\uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.${o}`})}},Gt=()=>{a.Common.fValidate(a.Common.fEmptyReturn(b.current)==="",`\uAD6C\uB9E4\uC785\uACE0\uBC88\uD638\uAC00 \uC120\uD0DD\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. 
\uD655\uC778\uD574 \uC8FC\uC2ED\uC2DC\uC624.`)||_e(!0)},Pt=()=>_e(!1),qe=async e=>{if(I.fGetBinding()||fe.current==="Y")return;const t=i.getJsonRows().map(u=>({Negono:u.Negono,Cino:u.Cino,Custcd:u.Custcd,Guid:u.Guid,Negoamt:u.Negoamt,Negokoramt:u.Negokoramt,Salamt:u.Salamt,Salexchange:u.Salexchange,Salkoramt:u.Salkoramt})),o=JSON.stringify(t);let r;try{r=(await H.get("/@api/business/nego/negoColumnNegokoramtCalcXrows",{params:{checkResultGrid2JsonString:o,NewExchange:e}})).data.result.recordset;let s;if(r.length!==i.getJsonRows().length)return;r.forEach((d,N)=>{d.rowNo>=1?s=d.rowNo-1:s=N,i.setValue(s,"Difamt",d.Difamt),i.setValue(s,"Janamt",d.Janamt),i.setValue(s,"Totalnegoamt",d.Totalnegoamt),i.setValue(s,"Totalnegokoramt",d.Totalnegokoramt)})}catch(u){A({visible:!0,desc:`\uACC4\uC0B0 \uC870\uD68C\uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.${u}`,type:"E"});return}},Ce=e=>{const t=i.getJsonRows();t[e].Negoexchange!==void 0&&t[e].Negoamt!==void 0&&i.setValue(e,"Difamt",Math.floor(t[e].Negoexchange*t[e].Negoamt)),i.setValue(e,"Negokoramt",Math.floor(t[e].Negoexchange*t[e].Negoamt))},Ae=(e,t)=>{t&&F({...w,SchWriting:e})},Yt=e=>{const t=w.SchWriting;e.key==="ArrowRight"?(t==="Y"&&F({...w,SchWriting:"N"}),t==="N"&&F({...w,SchWriting:"Y"})):e.key==="ArrowLeft"?(t==="N"&&F({...w,SchWriting:"Y"}),t==="Y"&&F({...w,SchWriting:"N"})):e.shiftKey&&e.key==="Tab"?(e.preventDefault(),M.setFocus()):e.key==="Tab"&&(e.preventDefault(),document.getElementById(a.Common.fMakeId("SchFrDate")).focus())},j=()=>{let e=0;g.getJsonRows().forEach(t=>{t.prodMoney&&(e+=t.prodMoney)}),a.Common.fFieldChange(S,"expenseAmt",e)},be=async(e,t)=>{try{return(await H.get("/@api/business/nego/selectByExchange",{params:{SchAccunit:E.user.accunit,SchCurrcd:e,SchExchangeDate:t}})).data}catch{A({visible:!0,desc:"\uD658\uC728\uC815\uBCF4 \uC870\uD68C\uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.",type:"E"})}},Re=(e,t)=>{let o=0;for(let r in e)o+=Object.getOwnPropertyDescriptor(e[r],`${t}`).value;return o},v=e=>{a.Common.fMultiFieldChange(S,{Negoamt:Re(e,"Negoamt"),Negokoramt:Re(e,"Negokoramt"),Difamt:Re(e,"Difamt")})},Ot=()=>{g.getJsonRows().forEach((t,o)=>{!t.jukyoNm&&!t.jukyoCd&&!t.ProtypeNm&&!t.ProtypeCd&&!t.currMoney&&!t.prodMoney&&g.removeRow(o)})},_t=e=>{e.props.title==="NEGO\uAE08\uC561"?(P.current=1,setTimeout(()=>{c.commit(),c.setFocus()},100)):(P.current=2,C&&setTimeout(()=>{if(b.current){const t=c.getValue(c.getCurrent().itemIndex,"Cino"),o=c.getValue(c.getCurrent().itemIndex,"Negoseq");Y("D"),Ot();const r=g.getJsonRows().length;g.insertRow(r,{isCreated:!0,CurrNm:p.currNm,CurrCd:p.currcd,BankNm:p.custNm,BankCd:p.custcd,ciNo:t,negoItemSeq:o}),C.setCurrent({itemIndex:r,fieldName:"jukyoNm"}),g.getRows().map((s,d)=>{g.setValue(d,xe,R(d+1).format("000")),C.commit()})}C.commit(),C.setFocus()},100))},Ht=e=>{z.current=e,U.current=!0,re().then(()=>{Ae("N","checked");const t=J.searchData({fields:["NegoNo"],value:b.current,partialMatch:!0});t!=null&&M.setCurrent({dataRow:t.dataRow,column:0})})};return f.exports.useEffect(()=>{a.Common.fHotKey(I,I.isPopup,Ve,re,je,ze,Ke)},[I.HotKey]),f.exports.useEffect(()=>(dt(),pt(),Dt(),Et(),setTimeout(()=>{document.getElementById(a.Common.fMakeId("SchFrDate")).focus()},100),()=>{I.fSetHotKey()}),[]),n.createElement(n.Fragment,null,n.createElement($t,{pgmid:B,visible:"111101",onNew:Ve,onSearch:re,onSave:je,onDelete:ze,onPrint:Ke,onAttachment:Gt}),n.createElement($e,{className:"mainCon"},n.createElement(x.exports.Layout,{style:{width:"100%",height:775}},n.createElement(x.exports.LayoutPanel,{region:"west",split:!0,style:{minWidth:370,maxWidth:370}},n.createElement($e,{className:y.Scroll},n.createElement(m,{style:{marginTop:10}},n.createElement(m,{style:{marginTop:5,marginLeft:5,display:"flex",alignItems:"center"}},n.createElement(m,{className:y.SA1},n.createElement(m,{className:y.SA2},"\uACB0\uC7AC\uC0C1\uD0DC")),n.createElement(m,{id:a.Common.fMakeId("radioBox"),onKeyDown:e=>Yt(e),className:"inputCls",style:{display:"flex",flexDirection:"row",border:"1px solid #9ac9ed",borderRadius:5,height:25,width:235.82,alignItems:"center",marginLeft:6}},n.createElement(m,{style:{marginLeft:5}},n.createElement(x.exports.RadioButton,{style:{width:15,height:15},inputId:a.Common.fMakeId("notcomplated"),value:"Y",groupValue:w.SchWriting,onChange:e=>{Ae("Y",e),ot.current=!1},inputCls:"inputCls"}),n.createElement(x.exports.Label,{htmlFor:a.Common.fMakeId("notcomplated"),style:{marginLeft:5,fontSize:12}},"\uC791\uC131\uC911+\uBC18\uB824")),n.createElement(m,{style:{marginLeft:25}},n.createElement(x.exports.RadioButton,{style:{width:15,height:15},inputId:a.Common.fMakeId("all"),value:"N",groupValue:w.SchWriting,onChange:e=>Ae("N",e),inputCls:"inputCls"}),n.createElement(x.exports.Label,{htmlFor:a.Common.fMakeId("all"),style:{marginLeft:5,fontSize:12}},"\uC804\uCCB4")))),n.createElement(m,{style:{paddingLeft:5,marginTop:0}},n.createElement(m,{display:"flex",alignItems:"center"},n.createElement(m,{style:{marginTop:3,display:"flex",alignItems:"center"}},n.createElement(m,{className:y.SA1},n.createElement(m,{className:y.SA2},"\uAE30\uAC04")),n.createElement(m,{style:{display:"flex",alignItems:"center",marginLeft:5}},n.createElement(de,{inputCls:"inputCls",selected:w.SchFrDate,id:a.Common.fMakeId("SchFrDate"),inputId:a.Common.fMakeId("SchFrDate"),onHandleDateChange:e=>me(e,"fr")}),n.createElement(m,{style:{margin:"0 3px",width:"10px"}},"~"),n.createElement(de,{inputCls:"inputCls",selected:w.SchToDate,inputId:a.Common.fMakeId("SchToDate"),onHandleDateChange:e=>me(e,"to")})))),n.createElement(m,{style:{marginTop:3,display:"flex",alignItems:"center"}},n.createElement(m,{className:y.SA1},n.createElement(m,{className:y.SA2},"\uAC80\uC0C9")),n.createElement(x.exports.ComboBox,{inputCls:"inputCls",inputId:a.Common.fMakeId("cboSchType"),data:lt,value:w.cboSchType,editable:!1,onChange:e=>a.Common.fFieldChange(F,"cboSchType",e),onSelectionChange:e=>{a.Common.fGridSort(M,e.value,{0:"ApprDocProg",1:"NegoDate",2:"NegoNo",3:"CustNm"})},panelStyle:{height:100},className:y.SA4,style:{marginLeft:5}}),n.createElement(m,{onKeyDown:e=>{e.key==="Tab"&&e.shiftKey===!1&&(e.preventDefault(),setTimeout(()=>{M.setFocus()},0))}},n.createElement(x.exports.TextBox,{inputCls:"inputCls",inputId:a.Common.fMakeId("SchText"),className:y.SA5,onChange:e=>{a.Common.fFieldChange(F,"SchText",e),M.commit(),a.Common.fSearchMatch(M,J,w.cboSchType,{0:"ApprDocProg",1:"NegoDate",2:"NegoNo",3:"CustNm"},e)},value:w.SchText})))),n.createElement(m,{style:{marginTop:5}},n.createElement(m,{ref:Me,id:a.Common.fMakeId("Grid1"),style:{width:"100%",height:649}}))))),n.createElement(x.exports.Layout,null,n.createElement(x.exports.LayoutPanel,null,n.createElement(m,{style:{display:"flex",height:300}},n.createElement(x.exports.Form,{style:{maxWidth:"100%"},model:p,rules:nt},n.createElement(m,{style:{width:"100%",height:"100%",borderRadius:"5px",display:"flex",flexDirection:"row",padding:5}},n.createElement(m,{style:{marginTop:3,display:"flex",flexDirection:"column"}},n.createElement(m,{style:{marginTop:3,display:"flex",alignItems:"center"}},n.createElement(m,{className:y.SC1},n.createElement(m,{className:y.SC2},"\uC791\uC131\uBC88\uD638")),n.createElement(x.exports.TextBox,{inputCls:"inputCls",name:"NegoNo",inputId:a.Common.fMakeId("NegoNo"),value:p.NegoNo,onChange:e=>a.Common.fFieldChange(S,"NegoNo",e),editable:!1,className:y.textBoxMatchPickDateBox,disabled:!0})),n.createElement(m,{style:{marginTop:3,display:"flex",alignItems:"center"}},n.createElement(m,{className:y.SC1},n.createElement(m,{className:y.SC2},"\uC791\uC131\uC77C\uC790",n.createElement(Qe,{style:{marginLeft:25,color:"#ffa8a8"},size:10}))),n.createElement(de,{inputCls:"inputCls",selected:p.NegoDate,inputId:a.Common.fMakeId("NegoDate"),disabled:!!b.current,onHandleDateChange:e=>{a.Common.fFieldChange(S,"NegoDate",e),X.current=e},style:{width:110},inputRequired:!0})),n.createElement(m,{onKeyDown:e=>{e.shiftKey&&e.keyCode===9&&(e.preventDefault(),c.setFocus())}},n.createElement(ue,{ComponentCode:p.custcd,ComponentValue:p.custNm,helper:a.CodeHelper.helperBankDNm,id:"custNm",inputCls:"inputCls",inputRequired:!0,inputStyles:{width:150,margin:"0px 0px 5px 0px"},inputType:"NotCust",labelStyles:{width:90,height:25,margin:"3px 10px 5px 10px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},pgmid:B,SetValue:oe,title:"\uC740\uD589"})),n.createElement(m,{style:{marginTop:3,display:"flex",alignItems:"center"}},n.createElement(m,{className:y.SC1},n.createElement(m,{className:y.SC2},"\uACC4\uC88C\uBC88\uD638")),n.createElement(x.exports.TextBox,{inputCls:"inputCls",inputId:a.Common.fMakeId("AccountNo"),name:"AccountNo",value:p.AccountNo,className:y.textBoxMatchPickDateBox,onChange:e=>a.Common.fFieldChange(S,"AccountNo",e),editable:0,disabled:!0})),n.createElement(ue,{ComponentCode:p.currcd,ComponentValue:p.currNm,helper:a.CodeHelper.helperCurrNm,id:"currNm",inputCls:"inputCls",inputRequired:!0,inputStyles:{width:150,margin:"0px 0px 5px 0px"},inputType:"currNm",labelStyles:{width:90,height:25,margin:"3px 10px 5px 10px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},pgmid:B,SetValue:oe,title:"\uD654\uD3D0\uCF54\uB4DC"}),n.createElement(ue,{ComponentCode:p.ingubun,ComponentValue:p.ingubunNm,helper:a.CodeHelper.helperIngubun,id:"ingubunNm",inputCls:"inputCls",inputStyles:{width:150,margin:"0px 0px 5px 0px"},inputType:"ingubunNm",labelStyles:{width:90,height:25,margin:"3px 10px 5px 10px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},pgmid:B,SetValue:oe,title:"\uC785\uAE09\uAD6C\uBD84"}),n.createElement(m,{style:{marginTop:3,display:"flex",alignItems:"center"}},n.createElement(m,{className:y.SC1},n.createElement(m,{className:y.SC2},"\uD658\uC728\uC77C\uC790",n.createElement(Qe,{style:{marginLeft:25,color:"#ffa8a8"},size:10}))),n.createElement(de,{inputCls:"inputCls",selected:p.RateDay,inputId:a.Common.fMakeId("RateDay"),onHandleDateChange:e=>{W.current=e,St(e)},style:{width:110},inputRequired:!0})),n.createElement(m,{style:{marginTop:3,display:"flex",alignItems:"center"}},n.createElement(m,{className:y.SC1},n.createElement(m,{className:y.SC2},"NEGO\uD658\uC728")),n.createElement(m,{onKeyDown:e=>{e.keyCode==13&&document.getElementById(a.Common.fMakeId("Dept")).focus()}},n.createElement(x.exports.NumberBox,{inputCls:"inputCls",inputId:a.Common.fMakeId("Exchange"),name:"Exchange",value:p.Exchange,groupSeparator:",",precision:ee.current==="Y"?4:2,onChange:e=>{wt(e)},spinners:!1,className:y.textBoxMatchPickDateBox,inputStyle:{textAlign:"right"},min:1e-4,max:9999999999999})))),n.createElement(m,{style:{marginTop:3,paddingLeft:15,display:"flex",flexDirection:"column"}},n.createElement(ue,{ComponentCode:p.Deptcd,ComponentValue:p.Deptnm,helper:a.CodeHelper.helperDeptNm,id:"Dept",inputCls:"inputCls",inputStyles:{width:150,margin:"0px 0px 5px 0px"},inputType:"Dept",labelStyles:{width:90,height:25,margin:"3px 10px 5px 10px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},pgmid:B,SetValue:oe,title:"\uBD80\uC11C\uBA85",inputRequired:!0}),n.createElement(m,{onKeyDown:e=>{e.key=="Tab"&&(e.preventDefault(),P.current==1?c.setFocus():C.setFocus()),e.shiftKey&&e.keyCode==9&&(e.preventDefault(),document.getElementById(a.Common.fMakeId("Dept")).focus())}},n.createElement(ue,{ComponentCode:p.Pno,ComponentValue:p.PName,helper:a.CodeHelper.helperPnoNm2,id:"Pno",inputCls:"inputCls",inputRequired:!0,inputStyles:{width:150,margin:"0px 0px 5px 0px"},inputType:"Pno",labelStyles:{width:90,height:25,margin:"3px 10px 5px 10px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},pgmid:B,SetValue:oe,title:"\uC0AC\uC6D0\uBA85"})),n.createElement(m,{style:{marginTop:3,display:"flex",alignItems:"center",height:"29px"}}),n.createElement(m,{style:{marginTop:3,display:"flex",alignItems:"center"}},n.createElement(m,{className:y.SC1},n.createElement(m,{className:y.SC2},"Nego\uD1B5\uD654\uD569\uACC4")),n.createElement(x.exports.NumberBox,{inputId:a.Common.fMakeId("Negoamt"),name:"Negoamt",precision:2,value:p.Negoamt,groupSeparator:",",spinners:!1,className:y.textBoxMatchPickDateBox,inputStyle:{textAlign:"right"},disabled:!0})),n.createElement(m,{style:{marginTop:3,display:"flex",alignItems:"center"}},n.createElement(m,{className:y.SC1},n.createElement(m,{className:y.SC2},"Nego\uC6D0\uD654\uD569\uACC4")),n.createElement(x.exports.NumberBox,{name:"Negokoramt",inputId:a.Common.fMakeId("Negokoramt"),value:p.Negokoramt,groupSeparator:",",spinners:!1,className:y.textBoxMatchPickDateBox,inputStyle:{textAlign:"right"},disabled:!0})),n.createElement(m,{style:{marginTop:3,display:"flex",alignItems:"center"}},n.createElement(m,{className:y.SC1},n.createElement(m,{className:y.SC2},"\uBE44\uC6A9\uD569\uACC4")),n.createElement(x.exports.NumberBox,{name:"expenseAmt",inputId:a.Common.fMakeId("expenseAmt"),value:p.expenseAmt,groupSeparator:",",spinners:!1,className:y.textBoxMatchPickDateBox,inputStyle:{textAlign:"right"},disabled:!0})),n.createElement(m,{style:{marginTop:3,display:"flex",alignItems:"center"}},n.createElement(m,{className:y.SC1},n.createElement(m,{className:y.SC2},"\uD658\uCC28\uD569\uACC4")),n.createElement(x.exports.NumberBox,{inputId:a.Common.fMakeId("Difamt"),name:"Difamt",value:p.Difamt,groupSeparator:",",spinners:!1,className:y.textBoxMatchPickDateBox,inputStyle:{textAlign:"right"},disabled:!0})),n.createElement(m,{style:{marginTop:3,display:"flex",alignItems:"center"}},n.createElement(m,{className:y.SC1},n.createElement(m,{className:y.SC2},"\uC804\uD45C\uC77C\uC790/\uBC88\uD638")),n.createElement(m,{onKeyDown:e=>{kt(e)}},n.createElement(x.exports.TextBox,{name:"slipno",prettierFiller:"",prettierFiller2:"",prettierFiller3:"",inputId:a.Common.fMakeId("slipno"),editable:!1,value:p.slipno,className:y.textBoxMatchPickDateBox,disabled:!0}))))))),n.createElement(x.exports.Tabs,{ref:Q,scrollable:!0,onTabSelect:_t,id:"tabMaster"},n.createElement(x.exports.TabPanel,{key:0,title:"NEGO\uAE08\uC561",id:"tabPanel1",selected:!0},n.createElement(m,{ref:ve,id:a.Common.fMakeId("Grid2"),style:{width:"100%",height:428,marginTop:5}})),n.createElement(x.exports.TabPanel,{key:1,title:"\uBD80\uB300\uBE44\uC6A9",id:a.Common.fMakeId("tabPanel2")},n.createElement(m,{ref:Ie,id:a.Common.fMakeId("Grid3"),style:{width:"100%",height:428,marginTop:5}})))),n.createElement(x.exports.LayoutPanel,{region:"east",title:z.current,collapsible:!0,collapsed:!0,expander:!0,style:{width:400}},n.createElement(m,{style:{marginTop:10}},n.createElement(Qt,{ApprovalDocFlag:"A",ApprovalDocNo:b.current,ApprovalDocSource:"NEGO",ApprovalType:"A",AttachmentsKeyName:"\uBB38\uC11C\uBC88\uD638",RetrieveFlag:pe.current,filepath:"NEGO",Init:Ze.current,isAttachments:!0,isImageComponent:!0,MaxRevNo:et.current,PGMID:B,RevNo:tt.current,SetTitle:Ht})))))),rt&&n.createElement(x.exports.Dialog,{title:n.createElement(m,{style:{display:"flex"}},n.createElement("img",{src:jt,alt:"logo",style:{width:"50px"}})," ",n.createElement(m,{style:{marginLeft:15}},"\uC120\uC801\uC77C\uC790\uBCC4 \uC678\uC0C1\uB9E4\uCD9C\uAE08 \uBBF8\uACB0\uC81C \uD604\uD669")),style:{width:"1870px",height:"900px"},bodyCls:"f-column",closable:!0,draggable:!0,modal:!0,onClose:()=>Ye(!1)},n.createElement(m,{className:"f-full"},n.createElement("div",{id:"crownix-viewer",style:{position:"absolute",width:"100%",height:"100%"}}))),n.createElement(zt,{visible:O.visible,description:O.desc,value:O.value,datas:O.datas,id:O.id,viewId:O.viewId,selectedData:O.selectedData,width:Z.current,onConfirm:Vt,onCancel:()=>At({target:O.id})}),ut&&n.createElement(Zt,{PGMID:B,FileTitle:"NEGO \uBC88\uD638",FileType:Fe.current,FileNo:b.current,FilePath:"NEGO",setClose:Pt}),n.createElement(Wt,{visible:he.visible,description:he.desc,type:he.type,onConfirm:()=>A({visible:!1})}),n.createElement(qt,{visible:te.visible,description:te.desc,onCancel:It,onConfirm:vt}))});let J,i,g,M,c,C;const la=Jt(na);export{ya as default};
