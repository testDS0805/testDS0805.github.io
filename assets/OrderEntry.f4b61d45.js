import{r as c,R as s}from"./index.da6908f5.js";import{m as n,o as U,c as F,u as H,h as w,s as k,P,B as r,r as R,aa as O,A as Y,t as D,d as Q}from"./App.11263b70.js";import{C as y}from"./CodeHelperTextBox.44393744.js";import{C as z}from"./CommonButton.0b792d77.js";const L=[{fieldName:"GoodNo"},{fieldName:"Goodcd"},{fieldName:"StkQty",dataType:n.exports.ValueType.NUMBER},{fieldName:"AssemQty",dataType:n.exports.ValueType.NUMBER},{fieldName:"AcceptQty",dataType:n.exports.ValueType.NUMBER},{fieldName:"PossQty",dataType:n.exports.ValueType.NUMBER},{fieldName:"MinQty",dataType:n.exports.ValueType.NUMBER},{fieldName:"AddQty",dataType:n.exports.ValueType.NUMBER},{fieldName:"MaxQty",dataType:n.exports.ValueType.NUMBER},{fieldName:"GoodTypeNm"},{fieldName:"Class2Nm"},{fieldName:"Class3Nm"},{fieldName:"Class4Nm"},{fieldName:"Class5Nm"},{fieldName:"GoodNm"},{fieldName:"Spec"},{fieldName:"Weight",dataType:n.exports.ValueType.NUMBER},{fieldName:"Box2_Weight",dataType:n.exports.ValueType.NUMBER},{fieldName:"Box_Kind_LNL"},{fieldName:"SUS316_Price",dataType:n.exports.ValueType.NUMBER},{fieldName:"SUS316_Price_2"},{fieldName:"DiscountRate"}],W=[{name:"GoodNo",fieldName:"GoodNo",header:{text:"Part Number"},width:180,editable:!1,styleName:"left-column"},{name:"Spec",fieldName:"Spec",header:{text:"Sizes"},width:220,editable:!1,styleName:"left-column"},{name:"GoodNm",fieldName:"GoodNm",header:{text:"Description"},renderer:{type:"text",showTooltip:!0},width:220,editable:!1,styleName:"left-column"},{name:"PossQty",fieldName:"PossQty",header:{text:"Available Quantity"},numberFormat:"#,##0",styleName:"right-column rg-semired-color",editable:!1},{name:"Class5Nm",fieldName:"Class5Nm",header:{text:"Material"},editable:!1,styleName:"center-column"},{name:"Class2Nm",fieldName:"Class2Nm",header:{text:"Category"},editable:!1,styleName:"center-column"},{name:"Class3Nm",fieldName:"Class3Nm",header:{text:"Subcategory"},editable:!1,styleName:"center-column"},{name:"Class4Nm",fieldName:"Class4Nm",header:{text:"Title"},editable:!1,styleName:"center-column"}],_={S1:{margin:"3px 10px",backgroundColor:"#e0ecff",color:"#163971",padding:5,height:25,fontSize:"12px",display:"flex",alignItems:"center",width:90,fontWeight:600},S2:{width:80},S3:{width:185,height:25,"& input":{fontSize:"12px !important"}}},X=U(()=>{const{$CommonStore:d,$UserStore:C}=H(),x=K(),m="ABROADORDERENTRY",T=c.exports.useRef(null),[M]=c.exports.useState(C.fCheckAuth(`${m}|SEARCH`)),[o,p]=c.exports.useState({SchAccunit:"001",SchFactory:"00A",SchGoodno:"",SchYmd:w(new Date).format("YYYYMMDD"),SchGoodtype:"055004",SchClass2:"",SchClass2Nm:"",SchClass3:"",SchClass3Nm:"",SchClass4:"",SchClass4Nm:"",SchClass5:"",SchClass5Nm:"",SchCustCd:C.user.custcd,SchUserID:C.user.userid}),[g,f]=c.exports.useState({visible:!1,desc:"",type:"N"}),t=new D(m,f),a=new k,[G,E]=c.exports.useState(a.helperClass3),[B,S]=c.exports.useState(a.helperClass4),A=()=>{h=new n.exports.LocalDataProvider(!1),i=new n.exports.GridView(T.current),i.setDataSource(h),h.setFields(L),i.setColumns(W),i.setCheckBar({visible:!1}),i.setStateBar({visible:!1}),i.setFooters({visible:!1}),i.setRowIndicator({visible:!0}),i.setCopyOptions({singleMode:!0,enabled:!0}),i.displayOptions.selectionStyle="singleRow",i.setDisplayOptions({fitStyle:"evenFill",rowHeight:25}),i.setOptions({summaryMode:"aggregate"}),i.setEditOptions({insertable:!1,editable:!1})},V=()=>{setTimeout(()=>{t.fSetTabIndex()},300)},N=async e=>{d.Codeclass.inputType!=="DEL"&&d.Codeclass.inputType!=="INSERT"&&setTimeout(()=>{t.fMakeFocus(e)},10),v(e,d.Codeclass.selData)},v=(e,l)=>{switch(e){case"SchClass2Nm":t.fMultiFieldChange(p,{SchClass2:t.fTrim(l.minorcd),SchClass2Nm:t.fTrim(l.minornm),SchClass3:"",SchClass3Nm:"",SchClass4:"",SchClass4Nm:""}),l.minorcd?(E(a.fRedefHelper(a.helperClass3,{iInId:"AGENT062",iInCode1:"061",iInCode2:l.minorcd})),S(a.fRedefHelper(a.helperClass4,{iInId:"AGENT062",iInCode1:"062",iInCode2:""}))):(E(a.fRedefHelper(a.helperClass3,{iInId:"AGENT062",iInCode1:"061",iInCode2:""})),S(a.fRedefHelper(a.helperClass4,{iInId:"AGENT062",iInCode1:"062",iInCode2:""})));break;case"SchClass3Nm":t.fMultiFieldChange(p,{SchClass3:t.fTrim(l.minorcd),SchClass3Nm:t.fTrim(l.minornm),SchClass4:"",SchClass4Nm:""}),l.minorcd?S(a.fRedefHelper(a.helperClass4,{iInId:"AGENT062",iInCode1:"062",iInCode2:l.minorcd})):S(a.fRedefHelper(a.helperClass4,{iInId:"AGENT062",iInCode1:"062",iInCode2:""}));break;case"SchClass4Nm":t.fMultiFieldChange(p,{SchClass4:t.fTrim(l.minorcd),SchClass4Nm:t.fTrim(l.minornm)});break;case"SchClass5Nm":t.fMultiFieldChange(p,{SchClass5:t.fTrim(l.minorcd),SchClass5Nm:t.fTrim(l.minornm)});break}},b=()=>{t.fMultiFieldChange(p,{SchAccunit:"001",SchFactory:"00A",SchGoodno:"",SchYmd:w(new Date).format("YYYYMMDD"),SchGoodtype:"055004",SchClass2:"",SchClass2Nm:"",SchClass3:"",SchClass3Nm:"",SchClass4:"",SchClass4Nm:"",SchClass5:"",SchClass5Nm:"",SchCustCd:C.user.custcd,SchUserID:C.user.userid}),h.clearRows(),i.orderBy([],[])},u=async()=>{if(o.SchGoodno.length<3&&t.fValidate(!o.SchClass4,"Please select at least 3 digits for Part Number or Title."))return;h.clearRows(),i.orderBy([],[]);let e={...o};e.SchClass2=e.SchClass2?e.SchClass2:"",e.SchClass2Nm=e.SchClass2Nm?e.SchClass2Nm:"",e.SchClass3=e.SchClass3?e.SchClass3:"",e.SchClass3Nm=e.SchClass3Nm?e.SchClass3Nm:"",e.SchClass4=e.SchClass4?e.SchClass4:"",e.SchClass4Nm=e.SchClass4Nm?e.SchClass4Nm:"",e.SchClass5=e.SchClass5?e.SchClass5:"",e.SchClass5Nm=e.SchClass5Nm?e.SchClass5Nm:"";try{const I=(await Q.get("/@api/abroad/orderentry/selectByList",{params:e})).data;I?h.setRows(I):f({visible:!0,desc:"There is no result for your request."})}catch{f({visible:!0,desc:"An error occurred while retrieving data."})}};return c.exports.useEffect(()=>{t.fHotKey(d,d.isPopup,b,u)},[d.HotKey]),c.exports.useEffect(()=>{V(),A()},[]),s.createElement(s.Fragment,null,s.createElement(z,{pgmid:m,visible:"11000",onNew:b,onSearch:u}),s.createElement(P,{className:"mainCon"},s.createElement(r,{style:{width:"100%",height:87,paddingLeft:5,border:"1px solid #e2e2e2",borderRadius:5,display:"flex",flexDirection:"column"}},s.createElement(r,{display:"flex",flexDirection:"row",alignItems:"baseline"},s.createElement(r,null,s.createElement(r,{style:{marginTop:5,display:"flex",alignItems:"center"}},s.createElement(y,{inputCls:"inputCls",pgmid:m,inputType:"",id:"SchClass2Nm",title:"Category",helper:a.helperClass2,onConfirm:()=>N("SchClass2Nm"),inputValue:o.SchClass2Nm,labelStyles:{width:90,height:25,margin:"3px 10px 5px 10px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},inputStyles:{width:185,margin:"0px 0px 5px 0px"}}),s.createElement(y,{inputCls:"inputCls",pgmid:m,inputType:"",id:"SchClass3Nm",title:"SubCategory",helper:G,onConfirm:()=>N("SchClass3Nm"),inputValue:o.SchClass3Nm,labelStyles:{width:90,height:25,margin:"3px 10px 5px 25px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},inputStyles:{width:185,margin:"0px 0px 5px 0px"}}),s.createElement(y,{inputCls:"inputCls",pgmid:m,inputType:"",id:"SchClass4Nm",title:"Title",helper:B,onConfirm:()=>N("SchClass4Nm"),inputValue:o.SchClass4Nm,labelStyles:{width:90,height:25,margin:"3px 10px 5px 25px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},inputStyles:{width:185,margin:"0px 0px 5px 0px"},inputRequired:!0}),s.createElement(y,{inputCls:"inputCls",pgmid:m,inputType:"",id:"SchClass5Nm",title:"Material",helper:a.helperClass5,onConfirm:()=>N("SchClass5Nm"),inputValue:o.SchClass5Nm,labelStyles:{width:90,height:25,margin:"3px 10px 5px 25px",padding:5,fontSize:12,display:"flex",alignItems:"center",fontWeight:600},inputStyles:{width:185,margin:"0px 0px 5px 0px"}})),s.createElement(r,{style:{marginTop:5,display:"flex",alignItems:"center"}},s.createElement(r,{className:x.S1},s.createElement(r,{className:x.S2},"Part Number")),s.createElement(r,{onKeyDown:e=>{e.key==="Enter"&&u()}},s.createElement(R.exports.TextBox,{inputCls:"inputCls",name:"SchGoodno",inputId:t.fMakeId("SchGoodno"),value:o.SchGoodno,onChange:e=>t.fFieldChange(p,"SchGoodno",e),className:x.S3})),s.createElement(r,{style:{marginLeft:15}},s.createElement(R.exports.LinkButton,{className:"c9",style:{width:110,height:25,color:"#424242",borderRadius:3},disabled:!M,onClick:u},s.createElement(r,{style:{width:100,height:30,display:"flex",alignItems:"center",justifyContent:"center"}},s.createElement(O,{size:12}),s.createElement(r,{style:{marginLeft:5,fontSize:12,paddingBottom:2,fontWeight:500}},"SEARCH")))))))),s.createElement(r,{ref:T,style:{width:"100%",height:680,marginTop:5}})),s.createElement(Y,{visible:g.visible,description:g.desc,type:g.type,onConfirm:()=>f({visible:!1})}))});let h,i;const K=F(_);export{X as default};
