var fe=Object.defineProperty;var he=(N,e,t)=>e in N?fe(N,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):N[e]=t;var m=(N,e,t)=>(he(N,typeof e!="symbol"?e+"":e,t),t);import{r as E,R as u}from"./index.da6908f5.js";import{m as l,D as w,a4 as Z,d as V,n as q,o as ye,c as Be,u as ge,h as O,P as Ee,B as d,r as D,q as De,f as xe,A as be,i as Te}from"./App.11263b70.js";import{g as L}from"./GridCtrl.5c3948f6.js";import{C as Se,c as Ne,d as we}from"./CommonButton.0b792d77.js";import{T as Re}from"./Toast.7cbbb43f.js";const Ae=[{fieldName:"Contractyn",dataType:l.exports.ValueType.TEXT},{fieldName:"Productgubun",dataType:l.exports.ValueType.TEXT},{fieldName:"Fileno",dataType:l.exports.ValueType.TEXT},{fieldName:"BalDate",dataType:l.exports.ValueType.TEXT},{fieldName:"Workno",dataType:l.exports.ValueType.TEXT},{fieldName:"Goodno",dataType:l.exports.ValueType.TEXT},{fieldName:"Orderqty",dataType:l.exports.ValueType.NUMBER},{fieldName:"Pmsprocessnm",dataType:l.exports.ValueType.TEXT},{fieldName:"HCN",dataType:l.exports.ValueType.TEXT},{fieldName:"Balqty",dataType:l.exports.ValueType.NUMBER},{fieldName:"DelvDate",dataType:l.exports.ValueType.TEXT},{fieldName:"Pmsprodinqty",dataType:l.exports.ValueType.NUMBER},{fieldName:"Miqty",dataType:l.exports.ValueType.NUMBER},{fieldName:"Goodnoweight",dataType:l.exports.ValueType.NUMBER},{fieldName:"Weightunit",dataType:l.exports.ValueType.TEXT},{fieldName:"BalPrice",dataType:l.exports.ValueType.NUMBER},{fieldName:"BalAmount",dataType:l.exports.ValueType.NUMBER},{fieldName:"NapDate",dataType:l.exports.ValueType.TEXT},{fieldName:"Remark",dataType:l.exports.ValueType.TEXT},{fieldName:"Supremark",dataType:l.exports.ValueType.TEXT},{fieldName:"Clsgubun",dataType:l.exports.ValueType.TEXT},{fieldName:"Balno",dataType:l.exports.ValueType.TEXT},{fieldName:"Balseq",dataType:l.exports.ValueType.TEXT},{fieldName:"WorkOrderYn",dataType:l.exports.ValueType.TEXT}],Ie=[{name:"Contractyn",fieldName:"Contractyn",type:"data",width:50,editable:!1,header:{text:"\uAD6C\uBD84"},renderer:{type:"text",showTooltip:!0}},{name:"Productgubun",fieldName:"Productgubun",type:"data",width:60,editable:!1,header:{text:"\uBC1C\uC8FC\uAD6C\uBD84"},renderer:{type:"text",showTooltip:!0}},{name:"Fileno",fieldName:"Fileno",type:"data",width:80,editable:!1,header:{text:"\uBC1C\uC8FC\uBC88\uD638"},renderer:{type:"text",showTooltip:!0}},{name:"BalDate",fieldName:"BalDate",type:"data",width:80,editable:!1,header:{text:"\uBC1C\uC8FC\uC77C\uC790"},renderer:{type:"text",showTooltip:!0}},{name:"Workno",fieldName:"Workno",type:"data",width:80,editable:!1,header:{text:"\uC791\uC9C0\uBC88\uD638"},renderer:{type:"text",showTooltip:!0}},{name:"Goodno",fieldName:"Goodno",type:"data",width:170,editable:!1,header:{text:"\uD488\uBC88"},renderer:{type:"text",showTooltip:!0}},{name:"Orderqty",fieldName:"Orderqty",type:"data",width:70,editable:!1,styleName:"right-column",header:{text:"\uC9C0\uC2DC\uC218\uB7C9"},footer:{numberFormat:"#,##0",expression:"sum"},groupFooter:{numberFormat:"#,##0",expression:"sum",styleName:"right-column"},numberFormat:"#,##0",renderer:{type:"text",showTooltip:!0}},{name:"Pmsprocessnm",fieldName:"Pmsprocessnm",type:"data",width:70,editable:!1,header:{text:"\uACF5\uC815"},renderer:{type:"text",showTooltip:!0}},{name:"HCN",fieldName:"HCN",type:"data",width:50,editable:!1,header:{text:"HCN"},renderer:{type:"text",showTooltip:!0}},{name:"Balqty",fieldName:"Balqty",type:"data",width:70,editable:!1,styleName:"right-column",header:{text:"\uBC1C\uC8FC\uC218\uB7C9"},footer:{numberFormat:"#,##0",expression:"sum"},groupFooter:{numberFormat:"#,##0",expression:"sum",styleName:"right-column"},numberFormat:"#,##0",renderer:{type:"text",showTooltip:!0}},{name:"DelvDate",fieldName:"DelvDate",type:"data",width:80,editable:!1,header:{text:"\uC785\uACE0\uC77C\uC790"},renderer:{type:"text",showTooltip:!0}},{name:"Pmsprodinqty",fieldName:"Pmsprodinqty",type:"data",width:80,editable:!1,styleName:"right-column",header:{text:"\uAE30\uB0A9\uD488\uC218\uB7C9"},footer:{numberFormat:"#,##0",expression:"sum"},groupFooter:{numberFormat:"#,##0",expression:"sum",styleName:"right-column"},numberFormat:"#,##0",renderer:{type:"text",showTooltip:!0}},{name:"Miqty",fieldName:"Miqty",type:"data",width:80,editable:!1,styleName:"right-column",header:{text:"\uBBF8\uB0A9\uB7C9"},footer:{numberFormat:"#,##0",expression:"sum"},groupFooter:{numberFormat:"#,##0",expression:"sum",styleName:"right-column"},numberFormat:"#,##0",renderer:{type:"text",showTooltip:!0}},{name:"Goodnoweight",fieldName:"Goodnoweight",type:"data",width:60,editable:!1,styleName:"right-column",header:{text:"\uB2E8\uC911"},numberFormat:"#,##0",renderer:{type:"text",showTooltip:!0}},{name:"Weightunit",fieldName:"Weightunit",type:"data",width:60,editable:!1,header:{text:"\uB2E8\uC911\uB2E8\uC704"},renderer:{type:"text",showTooltip:!0}},{name:"BalPrice",fieldName:"BalPrice",type:"data",width:80,editable:!1,styleName:"right-column",header:{text:"\uBC1C\uC8FC\uB2E8\uAC00"},numberFormat:"#,##0",renderer:{type:"text",showTooltip:!0}},{name:"BalAmount",fieldName:"BalAmount",type:"data",width:100,editable:!1,styleName:"right-column",header:{text:"\uBC1C\uC8FC\uAE08\uC561"},footer:{numberFormat:"#,##0",expression:"sum"},groupFooter:{numberFormat:"#,##0",expression:"sum",styleName:"right-column"},numberFormat:"#,##0",renderer:{type:"text",showTooltip:!0}},{name:"Napdate",fieldName:"Napdate",type:"data",width:80,editable:!1,header:{text:"\uB0A9\uAE30\uC77C"},renderer:{type:"text",showTooltip:!0}},{name:"Remark",fieldName:"Remark",type:"data",width:80,editable:!0,header:{text:"\uBE44\uACE0(\uBC1C\uC8FC\uC790)"},renderer:{type:"text",showTooltip:!0}},{name:"Supremark",fieldName:"Supremark",type:"data",width:150,editable:!0,header:{text:"\uBE44\uACE0"},renderer:{type:"text",showTooltip:!0}},{name:"Clsgubun",fieldName:"Clsgubun",type:"data",width:50,editable:!1,header:{text:"\uB9C8\uAC10"},renderer:{type:"text",showTooltip:!0}},{name:"WorkOrderYn",fieldName:"WorkOrderYn",type:"data",width:90,editable:!1,header:{text:"\uC791\uC5C5\uC9C0\uC2DC \uC5EC\uBD80"},renderer:{type:"text",showTooltip:!0}}],Ve=[{fieldName:"Guid",dataType:l.exports.ValueType.TEXT},{fieldName:"Workno",dataType:l.exports.ValueType.TEXT},{fieldName:"Seq",dataType:l.exports.ValueType.NUMBER},{fieldName:"Operationseq",dataType:l.exports.ValueType.TEXT},{fieldName:"Operationcd",dataType:l.exports.ValueType.TEXT},{fieldName:"Operationnm",dataType:l.exports.ValueType.TEXT},{fieldName:"Workdirection",dataType:l.exports.ValueType.TEXT},{fieldName:"Shopcd",dataType:l.exports.ValueType.TEXT},{fieldName:"Shopnm",dataType:l.exports.ValueType.TEXT},{fieldName:"Operationdate",dataType:"datetime",datetimeFormat:"yyyyMMdd"},{fieldName:"Workpno",dataType:l.exports.ValueType.TEXT},{fieldName:"Qty",dataType:l.exports.ValueType.NUMBER},{fieldName:"ErrQty",dataType:l.exports.ValueType.NUMBER},{fieldName:"Check",dataType:l.exports.ValueType.TEXT},{fieldName:"Remark",dataType:l.exports.ValueType.TEXT},{fieldName:"SeqSort",dataType:l.exports.ValueType.NUMBER}],ke=[{name:"Operationseq",fieldName:"Operationseq",numberFormat:"0",type:"data",width:"50",editable:!1,styleName:"right-column",header:{text:"\uC21C\uBC88",showTooltip:!0}},{name:"Workno",fieldName:"Workno",type:"data",width:"100",visible:!1,header:{text:"\uC791\uC5C5\uC9C0\uC2DC\uBC88\uD638",showTooltip:!0},renderer:{type:"text",showTooltip:!0},editor:{type:"line",textCase:"upper"}},{name:"Operationnm",fieldName:"Operationnm",width:"120",type:"data",button:"action",editable:!0,header:{text:"\uACF5\uC815\uBA85",showTooltip:!0},editor:{type:"line",textCase:"upper"},styleName:"left-column"},{name:"Workdirection",fieldName:"Workdirection",type:"data",width:"100",styleName:"left-column",header:{text:"\uC791\uC5C5\uC9C0\uC2DC\uC0AC\uD56D",showTooltip:!0},editor:{type:"line",textCase:"upper"}},{name:"Shopnm",fieldName:"Shopnm",type:"data",width:"90",styleName:"left-column",button:"action",editable:!0,header:{text:"\uC791\uC5C5\uC7A5",showTooltip:!1},editor:{type:"line",textCase:"upper"}},{name:"Qty",fieldName:"Qty",width:"90",styleName:"right-column",numberFormat:"#,##0",editable:!1,editor:{type:"number",editFormat:"#,##0"},header:{text:"\uC791\uC5C5\uC218\uB7C9",showTooltip:!1}},{name:"ErrQty",fieldName:"ErrQty",width:"90",styleName:"right-column",numberFormat:"#,##0",editable:!1,editor:{type:"number",editFormat:"#,##0"},header:{text:"\uBD88\uB7C9\uC218\uB7C9",showTooltip:!0}},{name:"Remark",fieldName:"Remark",width:"200",styleName:"left-column",header:{text:"\uBE44\uACE0",showTooltip:!1},editor:{type:"line",textCase:"upper"}}];class ve{constructor(e){m(this,"fMakeId",e=>this.PGMID+"_"+e);m(this,"fSetTabIndex",()=>{for(const[e,t]of Object.entries(document.querySelectorAll(".inputCls")))t.setAttribute("tabindex",Number(e)+1)});m(this,"fMakeFocus",e=>{const t=document.getElementsByClassName("inputCls"),s=Number(document.getElementById(this.fMakeId(e)).getAttribute("tabindex"))+1;for(let r=t.length;r--;){const i=Number(t[r].getAttribute("tabindex"));s===i&&t[r].focus()}});m(this,"fEmptyReturn",e=>e===void 0||e===""||e===null?"":e);m(this,"fCancel",e=>{document.getElementById(this.fMakeId(e)).focus()});m(this,"fInitGridHeader",(e,t,s,r,i=30,C=void 0,c=void 0)=>{e.setDataSource(t),t.setFields(s),e.setColumns(r),e.setCheckBar({visible:!1}),e.setStateBar({visible:!1}),e.setFooters({visible:!1}),e.setRowIndicator({visible:!0}),e.setEditOptions({editable:!1,appendable:!1}),e.sortingOptions.enabled=!0,e.setDisplayOptions({focusVisible:!1,selectionStyle:"singleRow",selectionMode:"none",columnMovable:!1,fitStyle:"fill"}),e.displayOptions.rowHeight=i,e.setRowStyleCallback(()=>"rg-text-black-color"),C!=null&&(e.onCurrentChanged=C),c!=null&&(e.onCellClicked=c)});m(this,"fInitGridDetail",(e,t,s,r,i=void 0,C=void 0,c=void 0)=>{e.setDataSource(t),t.setFields(s),e.setColumns(r),e.setCheckBar({visible:!0}),e.setStateBar({visible:!0}),e.setFooters({visible:!1}),e.setRowIndicator({visible:!0}),e.setEditOptions({insertable:!1,appendable:!1,editable:!0}),e.setCopyOptions({singleMode:!0,enabled:!0}),e.sortingOptions.enabled=!0,e.setDisplayOptions({focusVisible:!0,selectionStyle:"rows",selectionMode:"none",columnMovable:!1,fitStyle:"none",rowHeight:25}),e.setOptions({summaryMode:"aggregate"}),e.displayOptions.rowHeight=27,e.setRowStyleCallback(()=>"rg-text-black-color"),e.editOptions.commitLevel="warning",e.commit(),i!=null&&(e.onCellButtonClicked=i),C!=null&&(e.onCellEdited=C),c!=null&&(e.onKeyDown=c)});m(this,"fInitGridTree",(e,t,s,r)=>{t.setFields(s),e.setDataSource(t),e.setColumns(r),e.setCheckBar({visible:!1}),e.setStateBar({visible:!1}),e.setRowIndicator({visible:!0}),e.setFooters({visible:!1}),e.sortingOptions.enabled=!1,e.displayOptions.columnMovable=!1,e.setEditOptions({editable:!1,appendable:!1}),e.setRowStyleCallback(()=>"rg-text-black-color"),e.treeOptions.iconVisible=!0,e.setOptions({summaryMode:"statistical"})});m(this,"fHotKey",(e,t=void 0,s=void 0,r=void 0,i=void 0,C=void 0)=>{e.HotKey&&e.HotKey.pgmid===this.PGMID&&(e.HotKey.key==="SEARCH"?t!=null&&t(!1):e.HotKey.key==="NEW"?s!=null&&s():e.HotKey.key==="SAVE"?r!=null&&r():e.HotKey.key==="DELETE"?i!=null&&i():e.HotKey.key==="PRINT"&&C!=null&&C())});m(this,"fSearch",async(e,t,s,r,i=null)=>{e.clearRows();try{const c=(await V.get(t,{params:s})).data;c?e.setRows(c):r({visible:!0,desc:this.fEmptyReturn(i)+" \uC870\uD68C \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."})}catch{r({visible:!0,desc:this.fEmptyReturn(i)+" \uC870\uD68C\uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.",type:"E"})}});m(this,"fSearchByReturn",async(e,t)=>(await V.get(e,{params:t})).data);m(this,"fDelete",async(e,t,s,r=null)=>{try{const C=(await V.post(e,{data:t})).data;if(C.errmess!==""){s({visible:!0,desc:C.errmess,type:"E"});return}s({visible:!0,desc:this.fEmptyReturn(r)+" \uBB38\uC11C\uAC00 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4."})}catch{s({visible:!0,desc:this.fEmptyReturn(r)+" \uBB38\uC11C \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4."})}});m(this,"fDeleteCheckItem",async(e,t,s,r,i,C=null)=>{let c=[];e.getCheckedItems(!0).forEach(b=>{const R=t.getJsonRow(b);c.push(R)});try{const R=(await V.post(s,{data:r,item:c})).data;if(R.errmess!==""){i({visible:!0,desc:R.errmess,type:"E"});return}i({visible:!0,desc:this.fEmptyReturn(C)+"\uC774 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4."})}catch{i({visible:!0,desc:this.fEmptyReturn(C)+" \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4."})}});m(this,"fCheckGridData",(e,t,s,r,i=null)=>{const C=e.getRows();let c=e.getStateRows("created"),x=e.getStateRows("updated"),b="";if(C.forEach((R,k)=>{c.forEach(F=>{if(k===F){const n=e.getJsonRow(k);for(const[p,S]of Object.entries(s))if(typeof n[p]=="number"){if(n[p]===void 0||n[p]==null||n[p]==0){b=S;return}}else if(n[p]===void 0||n[p]==null||this.fEmptyReturn(n[p]==="")){b=S;return}t.push(n)}}),b==""&&(x.forEach(F=>{if(k===F){const n=e.getJsonRow(k);for(const[p,S]of Object.entries(s))if(typeof n[p]=="number"){if(n[p]===void 0||n[p]==null||n[p]==0){b=S;return}}else if(n[p]===void 0||n[p]==null||this.fEmptyReturn(n[p]==="")){b=S;return}t.push(n)}}),b=="")}),b!="")return r({visible:!0,desc:this.fEmptyReturn(i)+" \uADF8\uB9AC\uB4DC ["+b+"] \uD544\uC218\uAC12 \uB204\uB77D"}),b});m(this,"fKeyInsert",(e,t,s,r=void 0,i=!0)=>{e.commit(!0),s&&(e.getDataSource().insertRow(t,[]),e.getDataSource().getRows().map((c,x)=>{t<=x&&r!=null&&(i?e.getDataSource().setValue(x,r,q(x+1).format("000")):e.getDataSource().setValue(x,r,x+1))}))});m(this,"fArrowDown",(e,t,s,r,i=void 0,C=!0)=>{e.commit(!0),t+=1,s<=t&&r&&(e.getDataSource().addRow([]),i!=null&&(C?e.getDataSource().setValue(t,i,q(t+1).format("000")):e.getDataSource().setValue(t,i,t+1)))});m(this,"fArrowUp",(e,t,s,r)=>{e.commit(!0),e.getDataSource().getRowState(t)==="created"&&s-e.getDataSource().getRowStateCount("created")<=t&&r&&t>0&&e.getDataSource().removeRow(t)});m(this,"fEscape",(e,t,s,r,i=!0)=>{s>0&&(e.commit(!0),e.getDataSource().getRowState(t)==="created"&&(e.getDataSource().removeRow(t),e.getDataSource().getRows().map((c,x)=>{t<=x&&(i?e.getDataSource().setValue(x,r,q(x+1).format("000")):e.getDataSource().setValue(x,r,x+1))}),setTimeout(()=>{e.getDataSource().getRowCount()<1&&e.getDataSource().addRow([])})))});m(this,"fFieldChange",(e,t,s)=>{e(r=>({...r,[t]:s}))});m(this,"fSetDataProvider",(e,t,s,r)=>{r==null?s.forEach((i,C,c)=>{e.setValue(t,c[C],void 0)}):(e.setValue(t,s[0],r.minorcd),e.setValue(t,s[1],r.minornm))});m(this,"fEnterLastField",(e,t,s,r)=>{e.setCurrent({itemIndex:t+1,column:0}),s<=t+1&&r?(e.getDataSource().addRow([]),e.setCurrent({itemIndex:t+1,column:0})):e.setCurrent({itemIndex:t,column:0})});m(this,"fReport",(e,t,s,r,i)=>{let C=new window.m2soft.crownix.Viewer(r+"/service","crownix-viewer");C.setRData('{"data": { "data1" :'+JSON.stringify(e)+', "data2" :[{ Photo : '+JSON.stringify(this.fArrayBufferToBase64(t))+"}]} }"),C.openFile(i+s,"")});m(this,"fArrayBufferToBase64",e=>{if(e==="no")return"noImage";{let t="";return[].slice.call(new Uint8Array(e)).forEach(r=>t+=String.fromCharCode(r)),window.btoa(t)}});this.PGMID=e,this.helperProgresscd={...w},this.helperProgresscd.iInId="A001",this.helperProgresscd.iInCode1="169",this.helperHalfGoodPart={...w},this.helperHalfGoodPart.iInId="A00048",this.helperHalfGoodPart.iInCode1="",this.helperDeptNm={...w},this.helperDeptNm.iInId="B002",this.helperDeptNm.iInCode1="001",this.helperPnoNm={...w},this.helperPnoNm.iInId="B001",this.helperPnoNm.iInCode1="001",this.helperCust={...Z},this.helperCust.iAccunit="001",this.helperGoodNoHarf={...w},this.helperGoodNoHarf.iInId="A112",this.helperGoodNoHarf.iInCode1="001",this.helperGoodNoHarf.iInCode2="A00",this.helperGoodNoMaterial={...w},this.helperGoodNoMaterial.iInId="A113",this.helperGoodNoMaterial.iInCode1="001",this.helperGoodNoMaterial.iInCode2="A00",this.helperGoodNoExoffer={...w},this.helperGoodNoExoffer.iInId="A111",this.helperGoodNoExoffer.iInCode1="001",this.helperGoodNoExoffer.iInCode2="A00",this.helperOperation={...w},this.helperOperation.iInId="A001",this.helperOperation.iInCode1="297",this.helperShopnm={...w},this.helperShopnm.iInId="A001",this.helperShopnm.iInCode1="299",this.helperProdunitnm={...w},this.helperProdunitnm.iInId="A001",this.helperProdunitnm.iInCode1="064",this.helperSchCust={...Z},this.helperSchCust.iAccunit="001",this.helperKeysungOperation={...w},this.helperKeysungOperation.iInId="A010",this.helperKeysungOperation.iInCode1="297",this.helperKeysungShopnm={...w},this.helperKeysungShopnm.iInId="A010",this.helperKeysungShopnm.iInCode1="299"}}const We=ye(()=>{const{$CommonStore:N,$UserStore:e}=ge(),t=Oe(),s="ORDERTRADINGORDERLIST",r=new ve(s),i=E.exports.useRef(null),C=E.exports.useRef(null),c=E.exports.useRef(null),x=E.exports.useRef(null),b=E.exports.useRef(null),R=E.exports.useRef(null),k=E.exports.useRef(450),F=E.exports.useRef(0),[n,p]=E.exports.useState({frDate:new Date,toDate:new Date,custCd:e.user.custcd,custNm:e.user.custnm,gubun:"4",workNo:"",goodNo:"",clsType:"0"}),[S,M]=E.exports.useState({visible:!1,description:"",value:"",datas:{},id:"",viewId:"",selectedData:{}}),[ee]=E.exports.useState([{value:"0",text:"\uC9C4\uD589"},{value:"1",text:"\uC644\uB8CC"},{value:"2",text:"\uBAA8\uB450"}]),[X,te]=E.exports.useState([]),[ae,z]=E.exports.useState(!1),[W,re]=E.exports.useState(!0),[Q,j]=E.exports.useState(!0),[H,K]=E.exports.useState({visible:!1,desc:"",type:"N"}),[U,B]=E.exports.useState({visible:!1,desc:"",type:"N"}),ue=()=>{P=new l.exports.LocalDataProvider(!1),I=new l.exports.GridView(i.current),r.fInitGridHeader(I,P,Ae,Ie,25,se,le),I.setDisplayOptions({fitStyle:"evenFill",rowHeight:25}),I.setOptions({summaryMode:"aggregate"}),I.setEditOptions({insertable:!1,editable:!0})},oe=()=>{f=new l.exports.LocalDataProvider(!1),h=new l.exports.GridView(C.current),h.setDataSource(f),f.setFields(Ve),h.setColumns(ke),h.setCheckBar({visible:!1}),h.setStateBar({visible:!0}),h.setRowIndicator({visible:!0}),h.onKeyDown=Ce,h.setFooters({visible:!1}),h.setDisplayOptions({focusVisible:!0,selectionStyle:"rows",selectionMode:"none",columnMovable:!1,fitStyle:"none",rowHeight:25}),h.setOptions({summaryMode:"aggregate"}),h.setEditOptions({insertable:!1,editable:!0}),f.onRowInserted=(a,o)=>{a.setValue(o,"Qty",0),a.setValue(o,"ErrQty",0)},h.onCellButtonClicked=ne},se=async(a,o)=>{o.dataRow>=0&&(I.commit(!0),h.commit(!0),c.current=a.getValue(o.itemIndex,"Balno"),x.current=a.getValue(o.itemIndex,"Balseq"),b.current=a.getValue(o.itemIndex,"Workno"),R.current=a.getValue(o.itemIndex,"WorkOrderYn"),j(R.current==="N"),F.current=o.dataRow,setTimeout(async()=>{await J()},100))},le=async(a,o)=>{F.current===o.dataRow&&o.dataRow>=0&&(I.commit(!0),h.commit(!0),c.current=a.getValue(o.itemIndex,"Balno"),x.current=a.getValue(o.itemIndex,"Balseq"),b.current=a.getValue(o.itemIndex,"Workno"),R.current=a.getValue(o.itemIndex,"WorkOrderYn"),j(R.current==="N"),setTimeout(async()=>{await J()},100))},J=async()=>{const a={...n};a.Workno=b.current;try{const y=(await V.get("/@api/order/tradingorderlist/selectByDetailList",{params:a})).data;if(y===void 0||y.length<1){f.clearRows();const g=[{index:"1",Operationcd:"297021",Operationnm:"\uBC00\uB9C1",Shopcd:"299015",Shopnm:"MCT"},{index:"2",Operationcd:"297003",Operationnm:"\uCD5C\uC885\uAC80\uC0AC",Shopcd:"299007",Shopnm:"KS Q.M"},{index:"3",Operationcd:"297004",Operationnm:"\uC785\uACE0",Shopcd:"299009",Shopnm:"H-ROOM"}];for(var o=0;o<=2;o++)f.addRow([]),f.setValue(o,"Operationseq","00"+(o+1)),f.setValue(o,"Operationcd",g[o].Operationcd),f.setValue(o,"Operationnm",g[o].Operationnm),f.setValue(o,"Shopcd",g[o].Shopcd),f.setValue(o,"Shopnm",g[o].Shopnm),f.setValue(o,"Qty",0),f.setValue(o,"ErrQty",0)}else f.setRows(y);h.clearCurrent()}catch{B({visible:!0,desc:"\uACF5\uC815\uB0B4\uC5ED \uC870\uD68C\uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.",type:"E"})}},ne=async(a,o)=>{a.commit();const T=a.getValue(a.getCurrent().itemIndex,o.fieldName);let y={};o.fieldName==="Operationnm"?y=await L(a.getCurrent(),r.helperKeysungOperation,s,T):o.fieldName==="Shopnm"&&(y=await L(a.getCurrent(),r.helperKeysungShopnm,s,T)),M(y)},_=async()=>{if(!n.custCd){B({visible:!0,desc:"\uC678\uC8FC\uCC98\uAC00 \uC81C\uB300\uB85C \uC785\uB825\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."});return}if(!n.gubun){B({visible:!0,desc:"\uAD6C\uBD84\uC774 \uC81C\uB300\uB85C \uC120\uD0DD\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4"});return}if(!O(n.frDate,"YYYY-MM-DD").isValid()||!O(n.toDate,"YYYY-MM-DD").isValid()){B({visible:!0,desc:"\uBC1C\uC8FC\uC77C\uC790 \uAE30\uAC04\uC744 \uBC14\uB974\uAC8C \uC785\uB825\uD574 \uC8FC\uC138\uC694."});return}if(O(n.frDate).format("YYYYMMDD")>O(n.toDate).format("YYYYMMDD")){B({visible:!0,desc:"\uBC1C\uC8FC\uC77C\uC790 \uAE30\uAC04\uC744 \uD655\uC778\uD574 \uC8FC\uC138\uC694."});return}if(!n.clsType){B({visible:!0,desc:"\uC0C1\uD0DC\uAC00 \uC81C\uB300\uB85C \uC120\uD0DD\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."});return}let a={...n};a.frDate=O(a.frDate).format("YYYYMMDD"),a.toDate=O(a.toDate).format("YYYYMMDD"),me(),P.setRows([]);try{let o=await V.get("/@api/order/tradingorderlist/selectByList",{params:a});P.setRows(o.data)}catch(o){o.response.status===404?B({visible:!0,desc:"\uC870\uD68C \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}):B({visible:!0,desc:"\uC870\uD68C\uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4."})}},$=async()=>{I.commit();const a=P.getStateRows("updated");if(a.length<1){B({visible:!0,desc:"\uBAA9\uB85D\uC911\uC5D0 \uC218\uC815\uD55C \uB0B4\uC5ED\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."});return}let o,T=[];a.forEach(function(y){o=P.getJsonRow(y),T.push(o)});try{const g=(await V.post("/@api/order/tradingorderlist/updateByRemark",{data:T})).data;if(g.errmess==="")K({visible:!0,desc:"\uC800\uC7A5\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."}),setTimeout(()=>{_()},1e3);else{B({visible:!0,desc:g.errmess});return}}catch{B({visible:!0,desc:"\uC800\uC7A5\uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4."});return}},ie=async()=>{h.commit(!0);const a=S.selectedData;a.column==="Operationnm"?r.fSetDataProvider(f,a.dataRow,new Array("Operationcd","Operationnm"),N.Codeclass.selData):a.column==="Shopnm"&&r.fSetDataProvider(f,a.dataRow,new Array("Shopcd","Shopnm"),N.Codeclass.selData),h.commit(!0),M({visible:!1,desc:"",value:"",datas:{},selectedData:{},id:"",viewId:""}),h.setFocus()},de=a=>{const o=h.getCurrent().itemIndex;a.target==="Operationnm"?r.fSetDataProvider(f,o,new Array("Operationcd","Operationnm"),void 0):a.target==="Shopnm"&&r.fSetDataProvider(f,o,new Array("Shopcd","Shopnm"),void 0),h.setCurrent({itemIndex:o,fieldName:h.getCurrent().fieldName}),h.setFocus(),M({visible:!1})},Ce=async(a,o)=>{const T="Remark",y=a.getDataSource().getRowCount(),{fieldName:g}=a.getCurrent(),{itemIndex:A}=a.getCurrent();switch(o.key){case"Enter":if(B({visible:!1,desc:""}),a.commit(!0),g===T)r.fEnterLastField(a,A,y,G()===0);else if(a.getDataSource().getValue(A,g)&&(g==="Operationnm"||g==="Shopnm")){a.commit(),a.setCurrent({itemIndex:A,fieldName:g});const Y=a.getValue(A,g);let v={};Y!==""&&(g==="Operationnm"?(v=await L(a.getCurrent(),r.helperKeysungOperation,s,Y,!1),v.visible||r.fSetDataProvider(f,A,new Array("Operationcd","Operationnm"),v.res)):g==="Shopnm"&&(v=await L(a.getCurrent(),r.helperKeysungShopnm,s,Y,!1),v.visible||r.fSetDataProvider(f,A,new Array("Shopcd","Shopnm"),v.res)),M(v))}a.setFocus();break;case"Escape":r.fEscape(a,A,y,"Operationseq");break;case"Insert":r.fKeyInsert(a,A,G()===0,"Operationseq");break;case"ArrowDown":r.fArrowDown(a,A,y,G()===0,"Operationseq");break;case"ArrowUp":r.fArrowUp(a,A,y,G(A)>0);break}},G=a=>{const o=f.getAllStateRows().created;if(o.length>0){let T=0;return o.map(y=>{if(a===void 0||y>=a){const g=h.getValues(y);(!g.Operationnm||g.Operationnm===void 0)&&(T+=1)}}),T}return 0},pe=async()=>{if(R.current==="Y"){B({visible:!0,desc:"\uC774\uBBF8 \uC791\uC5C5\uC9C0\uC2DC\uC11C\uAC00 \uBC1C\uD589\uB418\uC5C8\uC2B5\uB2C8\uB2E4.",type:"W"});return}if(c.current===void 0||c.current===null||c.current===""){B({visible:!0,desc:"\uBC1C\uC8FC\uB0B4\uC5ED\uC744 \uC120\uD0DD\uD574 \uC8FC\uC2ED\uC2DC\uC694.",type:"W"});return}let a={...n};if(a.Balno=c.current,a.Balseq=x.current,te([]),r.fCheckGridData(f,X,{Operationnm:"\uACF5\uC815\uBA85",Shopnm:"\uC791\uC5C5\uC7A5"},B,"\uACF5\uC815\uB0B4\uC5ED")===void 0)try{const y=(await V.post("/@api/order/tradingorderlist/insertByWorkreport",{data:a,detail:X})).data;if(y.errmess==="")K({visible:!0,desc:"\uC800\uC7A5\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."}),setTimeout(()=>{_()},1e3),f.clearRows();else{B({visible:!0,desc:y.errmess});return}}catch{B({visible:!0,desc:"\uC800\uC7A5\uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4."});return}},ce=async()=>{const a={...n};a.Accunit=e.user.accunit,a.Factory=e.user.factory,a.Workno=b.current,z(!0);try{const o=await r.fSearchByReturn("/@api/order/tradingorderlist/selectByPrint",a),T=await r.fSearchByReturn("/@api/order/tradingorderlist/selectByPhoto",a);o?r.fReport(o,T.length===0?"no":T[0].Photo.data,"/\uC791\uC5C5\uC9C0\uC2DC\uC11C.mrd","http://report.ehansun.co.kr/ReportingServer","http://hseerp.ehansun.co.kr/report"):B({visible:!0,desc:"\uCD9C\uB825\uC790\uB8CC \uC870\uD68C \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."})}catch{B({visible:!0,desc:"\uCD9C\uB825\uC790\uB8CC \uC870\uD68C\uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4."})}},me=()=>{I.orderBy([],[])};return E.exports.useEffect(()=>{N.HotKey&&N.HotKey.pgmid===s&&(N.HotKey.key==="SEARCH"?_():N.HotKey.key==="SAVE"&&$())},[N.HotKey]),E.exports.useEffect(()=>{e.user.custcd!="02342"&&(re(!1),k.current=680);const a=O().add(-3,"M");p(o=>({...o,frDate:a.toDate(),custCd:e.user.custcd,custNm:e.user.custnm})),ue(),oe()},[]),u.createElement(u.Fragment,null,u.createElement(Se,{pgmid:s,visible:"01100",onSearch:_,onSave:$}),u.createElement(Ee,{className:"mainCon"},u.createElement(d,{style:{width:"100%",height:87,backgroundColor:"#f9f9f9",borderRadius:"5px",display:"flex",flexDirection:"column",padding:5}},u.createElement(d,{style:{marginTop:5,display:"flex",alignItems:"center"}},u.createElement(d,{display:"flex",alignItems:"center",style:{marginRight:5,marginLeft:10}},u.createElement(D.exports.RadioButton,{className:t.S7,inputId:r.fMakeId("gubun0"),value:"0",groupValue:n.gubun,onChange:a=>{a&&r.fFieldChange(p,"gubun","0")}}),u.createElement(D.exports.Label,{htmlFor:r.fMakeId("gubun0"),className:t.S8},"\uAC00\uACF5(\uC0AC\uAE09)")),u.createElement(d,{display:"flex",alignItems:"center",style:{marginRight:5}},u.createElement(D.exports.RadioButton,{className:t.S7,inputId:r.fMakeId("gubun2"),value:"2",groupValue:n.gubun,onChange:a=>{a&&r.fFieldChange(p,"gubun","2")}}),u.createElement(D.exports.Label,{htmlFor:r.fMakeId("gubun2"),className:t.S8,style:{width:43}},"\uD6C4\uAC00\uACF5")),u.createElement(d,{display:"flex",alignItems:"center"},u.createElement(D.exports.RadioButton,{className:t.S7,inputId:r.fMakeId("gubun4"),value:"4",groupValue:n.gubun,onChange:a=>{a&&r.fFieldChange(p,"gubun","4")}}),u.createElement(D.exports.Label,{htmlFor:r.fMakeId("gubun4"),className:t.S8,style:{width:35}},"\uBAA8\uB450")),u.createElement(d,{className:t.S1},u.createElement(d,{className:t.S2},"\uC678\uC8FC\uCC98")),u.createElement(D.exports.TextBox,{placeholder:"\uC678\uC8FC\uC5C5\uCCB4 \uC0AC\uC6A9\uC790\uAC00 \uC544\uB2D9\uB2C8\uB2E4",editable:!1,className:t.S4,value:n.custNm}),u.createElement(d,{className:t.S1},u.createElement(d,{className:t.S2},"\uBC1C\uC8FC\uC77C\uC790")),u.createElement(d,{style:{display:"flex",alignItems:"center"}},u.createElement(D.exports.DateBox,{style:{width:110,height:25},className:t.S3,inputId:r.fMakeId("sDate"),lo:"ko",format:"yyyy-MM-dd",panelStyle:{width:250,height:250},value:n.frDate,onChange:a=>r.fFieldChange(p,"frDate",a),currentText:"\uC624\uB298",closeText:"\uB2EB\uAE30",okText:"\uD655\uC778"}),u.createElement(d,{style:{margin:"0 10px",width:"10px"}},"~"),u.createElement(D.exports.DateBox,{style:{width:110,height:25},className:t.S3,inputId:r.fMakeId("eDate"),format:"yyyy-MM-dd",panelStyle:{width:250,height:250},value:n.toDate,onChange:a=>r.fFieldChange(p,"toDate",a),currentText:"\uC624\uB298",closeText:"\uB2EB\uAE30",okText:"\uD655\uC778"})),u.createElement(d,{className:t.S1},u.createElement(d,{className:t.S2},"\uC0C1\uD0DC")),u.createElement(D.exports.ComboBox,{className:t.S5,panelStyle:{height:100},data:ee,value:n.clsType,editable:!1,onChange:a=>r.fFieldChange(p,"clsType",a)}),W&&Q&&u.createElement(D.exports.LinkButton,{style:{width:150,height:25,color:"#424242",borderRadius:3,margin:"0px 0px 0px 100px"},onClick:()=>pe()},u.createElement(d,{style:{height:30,display:"flex",alignItems:"center",justifyContent:"center"}},u.createElement(Ne,{size:16}),u.createElement(d,{style:{marginLeft:5,fontSize:13,paddingBottom:2,fontWeight:530}},"\uC791\uC5C5\uC9C0\uC2DC\uC11C \uBC1C\uD589")))),u.createElement(d,{style:{marginTop:5,display:"flex",alignItems:"center"}},u.createElement(d,{display:"flex",alignItems:"center",style:{marginRight:5,marginLeft:10}},u.createElement(D.exports.RadioButton,{className:t.S7,inputId:r.fMakeId("gubun1"),value:"1",groupValue:n.gubun,onChange:a=>{a&&r.fFieldChange(p,"gubun","1")}}),u.createElement(D.exports.Label,{htmlFor:r.fMakeId("gubun1"),className:t.S8},"\uAC00\uACF5(\uB3C4\uAE09)")),u.createElement(d,{display:"flex",alignItems:"center",style:{marginRight:39}},u.createElement(D.exports.RadioButton,{className:t.S7,inputId:r.fMakeId("gubun3"),value:"3",groupValue:n.gubun,onChange:a=>{a&&r.fFieldChange(p,"gubun","3")}}),u.createElement(D.exports.Label,{htmlFor:r.fMakeId("gubun3"),className:t.S8},"\uD6C4\uCC98\uB9AC")),u.createElement(d,{className:t.S1},u.createElement(d,{className:t.S2},"\uC791\uC9C0\uBC88\uD638")),u.createElement(D.exports.TextBox,{placeholder:"\uC791\uC9C0\uBC88\uD638",className:t.S4,value:n.workNo,onChange:a=>r.fFieldChange(p,"workNo",a)}),u.createElement(d,{className:t.S1},u.createElement(d,{className:t.S2},"\uD488\uBC88\uCF54\uB4DC")),u.createElement(D.exports.TextBox,{placeholder:"\uD488\uBC88\uCF54\uB4DC",className:t.S4,value:n.goodNo,onChange:a=>r.fFieldChange(p,"goodNo",a)}),W&&!Q&&u.createElement(D.exports.LinkButton,{style:{width:150,height:25,color:"#424242",borderRadius:3,margin:"0px 0px 0px 395px"},onClick:()=>ce()},u.createElement(d,{style:{height:30,display:"flex",alignItems:"center",justifyContent:"center"}},u.createElement(we,{size:16}),u.createElement(d,{style:{marginLeft:5,fontSize:13,paddingBottom:2,fontWeight:530}},"\uC791\uC5C5\uC9C0\uC2DC\uC11C \uCD9C\uB825"))))),u.createElement(d,{ref:i,style:{width:"100%",height:k.current,marginTop:5}}),W&&u.createElement(u.Fragment,null,u.createElement(d,{className:t.TitleBox4,style:{width:"100%",display:"flex",justifyItems:"center",alignItems:"center",marginTop:3}},"\uACF5\uC815\uB0B4\uC5ED"),u.createElement(d,{style:{marginTop:0}},u.createElement(d,{ref:C,style:{width:"100%",height:210}})))),ae&&u.createElement(D.exports.Dialog,{title:u.createElement(d,{style:{display:"flex"}},u.createElement("img",{src:De,alt:"logo",style:{width:"27px"}})," ",u.createElement(d,{style:{marginLeft:15}},"\uC791\uC5C5\uC9C0\uC2DC\uC11C \uCD9C\uB825")),style:{width:"1870px",height:"900px"},bodyCls:"f-column",closable:!0,modal:!0,onClose:()=>z(!1),q:!0},u.createElement(d,{className:"f-full"},u.createElement("div",{id:"crownix-viewer",style:{position:"absolute",width:"100%",height:"100%"}}))),u.createElement(xe,{visible:S.visible,description:S.desc,value:S.value,datas:S.datas,id:S.id,viewId:S.viewId,selectedData:S.selectedData,onConfirm:ie,onCancel:()=>de({target:S.id})}),u.createElement(Re,{visible:H.visible,description:H.desc,type:H.type,onConfirm:()=>K({visible:!1})}),u.createElement(be,{visible:U.visible,description:U.desc,type:U.type,onConfirm:()=>B({visible:!1})}))});let P,f,I,h;const Oe=Be({S1:{margin:"3px 10px",backgroundColor:"#e0ecff",color:"#163971",padding:5,height:25,fontSize:"12px",display:"flex",alignItems:"center",width:110,fontWeight:600},S2:{width:100},S3:{"& .textbox-text":{fontSize:"12px"},"& .textbox":{fontSize:"12px"},"& .combo-arrow":{backgroundImage:`url(${Te})`,backgroundRepeat:"no-repeat",backgroundColor:"#ffffff!important",height:12}},S4:{width:185,height:25,"& input":{fontSize:"12px !important"}},S5:{width:100,height:25,"& input":{fontSize:"12px !important"}},S6:{width:90,height:30,color:"#fff",borderRadius:3,paddingBottom:2},S7:{width:"15px!important",height:"15px!important"},S8:{width:65,height:20,margin:"0px 3px",display:"flex",alignItems:"center",fontSize:12},TitleBox4:{backgroundColor:"#fccf76",color:"#163971",padding:5,height:20,fontSize:"12px",display:"flex",alignItems:"center",width:"100%",fontWeight:600}});export{We as default};
