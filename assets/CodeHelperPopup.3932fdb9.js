import{r as f,R as l}from"./index.da6908f5.js";import{o as me,c as ce,U as ie,u as le,f as fe,B as x,F as ue,r as ae,A as de,d as Ce}from"./App.11263b70.js";const xe=me(({inputCls:W,pgmid:j,inputType:k,id:i,title:G,helper:h,onConfirm:J,ComponentCode:L,ComponentValue:w,SetValue:$,boxStyles:Q,labelStyles:X,inputStyles:Y,disabled:z,editable:Z,onTabEvent:v,inputRequired:E=!1,InitValue:I=void 0})=>{const[A,T]=f.exports.useState({visible:!1,desc:"",type:"N"}),t=new ie(j,T,!0,!0,!0,!0,!0),b=pe(),M=f.exports.useRef(""),s=f.exports.useRef(""),c=f.exports.useRef(""),O=f.exports.useRef(470),{$CommonStore:d}=le(),[P,U]=f.exports.useState({}),[_,S]=f.exports.useState({Data:""}),[C,y]=f.exports.useState({visible:!1,description:"",value:"",codeValue:"",datas:{},id:"",viewId:"",selectedData:{}}),q=()=>{K(d.Codeclass.selData),setTimeout(()=>{t.Common.fMakeFocus(i)},10),t.Common.fFieldChange(y,"visible",!1),d.fSetCodeclassPopup(!1)},V=()=>{document.getElementById(C.id).focus(),t.Common.fFieldChange(y,"visible",!1),d.fSetCodeclassPopup(!1)},N=()=>{const e=document.getElementsByClassName("inputCls"),n=Object.values(e).filter(u=>u.id.includes(j)),o=Number(document.getElementById(t.Common.fMakeId(i)).getAttribute("tabindex"))+1;for(let u=n.length;u--;){const F=Number(n[u].getAttribute("tabindex"));o===F&&setTimeout(()=>{n[u].focus()})}},ee=e=>{if(e!=="")return e.forEach(n=>{for(const[o,u]of Object.entries(n))typeof n[o]=="string"&&(n[o]=u.trim())}),e},B=async(e,n,o="",u=null,F=!0,re=!1)=>{var R;let H={...h};n==="Cust"?R="selectByCustClass":(R="selectByTSqlItem",H.iCustNm=o);try{let a=await Ce.get(`/@api/common/codeclass/${R}`,{params:H}),se=ee(a.data[1]),r={};se.some((m,g,p)=>{n==="Cust"?(t.Common.fTrim(m.custnm)===(o.length>0&&o)||m.custcd===(o.length>0&&o))&&(r={...r,...p[g]}):n==="Pno"?(t.Common.fTrim(m.name)===(o.length>0&&o)||m.pno===(o.length>0&&o))&&(r={...r,...p[g]}):n==="Dept"?(t.Common.fTrim(m.deptnm)===(o.length>0&&o)||m.deptcd===(o.length>0&&o))&&(r={...r,...p[g]}):n==="Act"?(t.Common.fTrim(m.actnm3)===(o.length>0&&o)||m.actcod===(o.length>0&&o))&&(r={...r,...p[g]}):n==="Whs"?(t.Common.fTrim(m.wrhnm)===(o.length>0&&o)||m.wrhcd===(o.length>0&&o))&&(r={...r,...p[g]}):n==="Good"?(t.Common.fTrim(m.goodno)===(o.length>0&&o)||m.goodcd===(o.length>0&&o))&&(r={...r,...p[g]}):n==="Type"?(t.Common.fTrim(m.codenm)===(o.length>0&&o)||m.codeid===(o.length>0&&o))&&(r={...r,...p[g]}):n==="Jukyo"?(t.Common.fTrim(m.jukyonm)===(o.length>0&&o)||m.jukyocd===(o.length>0&&o))&&(r={...r,...p[g]}):(t.Common.fTrim(m.minornm)===(o.length>0&&o)||m.minorcd===(o.length>0&&o))&&(r={...r,...p[g]})});let D=0;a.data[0].map(m=>{D+=Number(m.Size)}),O.current=D<470?470:D+80,re?(y({visible:!0,datas:a.data,desc:a.data[2][0].Remark,value:o,codeValue:u===""?null:u,id:t.Common.fMakeId(i),viewId:e,selectedData:d.Codeclass.selData}),d.fSetCodeclassPopup(!0)):Object.keys(r).length<1&&F?(y({visible:!0,datas:a.data,desc:a.data[2][0].Remark,value:o,codeValue:null,id:t.Common.fMakeId(i),viewId:e,selectedData:d.Codeclass.selData}),d.fSetCodeclassPopup(!0)):Object.keys(r).length>0&&(v?v():N(),K(r))}catch(a){if(a.response&&a.response.status===404){T({visible:!0,desc:"\uC870\uD68C\uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."});return}else{T({visible:!0,desc:"\uC870\uD68C\uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4."+a});return}}},K=e=>{switch(t.Common.fMultiFieldChange(S,{Data:e}),k){case"Dept":s.current=t.Common.fTrim(e.deptcd),c.current=t.Common.fTrim(e.deptnm);break;case"Pno":s.current=t.Common.fTrim(e.pno),c.current=t.Common.fTrim(e.name);break;case"Cust":s.current=t.Common.fTrim(e.custcd),c.current=t.Common.fTrim(e.custnm);break;case"Act":s.current=t.Common.fTrim(e.actcod),c.current=t.Common.fTrim(e.actnm3);break;case"Whs":s.current=t.Common.fTrim(e.wrhcd),c.current=t.Common.fTrim(e.wrhnm);break;case"Good":s.current=t.Common.fTrim(e.goodcd),c.current=t.Common.fTrim(e.goodno);break;case"Type":s.current=t.Common.fTrim(e.codeid),c.current=t.Common.fTrim(e.codenm);break;case"Jukyo":s.current=t.Common.fTrim(e.jukyocd),c.current=t.Common.fTrim(e.jukyonm);break;default:s.current=t.Common.fTrim(e.minorcd),c.current=t.Common.fTrim(e.minornm);break}U({...P})},te=e=>{M.current=e},oe=(e,n)=>{e.key==="Enter"?e.target.value||E?(t.Common.fMultiFieldChange(S,{Data:""}),s.current="",c.current="",B(n,k,e.target.value,s.current,!0)):N():!d.isShift&&e.key==="Tab"&&(e.target.value||E?B(n,k,e.target.value,s.current,!0):v?v():N()),e.ctrlKey&&e.which===32&&B(n,k,e.target.value,s.current,!0,!0)},ne=e=>{(e.key==="Backspace"||e.key==="Delete")&&(d.fSetCodeclass({selData:{},inputId:t.Common.fMakeId(i),inputName:i,inputType:"DEL",isHelper:h}),t.Common.fMultiFieldChange(S,{Data:""}),s.current="",c.current="")};return f.exports.useEffect(()=>{$(i,t.Common.fTrim(s.current),t.Common.fTrim(c.current),_)},[s.current]),f.exports.useEffect(()=>{t.Common.fEmptyReturn(w)===""?(t.Common.fMultiFieldChange(S,{Data:""}),s.current="",c.current=""):(s.current=L,c.current=w,U({...P}))},[w]),f.exports.useEffect(()=>{I!==void 0&&(s.current=I.CompValue,c.current=I.CompName)},[]),l.createElement(l.Fragment,null,l.createElement(fe,{visible:C.visible,description:C.desc,value:C.value,codeValue:C.codeValue,datas:C.datas,id:C.id,viewId:C.viewId,selectedData:C.selectedData,width:O.current,onConfirm:J,onCancel:()=>t.Common.fCancel(i),setVisibleData:q,setVisibleCancel:V}),l.createElement(x,{className:b.BoxAlignStyle,style:Q},l.createElement(x,{className:b.TitleBox,style:X},l.createElement("span",{className:b.TitleText},G),E&&l.createElement(x,{className:b.TitleBoxR},l.createElement(ue,{size:10}))),h&&l.createElement(x,{onKeyDown:e=>{oe(e,i)},onKeyUp:e=>{ne(e)}},l.createElement(ae.exports.TextBox,{key:t.Common.fMakeId(i),inputCls:W,inputId:t.Common.fMakeId(i),placeholder:"",className:b.InputBox,onChange:e=>te(e),value:c.current,style:Y,name:i,disabled:z,editable:Z,addonRight:()=>l.createElement(x,{className:"textbox-icon icon-search",title:"Codeclass",onClick:()=>{z||B(t.Common.fMakeId(i),k,M.current===null?"":M.current,s.current,!0,!0)}})}))),l.createElement(de,{visible:A.visible,description:A.desc,type:A.type,onConfirm:()=>T({visible:!1})}))}),ge={TitleBox:{margin:"3px 15px",backgroundColor:"#e0ecff",color:"#163971",padding:5,height:25,fontSize:"12px",alignItems:"center",width:110,fontWeight:600,display:"inline-block",position:"relative"},TitleBoxR:{position:"absolute",right:5,top:4,color:"#ffa8a8"},TitleText:{width:100},SB5:{width:77,height:25,"& input":{fontSize:"12px !important",textAlign:"center",color:"#424242"}},InputBox:{width:185,height:25,"& input":{fontSize:"12px !important"},"& textarea":{fontSize:"12px !important",fontFamily:"Noto Sans KR"}},RadioLabel:{display:"flex",alignItems:"center",height:20,width:50,fontSize:12,margin:"0px 1px"},BoxAlignStyle:{marginTop:3,display:"flex",alignItems:"end"}},pe=ce(ge);export{xe as C};
