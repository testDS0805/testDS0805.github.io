import{r as o,R as t}from"./index.da6908f5.js";import{o as y,c as x,u as A,B as r,r as c,A as P,d}from"./App.11263b70.js";import{C as b}from"./CommonButton.0b792d77.js";const N=y(()=>{const{$UserStore:e}=A(),C=T(),[n,h]=o.exports.useState(""),[a,B]=o.exports.useState(""),[i,f]=o.exports.useState(""),[l,u]=o.exports.useState({visible:!1,desc:"",type:"N"}),p=s=>{h(s)},m=s=>{B(s)},g=s=>{f(s)},w=async()=>{if(!n){u({visible:!0,desc:e.fCheckOtherUser()!=="T"?"\uAE30\uC874 \uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD558\uC138\uC694.":"Please enter your old password."});return}if(!a){u({visible:!0,desc:e.fCheckOtherUser()!=="T"?"\uC2E0\uADDC \uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD558\uC138\uC694.":"Please enter your new password."});return}if(a.length<4){u({visible:!0,desc:e.fCheckOtherUser()!=="T"?"\uC2E0\uADDC \uBE44\uBC00\uBC88\uD638\uB97C 4\uC790\uB9AC \uC774\uC0C1 \uC785\uB825\uD558\uC138\uC694.":"Please enter your password with at least 4 digits."});return}if(!i){u({visible:!0,desc:e.fCheckOtherUser()!=="T"?"\uC2E0\uADDC \uBE44\uBC00\uBC88\uD638 \uD655\uC778\uC744 \uC785\uB825\uD558\uC138\uC694.":"Please enter a new confirm password."});return}if(a!==i){u({visible:!0,desc:e.fCheckOtherUser()!=="T"?"\uC2E0\uADDC \uBE44\uBC00\uBC88\uD638\uAC00 \uC77C\uCE58\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.":"The new password does not match."});return}try{const s=e.user.userid,E=await d.get("/@api/auth/selectByEncProc",{params:{userid:s,password:n}}),D=await d.get("/@api/auth/selectByEncProc",{params:{userid:s,password:a}});(await d.post("/@api/auth/updateByUserPassword",{data:{userid:s,password:D.data,prePassword:E.data,gbn:e.user.provider}})).data==="OK"&&(u({visible:!0,desc:e.fCheckOtherUser()!=="T"?"\uBE44\uBC00\uBC88\uD638 \uBCC0\uACBD\uC774 \uC644\uB8CC \uB418\uC5C8\uC2B5\uB2C8\uB2E4.":"The password change has been completed."}),h(""),B(""),f(""))}catch(s){s.response.status===401?u({visible:!0,desc:e.fCheckOtherUser()!=="T"?"\uAE30\uC874 \uBE44\uBC00\uBC88\uD638\uAC00 \uD2C0\uB9BD\uB2C8\uB2E4.":"The old password is wrong."}):u({visible:!0,desc:e.fCheckOtherUser()!=="T"?"\uBE44\uBC00\uBC88\uD638 \uBCC0\uACBD\uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4.":"An error occurred while changing the password."})}};return t.createElement(t.Fragment,null,t.createElement(b,{pgmid:"NONE",visible:"00100",onSave:w}),t.createElement(r,{border:1,borderRadius:3,borderColor:"#ddd",bgcolor:"#fff",style:{width:470,height:500,marginTop:20,marginLeft:20},display:"flex",flexDirection:"column",alignItems:"center"},t.createElement(r,{style:{fontSize:16,marginTop:45,textAlign:"center"}},e.fCheckOtherUser()!=="T"?"\uC0AC\uC6A9\uC790 \uBE44\uBC00\uBC88\uD638 \uBCC0\uACBD\uD558\uAE30":"Change Password"),t.createElement(r,{style:{width:340,marginTop:25,border:"1px solid #c2c2c2",borderRadius:3},display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},t.createElement(r,{style:{width:90,height:35,fontSize:15},bgcolor:"#e0ecff",display:"flex",alignItems:"center",justifyContent:"center"},e.fCheckOtherUser()!=="T"?"\uC544\uC774\uB514":"ID"),t.createElement(r,{style:{width:250,height:35,fontSize:15,fontWeight:500},bgcolor:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},e.user.userid)),t.createElement(r,{style:{width:340,marginTop:10,border:"1px solid #c2c2c2",borderRadius:3},display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},t.createElement(r,{style:{width:90,height:35,fontSize:15},bgcolor:"#e0ecff",display:"flex",alignItems:"center",justifyContent:"center"},e.fCheckOtherUser()!=="T"?"\uC0AC\uC6A9\uC790\uBA85":"UserName"),t.createElement(r,{style:{width:250,height:35,fontSize:15,fontWeight:500},bgcolor:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},e.user.username)),t.createElement(r,{style:{width:400,marginTop:30},display:"flex",flexDirection:"column",alignItems:"center"},t.createElement(r,{style:{fontSize:15,marginTop:10}},e.fCheckOtherUser()!=="T"?"\uAE30\uC874 \uBE44\uBC00\uBC88\uD638":"Old Password"),t.createElement(c.exports.PasswordBox,{placeholder:e.fCheckOtherUser()!=="T"?"\uAE30\uC874 \uBE44\uBC00\uBC88\uD638":"Old Password",value:n,onChange:p,className:C.S1,style:{width:270,height:40,marginTop:10}}),t.createElement(r,{style:{fontSize:15,marginTop:20}},e.fCheckOtherUser()!=="T"?"\uC2E0\uADDC \uBE44\uBC00\uBC88\uD638":"New Password"),t.createElement(c.exports.PasswordBox,{placeholder:e.fCheckOtherUser()!=="T"?"\uC2E0\uADDC \uBE44\uBC00\uBC88\uD638":"New Password",value:a,onChange:m,className:C.S1,style:{width:270,height:40,marginTop:10}}),t.createElement(c.exports.PasswordBox,{placeholder:e.fCheckOtherUser()!=="T"?"\uC2E0\uADDC \uBE44\uBC00\uBC88\uD638 \uD655\uC778":"Confirm New Password",value:i,onChange:g,className:C.S1,style:{width:270,height:40,marginTop:10}}))),t.createElement(P,{visible:l.visible,description:l.desc,type:l.type,onConfirm:()=>u({visible:!1})}))}),T=x({S1:{"& input":{fontSize:"14px !important",fontWeight:"bold",textAlign:"left"},padding:"0 10px"}});export{N as default};
