import{r as f,R as m}from"./index.da6908f5.js";import{o as de,c as ue,u as xe,f as pe,B as v,r as Y,A as Ce,d as he,i as ye}from"./App.11263b70.js";const Ee=de(({inputId:s,inputName:l,inputPlaceHolder:_,inputValue:b,inputIndex:B,helper:d,onConfirm:u,onCancel:w,editable:T,disabled:t,labelStyles:o,inputStyles:i,columnStyles:c,inputCls:r,multiline:O=!1,gridFocus:a,isNumber:F,marginZero:N,placeHolder:D,maxLength:V=!1})=>{const{$CommonStore:p}=xe(),C=ge(),[Z,ee]=f.exports.useState(null),[R,j]=f.exports.useState(b),[y,H]=f.exports.useState({visible:!1,description:"",value:"",datas:{},id:"",viewId:"",selectedData:{}}),[I,A]=f.exports.useState({visible:!1,desc:"",type:"N"});let L=f.exports.useRef(!1),W=f.exports.useRef(!1),z=f.exports.useRef(!1);const P=(e,n,x)=>{n==="CODECLASS"&&p.fSetChangeValue({inputId:s,inputName:l,inputValue:Se(l,x),inputType:"CODECLASS"}),n==="CODECLASS"&&(p.fSetCodeclass({selData:x,inputId:s,inputName:l,inputType:"CODECLASS",isHelper:d}),u()),j(e)},M=f.exports.useCallback(e=>{e.key==="Shift"&&(z.current=!1),e.key==="Ctrl"&&(L.current=!1),e.key==="Alt"&&(W.current=!1)},[]),$=f.exports.useCallback(e=>{e.key==="Shift"&&(z.current=!0),e.key==="Ctrl"&&(L.current=!0),e.key==="Alt"&&(W.current=!0),e.key==="Enter"&&I.visible&&A({visible:!1,disc:""})},[]),te=(e,n)=>{L.current===!1&&z.current===!1&&(e.key==="Enter"&&(e.target.value?G(n,e.target.value,!0):a?(document.getElementById(s).blur(),setTimeout(()=>{a.setCurrent({itemIndex:0,dataRow:0}),a.setFocus()},100)):E()),e.key==="Tab"&&(a?(document.getElementById(s).blur(),setTimeout(()=>{a.setCurrent({itemIndex:0,dataRow:0}),a.setFocus()},100)):E()))},se=(e,n)=>{L.current===!1&&z.current===!1&&(e.key==="Enter"&&(p.fSetChangeValue({inputId:s,inputName:n,inputType:"INSERT",inputValue:e.target.value}),a?(document.getElementById(s).blur(),setTimeout(()=>{a.setCurrent({itemIndex:0,dataRow:0}),a.setFocus()},100)):E()),e.key==="Tab"&&(a?(document.getElementById(s).blur(),setTimeout(()=>{a.setCurrent({itemIndex:0,dataRow:0}),a.setFocus()},100)):E()))},ne=e=>{e.key==="Backspace"||e.key==="Delete"?(p.fSetCodeclass({selData:{minorcd:"",minornm:e.target.value},inputId:s,inputName:l,inputType:"DEL",isHelper:d}),u()):e.key==="Enter"?(p.fSetCodeclass({selData:{minorcd:"",minornm:e.target.value},inputId:s,inputName:l,inputType:"INSERT",isHelper:d}),u&&u()):(p.fSetCodeclass({selData:{minorcd:"",minornm:e.target.value},inputId:s,inputName:l,inputType:"INSERT",isHelper:d}),u&&u(),p.fSetChangeValue({inputId:s,inputName:l,inputType:"INSERT",inputValue:e.target.value}))},ie=e=>{(e.key==="Backspace"||e.key==="Delete")&&(p.fSetCodeclass({selData:{minorcd:"",minornm:e.target.value},inputId:s,inputName:l,inputType:"DEL",isHelper:d}),u())},E=()=>{const e=s.split("_")[0],n=document.getElementsByClassName("inputCls"),x=Object.values(n).filter(h=>h.id.includes(e)),g=Number(document.getElementById(s).getAttribute("tabindex"))+1;for(let h=x.length;h--;){const K=Number(x[h].getAttribute("tabindex"));g===K&&setTimeout(()=>{x[h].focus()})}},oe=()=>{const e=p.Codeclass.selData;let n={};for(const[x,g]of Object.entries(e))["custnm","minornm","deptnm","name"].indexOf(x)>-1&&(n={...n,minornm:g?g.trim():""});ee(e),j(n.minornm),H({visible:!1})},ae=()=>{document.getElementById(y.id).focus(),H({visible:!1})},G=async(e,n="",x=!0)=>{let g="selectByTSqlItem";const h=e.toLowerCase().includes("cust"),K=e.toLowerCase().includes("search"),re=e.toLowerCase().includes("workno"),le=e.toLowerCase().includes("pno"),ce=e.toLowerCase().includes("goodno");h&&(g="selectByCustClass");let U={...d};K&&re&&(U.iInCode3=n),!K&&ce&&(U.iInCode3=n);try{let S=await he.get(`/@api/common/codeclass/${g}`,{params:U}),fe=S.data[1],k={};fe.map((q,J,Q)=>{if(h)q.custnm===(n.length>0&&n)&&(k={...k,...Q[J]});else{const me=X=>le?X.trim()===(n.length>0&&n):X===(n.length>0&&n);Object.values(q).some(me)&&(k={...k,...Q[J]})}}),Object.keys(k).length<1&&x?H({visible:!0,datas:S.data,desc:S.data[2][0].Remark,value:R,id:s,viewId:e,selectedData:Z}):Object.keys(k).length>0&&(a?(document.getElementById(s).blur(),setTimeout(()=>{a.setCurrent({itemIndex:0,dataRow:0}),a.setFocus()},100)):E(),P(R,"CODECLASS",k),document.removeEventListener("keydown",$),document.removeEventListener("keyup",M))}catch(S){if(S.response&&S.response.status===404){A({visible:!0,desc:"\uC870\uD68C\uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."});return}else{A({visible:!0,desc:"\uC870\uD68C\uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD558\uC600\uC2B5\uB2C8\uB2E4."+S});return}}};return f.exports.useEffect(()=>{document.addEventListener("keydown",$),document.addEventListener("keyup",M)},[]),f.exports.useEffect(()=>{j(b)},[b]),f.exports.useEffect(()=>{document.getElementById(s).setAttribute("maxlength",V)},[V]),m.createElement(m.Fragment,null,m.createElement(pe,{visible:y.visible,description:y.desc,value:y.value,datas:y.datas,id:y.id,viewId:y.viewId,selectedData:y.selectedData,onConfirm:u,onCancel:w,setVisibleData:oe,setVisibleCancel:ae}),m.createElement(v,{className:N?C.BoxAlignStyle2:C.BoxAlignStyle,style:c},m.createElement(v,{className:C.TitleBox,style:o},m.createElement("span",{className:C.TitleText},_)),d&&m.createElement(v,{onKeyDown:e=>{te(e,l)},onKeyUp:e=>{ie(e)}},m.createElement(Y.exports.TextBox,{inputId:s,placeholder:D||"",className:N?C.InputBox4:C.InputBox,onChange:e=>P(e),value:R,style:i,tabIndex:B,name:l,disabled:t,editable:T,multiline:O,inputCls:r,addonRight:()=>m.createElement(v,{className:"textbox-icon icon-search",title:"Codeclass",onClick:()=>{t||G(s,"",!0)}})})),!d&&m.createElement(v,{onKeyDown:e=>{se(e,l)},onKeyUp:e=>{ne(e)}},m.createElement(Y.exports.TextBox,{inputId:s,placeholder:D||"",className:N?C.InputBox4:F?C.InputBox2:C.InputBox,onChange:e=>P(e),value:R,style:i,name:l,editable:T,disabled:t,multiline:O,tabIndex:B,inputCls:r}))),m.createElement(Ce,{visible:I.visible,description:I.desc,type:I.type,onConfirm:()=>A({visible:!1})}))}),ge=ue({S1:{"& .panel-header":{borderRightWidth:0,height:35}},S2:{"& .panel-body":{borderRightWidth:0}},marginZero:{marginTop:0},TitleBox:{margin:"3px 15px",backgroundColor:"#e0ecff",color:"#163971",padding:5,height:25,fontSize:"12px",display:"flex",alignItems:"center",width:110,fontWeight:600},TitleBox3:{margin:"3px 10px 3px 100px",backgroundColor:"#e0ecff",color:"#163971",padding:5,height:25,fontSize:"12px",display:"flex",alignItems:"center",width:110,fontWeight:600},TitleText:{width:100},InputBox:{width:185,height:25,marginTop:3,"& input":{fontSize:"12px !important"},"& textarea":{fontSize:"12px !important",fontFamily:"Noto Sans KR"}},InputBox2:{width:185,height:25,marginTop:3,"& input":{fontSize:"12px !important",textAlign:"right"},"& textarea":{fontSize:"12px !important",fontFamily:"Noto Sans KR"}},InputBox3:{marginLeft:5,width:140,height:25,"& input":{fontSize:"12px !important"},"& textarea":{fontSize:"12px !important",fontFamily:"Noto Sans KR"}},InputBox4:{width:185,height:25,"& input":{fontSize:"12px !important"},"& textarea":{fontSize:"12px !important",fontFamily:"Noto Sans KR"}},RadioLabel:{display:"flex",alignItems:"center",height:20,width:50,fontSize:12,margin:"0px 1px"},RB1:{width:"15px!important",height:"15px!important"},RB2:{"& :focus-visible":{outline:"none!important",border:"2px solid #91a7ff!important"}},DateFont:{width:110,height:25,"& .textbox-text":{fontSize:"12px"},"& .textbox":{fontSize:"12px"},"& .combo-arrow":{backgroundImage:`url(${ye})`,backgroundRepeat:"no-repeat",backgroundColor:"#ffffff!important",height:12}},ComboStyle:{width:90,height:25,"& input":{fontSize:"12px !important"}},ComboStyle2:{width:50,height:25,"& input":{fontSize:"12px !important"}},CB:{margin:"3px 0px 0px 10px",width:"15px!important",height:"15px!important"},BoxAlignStyle:{marginTop:3,display:"flex",alignItems:"end"},BoxAlignStyle2:{marginTop:0,display:"flex",alignItems:"end"},onKeyEventBox:{height:31},InputAlignRight:{textAlign:"right "}}),Se=(s,l)=>{const _=s.toLowerCase().includes("search"),b=s.toLowerCase().includes("cust"),B=s.toLowerCase().includes("dept"),d=s.toLowerCase().includes("pno"),u=s.toLowerCase().includes("assent"),w=s.toLowerCase().includes("exception"),T=s.toLowerCase().includes("itemclass4");let t={};for(const[o,i]of Object.entries(l))if(i)if(!w&&b)if(_){const c=["custoutcd"],r=["custnm"];c.indexOf(o)>-1&&(t={...t,minorcd:i.trim()}),r.indexOf(o)>-1&&(t={...t,minornm:i.trim()})}else{const c=["custcd"],r=["custnm"];c.indexOf(o)>-1&&(t={...t,minorcd:i.trim()}),r.indexOf(o)>-1&&(t={...t,minornm:i.trim()})}else if(B){const c=["deptcd"],r=["deptnm"];c.indexOf(o)>-1&&(t={...t,minorcd:i.trim()}),r.indexOf(o)>-1&&(t={...t,minornm:i.trim()})}else if(d){const c=["pno"],r=["name"];c.indexOf(o)>-1&&(t={...t,minorcd:i.trim()}),r.indexOf(o)>-1&&(t={...t,minornm:i.trim()})}else if(u){const c=["custcd"],r=["custnm"];c.indexOf(o)>-1&&(t={...t,minorcd:i.trim()}),r.indexOf(o)>-1&&(t={...t,minornm:i.trim()})}else if(T){const c=["minorcd"],r=["minornm"],O=["item1"],a=["item2"];c.indexOf(o)>-1&&(t={...t,minorcd:i.trim()}),r.indexOf(o)>-1&&(t={...t,minornm:i.trim()}),O.indexOf(o)>-1&&(t={...t,item1:i.trim()}),a.indexOf(o)>-1&&(t={...t,item2:i.trim()})}else if(w)t=l;else{const c=["minorcd"],r=["minornm"];c.indexOf(o)>-1&&(t={...t,minorcd:i.trim()}),r.indexOf(o)>-1&&(t={...t,minornm:i.trim()})}return t};export{Ee as T,Se as f};
